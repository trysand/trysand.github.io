(function(){function e(e,n){e.prototype=t(n.prototype);e.prototype.constructor=e;e.parent=n.prototype}function t(e){function t(){}t.prototype=e;return new t}function n(e,t,n){"millisecond"===n?e.setMilliseconds(e.getMilliseconds()+1*t):"second"===n?e.setSeconds(e.getSeconds()+1*t):"minute"===n?e.setMinutes(e.getMinutes()+1*t):"hour"===n?e.setHours(e.getHours()+1*t):"day"===n?e.setDate(e.getDate()+1*t):"week"===n?e.setDate(e.getDate()+7*t):"month"===n?e.setMonth(e.getMonth()+1*t):"year"===n&&e.setFullYear(e.getFullYear()+1*t);return e}function r(e,t){return j[t+"Duration"]*e}function s(e,t){var n=!1;0>e&&(n=!0,e*=-1);e=""+e;for(t=t?t:1;e.length<t;)e="0"+e;return n?"-"+e:e}function o(e){if(!e)return e;e=e.replace(/^\s\s*/,"");for(var t=/\s/,n=e.length;t.test(e.charAt(--n)););return e.slice(0,n+1)}function u(e){e.roundRect=function(e,t,n,r,i,s,o,u){o&&(this.fillStyle=o);u&&(this.strokeStyle=u);"undefined"===typeof i&&(i=5);this.lineWidth=s;this.beginPath();this.moveTo(e+i,t);this.lineTo(e+n-i,t);this.quadraticCurveTo(e+n,t,e+n,t+i);this.lineTo(e+n,t+r-i);this.quadraticCurveTo(e+n,t+r,e+n-i,t+r);this.lineTo(e+i,t+r);this.quadraticCurveTo(e,t+r,e,t+r-i);this.lineTo(e,t+i);this.quadraticCurveTo(e,t,e+i,t);this.closePath();o&&this.fill();u&&0<s&&this.stroke()}}function a(e,t){return e-t}function f(e,t){return e.x-t.x}function l(e){var t=((e&16711680)>>16).toString(16),n=((e&65280)>>8).toString(16);e=((e&255)>>0).toString(16);t=2>t.length?"0"+t:t;n=2>n.length?"0"+n:n;e=2>e.length?"0"+e:e;return"#"+t+n+e}function c(e,t,n){n=n||"normal";var r=e+"_"+t+"_"+n,i=F[r];if(isNaN(i)){try{e="position:absolute; left:0px; top:-20000px; padding:0px;margin:0px;border:none;white-space:pre;line-height:normal;font-family:"+e+"; font-size:"+t+"px; font-weight:"+n+";";if(!I){var s=document.body;I=document.createElement("span");I.innerHTML="";var o=document.createTextNode("Mpgyi");I.appendChild(o);s.appendChild(I)}I.style.display="";I.setAttribute("style",e);i=Math.round(I.offsetHeight);I.style.display="none"}catch(u){i=Math.ceil(1.1*t)}i=Math.max(i,t);F[r]=i}return i}function h(e,t,n,r){if(e.addEventListener)e.addEventListener(t,n,r||!1);else if(e.attachEvent)e.attachEvent("on"+t,function(t){t=t||window.event;t.preventDefault=t.preventDefault||function(){t.returnValue=!1};t.stopPropagation=t.stopPropagation||function(){t.cancelBubble=!0};n.call(e,t)});else return!1}function p(e,t,n){e*=V;t*=V;e=n.getImageData(e,t,2,2).data;t=!0;for(n=0;4>n;n++)if(e[n]!==e[n+4]|e[n]!==e[n+8]|e[n]!==e[n+12]){t=!1;break}return t?e[0]<<16|e[1]<<8|e[2]:0}function d(e,t,n){var r;r=e?e+"FontStyle":"fontStyle";var i=e?e+"FontWeight":"fontWeight",s=e?e+"FontSize":"fontSize";e=e?e+"FontFamily":"fontFamily";r=""+(t[r]?t[r]+" ":n&&n[r]?n[r]+" ":"");r+=t[i]?t[i]+" ":n&&n[i]?n[i]+" ":"";r+=t[s]?t[s]+"px ":n&&n[s]?n[s]+"px ":"";t=t[e]?t[e]+"":n&&n[e]?n[e]+"":"";!_&&t&&(t=t.split(",")[0],"'"!==t[0]&&'"'!==t[0]&&(t="'"+t+"'"));return r+=t}function v(e,t,n){return e in t?t[e]:n[e]}function m(e,t,n){if(_&&z){var r=e.getContext("2d");X=r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1;V=W/X;e.width=t*V;e.height=n*V;W!==X&&(e.style.width=t+"px",e.style.height=n+"px",r.scale(V,V))}else e.width=t,e.height=n}function g(e,t){var n=document.createElement("canvas");n.setAttribute("class","canvasjs-chart-canvas");m(n,e,t);_||"undefined"===typeof G_vmlCanvasManager||G_vmlCanvasManager.initElement(n);return n}function y(e,t,n){this._defaultsKey=e;var r={};n&&B[n]&&B[n][e]&&(r=B[n][e]);this._options=t?t:{};this.setOptions(this._options,r)}function b(e,t){t=t||{};b.parent.constructor.call(this,"Chart",t,t.theme?t.theme:"theme1");var n=this;this._containerId=e;this._objectsInitialized=!1;this.overlaidCanvasCtx=this.ctx=null;this._indexLabels=[];this._panTimerId=0;this._lastTouchEventType="";this._lastTouchData=null;this.panEnabled=!1;this._defaultCursor="default";this.plotArea={canvas:null,ctx:null,x1:0,y1:0,x2:0,y2:0,width:0,height:0};this._dataInRenderedOrder=[];if(this._container=document.getElementById(this._containerId)){this._container.innerHTML="";var r=0,i=0,r=this._options.width?this.width:0<this._container.clientWidth?this._container.clientWidth:this.width,i=this._options.height?this.height:0<this._container.clientHeight?this._container.clientHeight:this.height;this.width=r;this.height=i;this._selectedColorSet="undefined"!==typeof H[this.colorSet]?H[this.colorSet]:H.colorSet1;this._canvasJSContainer=document.createElement("div");this._canvasJSContainer.setAttribute("class","canvasjs-chart-container");this._canvasJSContainer.style.position="relative";this._canvasJSContainer.style.textAlign="left";this._canvasJSContainer.style.cursor="auto";_||(this._canvasJSContainer.style.height="0px");this._container.appendChild(this._canvasJSContainer);this.canvas=g(r,i);this.canvas.style.position="absolute";if(this.canvas.getContext){try{this.canvas.style.background=this.backgroundColor}catch(s){}this._canvasJSContainer.appendChild(this.canvas);this.ctx=this.canvas.getContext("2d");this.ctx.textBaseline="top";u(this.ctx);_?this.plotArea.ctx=this.ctx:(this.plotArea.canvas=g(r,i),this.plotArea.canvas.style.position="absolute",this.plotArea.canvas.setAttribute("class","plotAreaCanvas"),this._canvasJSContainer.appendChild(this.plotArea.canvas),this.plotArea.ctx=this.plotArea.canvas.getContext("2d"));this.overlaidCanvas=g(r,i);this.overlaidCanvas.style.position="absolute";this._canvasJSContainer.appendChild(this.overlaidCanvas);this.overlaidCanvasCtx=this.overlaidCanvas.getContext("2d");this.overlaidCanvasCtx.textBaseline="top";this._eventManager=new O(this);h(window,"resize",function(){n._updateSize()&&n.render()});this._toolBar=document.createElement("div");this._toolBar.setAttribute("class","canvasjs-chart-toolbar");this._toolBar.style.position="absolute";this._toolBar.style.top="0px";this._toolBar.style.right="0px";this._canvasJSContainer.appendChild(this._toolBar);this._toolBar.style.display="none";this.bounds={x1:0,y1:0,x2:this.width,y2:this.height};h(this.overlaidCanvas,"click",function(e){n._mouseEventHandler(e)});h(this.overlaidCanvas,"mousemove",function(e){n._mouseEventHandler(e)});h(this.overlaidCanvas,"mouseup",function(e){n._mouseEventHandler(e)});h(this.overlaidCanvas,"mousedown",function(e){n._mouseEventHandler(e)});h(this.overlaidCanvas,"mouseout",function(e){n._mouseEventHandler(e)});h(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerDown":"touchstart",function(e){n._touchEventHandler(e)});h(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerMove":"touchmove",function(e){n._touchEventHandler(e)});h(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerUp":"touchend",function(e){n._touchEventHandler(e)});h(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerCancel":"touchcancel",function(e){n._touchEventHandler(e)});this._creditLink||(this._creditLink=document.createElement("a"),this._creditLink.setAttribute("class","canvasjs-chart-credit"),this._creditLink.setAttribute("style","outline:none;margin:0px;position:absolute;right:3px;top:"+(this.height-14)+"px;color:dimgrey;text-decoration:none;font-size:10px;font-family:Lucida Grande, Lucida Sans Unicode, Arial, sans-serif"),this._creditLink.setAttribute("tabIndex",-1),this._creditLink.setAttribute("target","_blank"));this._toolTip=new A(this,this._options.toolTip,this.theme);this.layoutManager=new E(this);this.axisY2=this.axisY=this.axisX=this.data=null;this.renderCount=0;this.sessionVariables={axisX:{internalMinimum:null,internalMaximum:null},axisY:{internalMinimum:null,internalMaximum:null},axisY2:{internalMinimum:null,internalMaximum:null}}}}else window.console&&window.console.log('CanvasJS Error: Chart Container with id "'+this._containerId+'" was not found')}function w(e,t){for(var n=[],r=0;r<e.length;r++)if(0==r)n.push(e[0]);else{var i,s,o;o=r-1;i=0===o?0:o-1;s=o===e.length-1?o:o+1;n[n.length]={x:e[o].x+(e[s].x-e[i].x)/t/3,y:e[o].y+(e[s].y-e[i].y)/t/3};o=r;i=0===o?0:o-1;s=o===e.length-1?o:o+1;n[n.length]={x:e[o].x-(e[s].x-e[i].x)/t/3,y:e[o].y-(e[s].y-e[i].y)/t/3};n[n.length]=e[r]}return n}function E(e){this._rightOccupied=this._leftOccupied=this._bottomOccupied=this._topOccupied=0;this.chart=e}function S(e,t){S.parent.constructor.call(this,"TextBlock",t);this.ctx=e;this._isDirty=!0;this._wrappedText=null;this._lineHeight=c(this.fontFamily,this.fontSize,this.fontWeight)}function x(e,t){x.parent.constructor.call(this,"Title",t,e.theme);this.chart=e;this.canvas=e.canvas;this.ctx=this.chart.ctx;"undefined"===typeof this._options.fontSize&&(this.fontSize=this.chart.getAutoFontSize(this.fontSize));this.height=this.width=null;this.bounds={x1:null,y1:null,x2:null,y2:null}}function T(e,t,n){T.parent.constructor.call(this,"Legend",t,n);this.chart=e;this.canvas=e.canvas;this.ctx=this.chart.ctx;this.ghostCtx=this.chart._eventManager.ghostCtx;this.items=[];this.height=this.width=0;this.orientation=null;this.horizontalSpacing=10;this.dataSeries=[];this.bounds={x1:null,y1:null,x2:null,y2:null};"undefined"===typeof this._options.fontSize&&(this.fontSize=this.chart.getAutoFontSize(this.fontSize));this.lineHeight=c(this.fontFamily,this.fontSize,this.fontWeight)}function N(e,t){N.parent.constructor.call(this,t);this.chart=e;this.canvas=e.canvas;this.ctx=this.chart.ctx}function C(e,t,n,r,i){C.parent.constructor.call(this,"DataSeries",t,n);this.chart=e;this.canvas=e.canvas;this._ctx=e.canvas.ctx;this.index=r;this.maxWidthInX=this.noDataPointsInPlotArea=0;this.id=i;this.chart._eventManager.objectMap[i]={id:i,objectType:"dataSeries",dataSeriesIndex:r};this.dataPointIds=[];this.axisY=this.axisX=null;this.axisPlacement=this.getDefaultAxisPlacement();"undefined"===typeof this._options.indexLabelFontSize&&(this.indexLabelFontSize=this.chart.getAutoFontSize(this.indexLabelFontSize))}function k(e,t,n,r){k.parent.constructor.call(this,"Axis",t,e.theme);this.chart=e;this.canvas=e.canvas;this.ctx=e.ctx;this.intervalStartPosition=this.maxHeight=this.maxWidth=0;this.labels=[];this._labels=null;this.dataInfo={min:Infinity,max:-Infinity,viewPortMin:Infinity,viewPortMax:-Infinity,minDiff:Infinity};"axisX"===n?(this.sessionVariables=this.chart.sessionVariables[n],this._options.interval||(this.intervalType=null)):this.sessionVariables="left"===r||"top"===r?this.chart.sessionVariables.axisY:this.chart.sessionVariables.axisY2;"undefined"===typeof this._options.titleFontSize&&(this.titleFontSize=this.chart.getAutoFontSize(this.titleFontSize));"undefined"===typeof this._options.labelFontSize&&(this.labelFontSize=this.chart.getAutoFontSize(this.labelFontSize));this.type=n;"axisX"!==n||t&&"undefined"!==typeof t.gridThickness||(this.gridThickness=0);this._position=r;this.lineCoordinates={x1:null,y1:null,x2:null,y2:null,width:null};this.labelAngle=(this.labelAngle%360+360)%360;90<this.labelAngle&&270>=this.labelAngle?this.labelAngle-=180:180<this.labelAngle&&270>=this.labelAngle?this.labelAngle-=180:270<this.labelAngle&&360>=this.labelAngle&&(this.labelAngle-=360);if(this._options.stripLines&&0<this._options.stripLines.length)for(this.stripLines=[],t=0;t<this._options.stripLines.length;t++)this.stripLines.push(new L(this.chart,this._options.stripLines[t],e.theme,++this.chart._eventManager.lastObjectId));this._absoluteMaximum=this._absoluteMinimum=this._titleTextBlock=null;this.hasOptionChanged("minimum")&&(this.sessionVariables.internalMinimum=this.minimum);this.hasOptionChanged("maximum")&&(this.sessionVariables.internalMaximum=this.maximum);this.trackChanges("minimum");this.trackChanges("maximum")}function L(e,t,n,r){L.parent.constructor.call(this,"StripLine",t,n);this._thicknessType="pixel";this.id=r;null!==this.startValue&&null!==this.endValue&&(this.value=((this.startValue.getTime?this.startValue.getTime():this.startValue)+(this.endValue.getTime?this.endValue.getTime():this.endValue))/2,this.thickness=Math.max(this.endValue-this.startValue),this._thicknessType="value")}function A(e,t,n){A.parent.constructor.call(this,"ToolTip",t,n);this.chart=e;this.canvas=e.canvas;this.ctx=this.chart.ctx;this.currentDataPointIndex=this.currentSeriesIndex=-1;this._timerId=0;this._prevY=this._prevX=NaN;this._initialize()}function O(e){this.chart=e;this.lastObjectId=0;this.objectMap=[];this.rectangularRegionEventSubscriptions=[];this.previousDataPointEventObject=null;this.ghostCanvas=g(this.chart.width,this.chart.height);this.ghostCtx=this.ghostCanvas.getContext("2d");this.mouseoveredObjectMaps=[]}function M(e,t){var n;t&&P[t]&&(n=P[t]);x.parent.constructor.call(this,"CultureInfo",n,e.theme);this.chart=e;this.canvas=e.canvas;this.ctx=this.chart.ctx}var _=!!document.createElement("canvas").getContext,D={Chart:{width:500,height:400,zoomEnabled:!1,backgroundColor:"white",theme:"theme1",animationEnabled:_?!0:!1,colorSet:"colorSet1",culture:"en",creditHref:"http://canvasjs.com/",creditText:"CanvasJS.com",interactivityEnabled:!0},Title:{padding:0,text:null,verticalAlign:"top",horizontalAlign:"center",fontSize:20,fontFamily:"Calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",borderThickness:0,borderColor:"black",cornerRadius:0,backgroundColor:null,margin:5},Legend:{name:null,verticalAlign:"center",horizontalAlign:"right",fontSize:14,fontFamily:"calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",cursor:null,itemmouseover:null,itemmouseout:null,itemmousemove:null,itemclick:null},ToolTip:{enabled:!0,borderColor:null,shared:!1,animationEnabled:!0,content:null},Axis:{minimum:null,maximum:null,interval:null,intervalType:null,title:null,titleFontColor:"black",titleFontSize:20,titleFontFamily:"arial",titleFontWeight:"normal",titleFontStyle:"normal",labelAngle:0,labelFontFamily:"arial",labelFontColor:"black",labelFontSize:12,labelFontWeight:"normal",labelFontStyle:"normal",labelAutoFit:!1,labelWrap:!0,labelMaxWidth:null,prefix:"",suffix:"",includeZero:!0,tickLength:5,tickColor:"black",tickThickness:1,lineColor:"black",lineThickness:1,gridColor:"A0A0A0",gridThickness:0,interlacedColor:null,valueFormatString:null,margin:2,stripLines:[]},StripLine:{value:null,startValue:null,endValue:null,color:"orange",thickness:2,label:"",labelBackgroundColor:"#EEEEEE",labelFontFamily:"arial",labelFontColor:"orange",labelFontSize:12,labelFontWeight:"normal",labelFontStyle:"normal"},DataSeries:{name:null,dataPoints:null,label:"",bevelEnabled:!1,cursor:null,indexLabel:"",indexLabelPlacement:"outside",indexLabelOrientation:"horizontal",indexLabelFontColor:"black",indexLabelFontSize:12,indexLabelFontStyle:"normal",indexLabelFontFamily:"Arial",indexLabelFontWeight:"normal",indexLabelBackgroundColor:null,indexLabelLineColor:null,indexLabelLineThickness:1,indexLabelMaxWidth:null,indexLabelWrap:!0,lineThickness:2,color:null,startAngle:0,type:"column",xValueType:"number",axisYType:"primary",xValueFormatString:null,yValueFormatString:null,showInLegend:null,legendMarkerType:null,legendMarkerColor:null,legendText:null,markerType:"circle",markerColor:null,markerSize:null,markerBorderColor:null,markerBorderThickness:null,mouseover:null,mouseout:null,mousemove:null,click:null,toolTipContent:null,visible:!0},CultureInfo:{decimalSeparator:".",digitGroupSeparator:",",zoomText:"Zoom",panText:"Pan",resetText:"Reset",days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")},TextBlock:{x:0,y:0,width:null,height:null,maxWidth:null,maxHeight:null,padding:0,angle:0,text:"",horizontalAlign:"center",fontSize:12,fontFamily:"calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",borderThickness:0,borderColor:"black",cornerRadius:0,backgroundColor:null,textBaseline:"top"}},P={en:{}},H={colorSet1:"#369EAD #C24642 #7F6084 #86B402 #A2D1CF #C8B631 #6DBCEB #52514E #4F81BC #A064A1 #F79647".split(" "),colorSet2:"#4F81BC #C0504E #9BBB58 #23BFAA #8064A1 #4AACC5 #F79647 #33558B".split(" "),colorSet3:"#8CA1BC #36845C #017E82 #8CB9D0 #708C98 #94838D #F08891 #0366A7 #008276 #EE7757 #E5BA3A #F2990B #03557B #782970".split(" ")},B={theme1:{Chart:{colorSet:"colorSet1"},Title:{fontFamily:_?"Calibri, Optima, Candara, Verdana, Geneva, sans-serif":"calibri",fontSize:33,fontColor:"#3A3A3A",fontWeight:"bold",verticalAlign:"top",margin:10},Axis:{titleFontSize:26,titleFontColor:"#666666",titleFontFamily:_?"Calibri, Optima, Candara, Verdana, Geneva, sans-serif":"calibri",labelFontFamily:_?"Calibri, Optima, Candara, Verdana, Geneva, sans-serif":"calibri",labelFontSize:18,labelFontColor:"grey",tickColor:"#BBBBBB",tickThickness:2,gridThickness:2,gridColor:"#BBBBBB",lineThickness:2,lineColor:"#BBBBBB"},Legend:{verticalAlign:"bottom",horizontalAlign:"center",fontFamily:_?"monospace, sans-serif,arial black":"calibri"},DataSeries:{indexLabelFontColor:"grey",indexLabelFontFamily:_?"Calibri, Optima, Candara, Verdana, Geneva, sans-serif":"calibri",indexLabelFontSize:18,indexLabelLineThickness:1}},theme2:{Chart:{colorSet:"colorSet2"},Title:{fontFamily:"impact, charcoal, arial black, sans-serif",fontSize:32,fontColor:"#333333",verticalAlign:"top",margin:10},Axis:{titleFontSize:22,titleFontColor:"rgb(98,98,98)",titleFontFamily:_?"monospace, sans-serif,arial black":"arial",titleFontWeight:"bold",labelFontFamily:_?"monospace, Courier New, Courier":"arial",labelFontSize:16,labelFontColor:"grey",labelFontWeight:"bold",tickColor:"grey",tickThickness:2,gridThickness:2,gridColor:"grey",lineThickness:0},Legend:{verticalAlign:"bottom",horizontalAlign:"center",fontFamily:_?"monospace, sans-serif,arial black":"arial"},DataSeries:{indexLabelFontColor:"grey",indexLabelFontFamily:_?"Courier New, Courier, monospace":"arial",indexLabelFontWeight:"bold",indexLabelFontSize:18,indexLabelLineThickness:1}},theme3:{Chart:{colorSet:"colorSet1"},Title:{fontFamily:_?"Candara, Optima, Trebuchet MS, Helvetica Neue, Helvetica, Trebuchet MS, serif":"calibri",fontSize:32,fontColor:"#3A3A3A",fontWeight:"bold",verticalAlign:"top",margin:10},Axis:{titleFontSize:22,titleFontColor:"rgb(98,98,98)",titleFontFamily:_?"Verdana, Geneva, Calibri, sans-serif":"calibri",labelFontFamily:_?"Calibri, Optima, Candara, Verdana, Geneva, sans-serif":"calibri",labelFontSize:18,labelFontColor:"grey",tickColor:"grey",tickThickness:2,gridThickness:2,gridColor:"grey",lineThickness:2,lineColor:"grey"},Legend:{verticalAlign:"bottom",horizontalAlign:"center",fontFamily:_?"monospace, sans-serif,arial black":"calibri"},DataSeries:{bevelEnabled:!0,indexLabelFontColor:"grey",indexLabelFontFamily:_?"Candara, Optima, Calibri, Verdana, Geneva, sans-serif":"calibri",indexLabelFontSize:18,indexLabelLineColor:"lightgrey",indexLabelLineThickness:2}}},j={numberDuration:1,yearDuration:314496e5,monthDuration:2592e6,weekDuration:6048e5,dayDuration:864e5,hourDuration:36e5,minuteDuration:6e4,secondDuration:1e3,millisecondDuration:1,dayOfWeekFromInt:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ")},F={},I=null,q=function(){var e=/D{1,4}|M{1,4}|Y{1,4}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|f{1,3}|t{1,2}|T{1,2}|K|z{1,3}|"[^"]*"|'[^']*'/g,t="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),n="Sun Mon Tue Wed Thu Fri Sat".split(" "),r="January February March April May June July August September October November December".split(" "),i="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),o=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,u=/[^-+\dA-Z]/g;return function(a,f,l){var c=l?l.days:t,h=l?l.months:r,p=l?l.shortDays:n,d=l?l.shortMonths:i;l="";var v=!1;a=a&&a.getTime?a:a?new Date(a):new Date;if(isNaN(a))throw SyntaxError("invalid date");"UTC:"===f.slice(0,4)&&(f=f.slice(4),v=!0);l=v?"getUTC":"get";var m=a[l+"Date"](),g=a[l+"Day"](),y=a[l+"Month"](),b=a[l+"FullYear"](),w=a[l+"Hours"](),E=a[l+"Minutes"](),S=a[l+"Seconds"](),x=a[l+"Milliseconds"](),T=v?0:a.getTimezoneOffset();return l=f.replace(e,function(e){switch(e){case"D":return m;case"DD":return s(m,2);case"DDD":return p[g];case"DDDD":return c[g];case"M":return y+1;case"MM":return s(y+1,2);case"MMM":return d[y];case"MMMM":return h[y];case"Y":return parseInt(String(b).slice(-2));case"YY":return s(String(b).slice(-2),2);case"YYY":return s(String(b).slice(-3),3);case"YYYY":return s(b,4);case"h":return w%12||12;case"hh":return s(w%12||12,2);case"H":return w;case"HH":return s(w,2);case"m":return E;case"mm":return s(E,2);case"s":return S;case"ss":return s(S,2);case"f":return String(x).slice(0,1);case"ff":return s(String(x).slice(0,2),2);case"fff":return s(String(x).slice(0,3),3);case"t":return 12>w?"a":"p";case"tt":return 12>w?"am":"pm";case"T":return 12>w?"A":"P";case"TT":return 12>w?"AM":"PM";case"K":return v?"UTC":(String(a).match(o)||[""]).pop().replace(u,"");case"z":return(0<T?"-":"+")+Math.floor(Math.abs(T)/60);case"zz":return(0<T?"-":"+")+s(Math.floor(Math.abs(T)/60),2);case"zzz":return(0<T?"-":"+")+s(Math.floor(Math.abs(T)/60),2)+s(Math.abs(T)%60,2);default:return e.slice(1,e.length-1)}})}}(),R=function(e,t,n){if(null===e)return"";e=Number(e);var r=0>e?!0:!1;r&&(e*=-1);var i=n?n.decimalSeparator:".",o=n?n.digitGroupSeparator:",",u="";t=String(t);var u=1,a=n="",f=-1,l=[],c=[],h=0,p=0,d=0,v=!1,m=0,a=t.match(/"[^"]*"|'[^']*'|[eE][+-]*[0]+|[,]+[.]|\u2030|./g);t=null;for(var g=0;a&&g<a.length;g++)if(t=a[g],"."===t&&0>f)f=g;else{if("%"===t)u*=100;else if("‰"===t){u*=1e3;continue}else if(","===t[0]&&"."===t[t.length-1]){u/=Math.pow(1e3,t.length-1);f=g+t.length-1;continue}else"E"!==t[0]&&"e"!==t[0]||"0"!==t[t.length-1]||(v=!0);0>f?(l.push(t),"#"===t||"0"===t?h++:","===t&&d++):(c.push(t),"#"!==t&&"0"!==t||p++)}v&&(t=Math.floor(e),m=(0===t?"":String(t)).length-h,u/=Math.pow(10,m));0>f&&(f=g);u=(e*u).toFixed(p);t=u.split(".");u=(t[0]+"").split("");e=(t[1]+"").split("");u&&"0"===u[0]&&u.shift();for(g=v=a=p=f=0;0<l.length;)if(t=l.pop(),"#"===t||"0"===t)if(f++,f===h){var y=u,u=[];if("0"===t)for(t=h-p-(y?y.length:0);0<t;)y.unshift("0"),t--;for(;0<y.length;)n=y.pop()+n,g++,0===g%v&&a===d&&0<y.length&&(n=o+n);r&&(n="-"+n)}else 0<u.length?(n=u.pop()+n,p++,g++):"0"===t&&(n="0"+n,p++,g++),0===g%v&&a===d&&0<u.length&&(n=o+n);else"E"!==t[0]&&"e"!==t[0]||"0"!==t[t.length-1]||!/[eE][+-]*[0]+/.test(t)?","===t?(a++,v=g,g=0,0<u.length&&(n=o+n)):n=1<t.length&&('"'===t[0]&&'"'===t[t.length-1]||"'"===t[0]&&"'"===t[t.length-1])?t.slice(1,t.length-1)+n:t+n:(t=0>m?t.replace("+","").replace("-",""):t.replace("-",""),n+=t.replace(/[0]+/,function(e){return s(m,e.length)}));r="";for(o=!1;0<c.length;)t=c.shift(),"#"===t||"0"===t?0<e.length&&0!==Number(e.join(""))?(r+=e.shift(),o=!0):"0"===t&&(r+="0",o=!0):1<t.length&&('"'===t[0]&&'"'===t[t.length-1]||"'"===t[0]&&"'"===t[t.length-1])?r+=t.slice(1,t.length-1):"E"!==t[0]&&"e"!==t[0]||"0"!==t[t.length-1]||!/[eE][+-]*[0]+/.test(t)?r+=t:(t=0>m?t.replace("+","").replace("-",""):t.replace("-",""),r+=t.replace(/[0]+/,function(e){return s(m,e.length)}));return n+((o?i:"")+r)},U=function(e){var t=0,n=0;e=e||window.event;e.offsetX||0===e.offsetX?(t=e.offsetX,n=e.offsetY):e.layerX||0==e.layerX?(t=e.layerX,n=e.layerY):(t=e.pageX-e.target.offsetLeft,n=e.pageY-e.target.offsetTop);return{x:t,y:n}},z=!0,W=window.devicePixelRatio||1,X=1,V=z?W/X:1;y.prototype.setOptions=function(e,t){if(D[this._defaultsKey]){var n=D[this._defaultsKey],r;for(r in n)this[r]=e&&r in e?e[r]:t&&r in t?t[r]:n[r]}};y.prototype.updateOption=function(e){var t=D[this._defaultsKey],n=this._options.theme?this._options.theme:this.chart&&this.chart._options.theme?this.chart._options.theme:"theme1",r={},i=this[e];n&&B[n]&&B[n][this._defaultsKey]&&(r=B[n][this._defaultsKey]);e in t&&(i=e in this._options?this._options[e]:r&&e in r?r[e]:t[e]);if(i===this[e])return!1;this[e]=i;return!0};y.prototype.trackChanges=function(e){this._options._oldOptions||(this._options._oldOptions={});this._options._oldOptions[e]=this._options[e]};y.prototype.isBeingTracked=function(e){this._options._oldOptions||(this._options._oldOptions={});return this._options._oldOptions[e]?!0:!1};y.prototype.hasOptionChanged=function(e){this._options._oldOptions||(this._options._oldOptions={});return this._options._oldOptions[e]!==this._options[e]};e(b,y);b.prototype._updateOptions=function(){var e=this;this.updateOption("width");this.updateOption("height");this.updateOption("theme");this.updateOption("colorSet")&&(this._selectedColorSet="undefined"!==typeof H[this.colorSet]?H[this.colorSet]:H.colorSet1);if(this.updateOption("backgroundColor"))try{this.canvas.style.background!==this.backgroundColor&&(this.canvas.style.background=this.backgroundColor)}catch(t){}this.updateOption("animationEnabled");this._options.zoomEnabled?(this._zoomButton||(this._zoomButton=document.createElement("button"),this._zoomButton.appendChild(document.createTextNode("Pan")),this._toolBar.appendChild(this._zoomButton),h(this._zoomButton,"click",function(){e.zoomEnabled?(e.zoomEnabled=!1,e.panEnabled=!0,e._zoomButton.innerHTML=e._cultureInfo.zoomText):(e.zoomEnabled=!0,e.panEnabled=!1,e._zoomButton.innerHTML=e._cultureInfo.panText);e.render()})),this._resetButton||(this._resetButton=document.createElement("button"),this._resetButton.appendChild(document.createTextNode("Reset")),this._toolBar.appendChild(this._resetButton),h(this._resetButton,"click",function(){e._toolTip.hide();e.zoomEnabled||e.panEnabled?(e.zoomEnabled=!0,e.panEnabled=!1,e._zoomButton.innerHTML=e._cultureInfo.panText,e._defaultCursor="default",e.overlaidCanvas.style.cursor=e._defaultCursor):(e.zoomEnabled=!1,e.panEnabled=!1);e.sessionVariables.axisX.internalMinimum=e._options.axisX&&e._options.axisX.minimum?e._options.axisX.minimum:null;e.sessionVariables.axisX.internalMaximum=e._options.axisX&&e._options.axisX.maximum?e._options.axisX.maximum:null;e.resetOverlayedCanvas();e._toolBar.style.display="none";e.render()}),this.overlaidCanvas.style.cursor=e._defaultCursor),this.zoomEnabled||this.panEnabled||(this._zoomButton?(e._zoomButton.innerHTML===e._cultureInfo.zoomText?(this.panEnabled=!0,this.zoomEnabled=!1):(this.zoomEnabled=!0,this.panEnabled=!1),e._toolBar.style.display="inline"):(this.zoomEnabled=!0,this.panEnabled=!1))):this.panEnabled=this.zoomEnabled=!1;this.updateOption("culture");this._cultureInfo=new M(this,this._options.culture);if("none"!==this._toolBar.style.display){var n=this.panEnabled?e._cultureInfo.zoomText:e._cultureInfo.panText;e._zoomButton.innerHTML!==n&&(e._zoomButton.innerHTML=n);e._resetButton.innerHTML!==e._cultureInfo.resetText&&(e._resetButton.innerHTML=e._cultureInfo.resetText)}var n=this.updateOption("creditText"),r=this.updateOption("creditHref");if(0===this.renderCount||n||r)this._creditLink.setAttribute("href",this.creditHref),this._creditLink.innerHTML=this.creditText;this.creditHref&&this.creditText?this._creditLink.parentElement||this._canvasJSContainer.appendChild(this._creditLink):this._creditLink.parentElement&&this._canvasJSContainer.removeChild(this._creditLink);this._options.toolTip&&this._toolTip._options!==this._options.toolTip&&(this._toolTip._options=this._options.toolTip);this._toolTip.updateOption("enabled");this._toolTip.updateOption("shared");this._toolTip.updateOption("animationEnabled");this._toolTip.updateOption("borderColor");this._toolTip.updateOption("content")};b.prototype._updateSize=function(){var e=0,t=0;this._options.width?e=this.width:this.width=e=0<this._container.clientWidth?this._container.clientWidth:this.width;this._options.height?t=this.height:this.height=t=0<this._container.clientHeight?this._container.clientHeight:this.height;return this.canvas.width!==e*V||this.canvas.height!==t*V?(m(this.canvas,e,t),m(this.overlaidCanvas,e,t),m(this._eventManager.ghostCanvas,e,t),!0):!1};b.prototype._initialize=function(){this.pieDoughnutClickHandler=null;this.animationRequestId&&this.cancelRequestAnimFrame.call(window,this.animationRequestId);this._updateOptions();this._updateSize();this.ctx.clearRect(0,0,this.width,this.height);this.ctx.beginPath();this.axisY2=this.axisY=this.axisX=null;this._indexLabels=[];this._dataInRenderedOrder=[];this._events=[];this._eventManager&&this._eventManager.reset();this.plotInfo={axisPlacement:null,axisXValueType:null,plotTypes:[]};this.layoutManager.reset();this.data=[];for(var e=0,t=0;t<this._options.data.length;t++)if(e++,!this._options.data[t].type||0<=b._supportedChartTypes.indexOf(this._options.data[t].type)){var n=new C(this,this._options.data[t],this.theme,e-1,++this._eventManager.lastObjectId);null===n.name&&(n.name="DataSeries "+e);null===n.color?1<this._options.data.length?(n._colorSet=[this._selectedColorSet[n.index%this._selectedColorSet.length]],n.color=this._selectedColorSet[n.index%this._selectedColorSet.length]):n._colorSet="line"===n.type||"stepLine"===n.type||"spline"===n.type||"area"===n.type||"stepArea"===n.type||"splineArea"===n.type||"stackedArea"===n.type||"stackedArea100"===n.type?[this._selectedColorSet[0]]:this._selectedColorSet:n._colorSet=[n.color];null===n.markerSize&&(("line"===n.type||"stepLine"===n.type||"spline"===n.type)&&n.dataPoints&&n.dataPoints.length<this.width/16||"scatter"===n.type)&&(n.markerSize=8);"bubble"!==n.type&&"scatter"!==n.type||!n.dataPoints||n.dataPoints.sort(f);this.data.push(n);var r=n.axisPlacement,i;"normal"===r?"xySwapped"===this.plotInfo.axisPlacement?i='You cannot combine "'+n.type+'" with bar chart':"none"===this.plotInfo.axisPlacement?i='You cannot combine "'+n.type+'" with pie chart':null===this.plotInfo.axisPlacement&&(this.plotInfo.axisPlacement="normal"):"xySwapped"===r?"normal"===this.plotInfo.axisPlacement?i='You cannot combine "'+n.type+'" with line, area, column or pie chart':"none"===this.plotInfo.axisPlacement?i='You cannot combine "'+n.type+'" with pie chart':null===this.plotInfo.axisPlacement&&(this.plotInfo.axisPlacement="xySwapped"):"none"==r&&("normal"===this.plotInfo.axisPlacement?i='You cannot combine "'+n.type+'" with line, area, column or bar chart':"xySwapped"===this.plotInfo.axisPlacement?i='You cannot combine "'+n.type+'" with bar chart':null===this.plotInfo.axisPlacement&&(this.plotInfo.axisPlacement="none"));if(i&&window.console){window.console.log(i);return}}this._objectsInitialized=!0};b._supportedChartTypes="line stepLine spline column area stepArea splineArea bar bubble scatter stackedColumn stackedColumn100 stackedBar stackedBar100 stackedArea stackedArea100 pie doughnut".split(" ");b._supportedChartTypes.indexOf||(b._supportedChartTypes.indexOf=function(e,t){var n=this.length>>>0,r=Number(t)||0,r=0>r?Math.ceil(r):Math.floor(r);for(0>r&&(r+=n);r<n;r++)if(r in this&&this[r]===e)return r;return-1});b.prototype.render=function(e){e&&(this._options=e);this._initialize();for(e=0;e<this.data.length;e++)if("normal"===this.plotInfo.axisPlacement||"xySwapped"===this.plotInfo.axisPlacement)this.data[e].axisYType&&"primary"!==this.data[e].axisYType?"secondary"===this.data[e].axisYType&&(this.axisY2||("normal"===this.plotInfo.axisPlacement?this.axisY2=new k(this,this._options.axisY2,"axisY","right"):"xySwapped"===this.plotInfo.axisPlacement&&(this.axisY2=new k(this,this._options.axisY2,"axisY","top"))),this.data[e].axisY=this.axisY2):(this.axisY||("normal"===this.plotInfo.axisPlacement?this.axisY=new k(this,this._options.axisY,"axisY","left"):"xySwapped"===this.plotInfo.axisPlacement&&(this.axisY=new k(this,this._options.axisY,"axisY","bottom"))),this.data[e].axisY=this.axisY),this.axisX||("normal"===this.plotInfo.axisPlacement?this.axisX=new k(this,this._options.axisX,"axisX","bottom"):"xySwapped"===this.plotInfo.axisPlacement&&(this.axisX=new k(this,this._options.axisX,"axisX","left"))),this.data[e].axisX=this.axisX;this._processData();this._options.title&&(this._title=new x(this,this._options.title),this._title.render());this.legend=new T(this,this._options.legend,this.theme);for(e=0;e<this.data.length;e++)this.data[e].showInLegend&&this.legend.dataSeries.push(this.data[e]);this.legend.render();if("normal"===this.plotInfo.axisPlacement||"xySwapped"===this.plotInfo.axisPlacement)this.layoutManager.getFreeSpace(),k.setLayoutAndRender(this.axisX,this.axisY,this.axisY2,this.plotInfo.axisPlacement,this.layoutManager.getFreeSpace());else if("none"===this.plotInfo.axisPlacement)this.preparePlotArea();else return;for(e=0;e<this.plotInfo.plotTypes.length;e++)for(var t=this.plotInfo.plotTypes[e],n=0;n<t.plotUnits.length;n++){var r=t.plotUnits[n];"line"===r.type?this.renderLine(r):"stepLine"===r.type?this.renderStepLine(r):"spline"===r.type?this.renderSpline(r):"column"===r.type?this.renderColumn(r):"bar"===r.type?this.renderBar(r):"area"===r.type?this.renderArea(r):"stepArea"===r.type?this.renderStepArea(r):"splineArea"===r.type?this.renderSplineArea(r):"stackedColumn"===r.type?this.renderStackedColumn(r):"stackedColumn100"===r.type?this.renderStackedColumn100(r):"stackedBar"===r.type?this.renderStackedBar(r):"stackedBar100"===r.type?this.renderStackedBar100(r):"stackedArea"===r.type?this.renderStackedArea(r):"stackedArea100"===r.type?this.renderStackedArea100(r):"bubble"===r.type?this.renderBubble(r):"scatter"===r.type?this.renderScatter(r):"pie"===r.type?this.renderPie(r):"doughnut"===r.type&&this.renderPie(r);for(var i=0;i<r.dataSeriesIndexes.length;i++)this._dataInRenderedOrder.push(this.data[r.dataSeriesIndexes[i]])}0<this._indexLabels.length&&this.renderIndexLabels();this.attachPlotAreaEventHandlers();this.zoomEnabled||this.panEnabled||"none"===this._toolBar.style.display||(this._toolBar.style.display="none");this._toolTip._updateToolTip();this.renderCount++};b.prototype.attachPlotAreaEventHandlers=function(){this.attachEvent({context:this,chart:this,mousedown:this._plotAreaMouseDown,mouseup:this._plotAreaMouseUp,mousemove:this._plotAreaMouseMove,cursor:this.zoomEnabled?"col-resize":"move",cursor:this.panEnabled?"move":"default",capture:!0,bounds:this.plotArea})};b.prototype.categoriseDataSeries=function(){for(var e="",t=0;t<this.data.length;t++)if(e=this.data[t],e.dataPoints&&0!==e.dataPoints.length&&e.visible&&0<=b._supportedChartTypes.indexOf(e.type)){for(var n=null,r=!1,i=null,s=!1,o=0;o<this.plotInfo.plotTypes.length;o++)if(this.plotInfo.plotTypes[o].type===e.type){r=!0;n=this.plotInfo.plotTypes[o];break}r||(n={type:e.type,totalDataSeries:0,plotUnits:[]},this.plotInfo.plotTypes.push(n));for(o=0;o<n.plotUnits.length;o++)if(n.plotUnits[o].axisYType===e.axisYType){s=!0;i=n.plotUnits[o];break}s||(i={type:e.type,previousDataSeriesCount:0,index:n.plotUnits.length,plotType:n,axisYType:e.axisYType,axisY:"primary"===e.axisYType?this.axisY:this.axisY2,axisX:this.axisX,dataSeriesIndexes:[]},n.plotUnits.push(i));n.totalDataSeries++;i.dataSeriesIndexes.push(t)}for(t=0;t<this.plotInfo.plotTypes.length;t++)for(n=this.plotInfo.plotTypes[t],o=e=0;o<n.plotUnits.length;o++)n.plotUnits[o].previousDataSeriesCount=e,e+=n.plotUnits[o].dataSeriesIndexes.length};b.prototype.assignIdToDataPoints=function(){for(var e=0;e<this.data.length;e++){var t=this.data[e];if(t.dataPoints)for(var n=t.dataPoints.length,r=0;r<n;r++)t.dataPointIds[r]=++this._eventManager.lastObjectId}};b.prototype._processData=function(){this.assignIdToDataPoints();this.categoriseDataSeries();for(var e=0;e<this.plotInfo.plotTypes.length;e++)for(var t=this.plotInfo.plotTypes[e],n=0;n<t.plotUnits.length;n++){var r=t.plotUnits[n];"line"===r.type||"stepLine"===r.type||"spline"===r.type||"column"===r.type||"area"===r.type||"stepArea"===r.type||"splineArea"===r.type||"bar"===r.type||"bubble"===r.type||"scatter"===r.type?this._processMultiseriesPlotUnit(r):"stackedColumn"===r.type||"stackedBar"===r.type||"stackedArea"===r.type?this._processStackedPlotUnit(r):"stackedColumn100"!==r.type&&"stackedBar100"!==r.type&&"stackedArea100"!==r.type||this._processStacked100PlotUnit(r)}};b.prototype._processMultiseriesPlotUnit=function(e){if(e.dataSeriesIndexes&&!(1>e.dataSeriesIndexes.length))for(var t=e.axisY.dataInfo,n=e.axisX.dataInfo,r,i,s=!1,o=0;o<e.dataSeriesIndexes.length;o++){var u=this.data[e.dataSeriesIndexes[o]],a=0,f=!1,l=!1;if("normal"===u.axisPlacement||"xySwapped"===u.axisPlacement)var c=this.sessionVariables.axisX.internalMinimum?this.sessionVariables.axisX.internalMinimum:this._options.axisX&&this._options.axisX.minimum?this._options.axisX.minimum:-Infinity,h=this.sessionVariables.axisX.internalMaximum?this.sessionVariables.axisX.internalMaximum:this._options.axisX&&this._options.axisX.maximum?this._options.axisX.maximum:Infinity;if(u.dataPoints[a].x&&u.dataPoints[a].x.getTime||"dateTime"===u.xValueType)s=!0;for(a=0;a<u.dataPoints.length;a++){"undefined"===typeof u.dataPoints[a].x&&(u.dataPoints[a].x=a);u.dataPoints[a].x.getTime?(s=!0,r=u.dataPoints[a].x.getTime()):r=u.dataPoints[a].x;i=u.dataPoints[a].y;r<n.min&&(n.min=r);r>n.max&&(n.max=r);i<t.min&&(t.min=i);i>t.max&&(t.max=i);if(0<a){var p=r-u.dataPoints[a-1].x;0>p&&(p*=-1);n.minDiff>p&&0!==p&&(n.minDiff=p)}if(!(r<c)||f){if(!f&&(f=!0,0<a)){a-=2;continue}if(r>h&&!l)l=!0;else if(r>h&&l)continue;u.dataPoints[a].label&&(e.axisX.labels[r]=u.dataPoints[a].label);r<n.viewPortMin&&(n.viewPortMin=r);r>n.viewPortMax&&(n.viewPortMax=r);null!==i&&(i<t.viewPortMin&&(t.viewPortMin=i),i>t.viewPortMax&&(t.viewPortMax=i))}}this.plotInfo.axisXValueType=u.xValueType=s?"dateTime":"number"}};b.prototype._processStackedPlotUnit=function(e){if(e.dataSeriesIndexes&&!(1>e.dataSeriesIndexes.length)){for(var t=e.axisY.dataInfo,n=e.axisX.dataInfo,r,i,s=!1,o=[],u=[],a=0;a<e.dataSeriesIndexes.length;a++){var f=this.data[e.dataSeriesIndexes[a]],l=0,c=!1,h=!1;if("normal"===f.axisPlacement||"xySwapped"===f.axisPlacement)var p=this.sessionVariables.axisX.internalMinimum?this.sessionVariables.axisX.internalMinimum:this._options.axisX&&this._options.axisX.minimum?this._options.axisX.minimum:-Infinity,d=this.sessionVariables.axisX.internalMaximum?this.sessionVariables.axisX.internalMaximum:this._options.axisX&&this._options.axisX.maximum?this._options.axisX.maximum:Infinity;if(f.dataPoints[l].x&&f.dataPoints[l].x.getTime||"dateTime"===f.xValueType)s=!0;for(l=0;l<f.dataPoints.length;l++){"undefined"===typeof f.dataPoints[l].x&&(f.dataPoints[l].x=l);f.dataPoints[l].x.getTime?(s=!0,r=f.dataPoints[l].x.getTime()):r=f.dataPoints[l].x;i=f.dataPoints[l].y;r<n.min&&(n.min=r);r>n.max&&(n.max=r);if(0<l){var v=r-f.dataPoints[l-1].x;0>v&&(v*=-1);n.minDiff>v&&0!==v&&(n.minDiff=v)}if(!(r<p)||c){if(!c&&(c=!0,0<l)){l-=2;continue}if(r>d&&!h)h=!0;else if(r>d&&h)continue;f.dataPoints[l].label&&(e.axisX.labels[r]=f.dataPoints[l].label);r<n.viewPortMin&&(n.viewPortMin=r);r>n.viewPortMax&&(n.viewPortMax=r);null!==i&&(0<=i?o[r]=o[r]?o[r]+i:i:u[r]=u[r]?u[r]+i:i)}}this.plotInfo.axisXValueType=f.xValueType=s?"dateTime":"number"}for(l in o)isNaN(l)||(e=o[l],e<t.min&&(t.min=e),e>t.max&&(t.max=e),l<n.viewPortMin||l>n.viewPortMax||(e<t.viewPortMin&&(t.viewPortMin=e),e>t.viewPortMax&&(t.viewPortMax=e)));for(l in u)isNaN(l)||(e=u[l],e<t.min&&(t.min=e),e>t.max&&(t.max=e),l<n.viewPortMin||l>n.viewPortMax||(e<t.viewPortMin&&(t.viewPortMin=e),e>t.viewPortMax&&(t.viewPortMax=e)))}};b.prototype._processStacked100PlotUnit=function(e){if(e.dataSeriesIndexes&&!(1>e.dataSeriesIndexes.length)){for(var t=e.axisY.dataInfo,n=e.axisX.dataInfo,r,i,s=!1,o=!1,u=!1,a=[],f=0;f<e.dataSeriesIndexes.length;f++){var l=this.data[e.dataSeriesIndexes[f]],c=0,h=!1,p=!1;if("normal"===l.axisPlacement||"xySwapped"===l.axisPlacement)var d=this.sessionVariables.axisX.internalMinimum?this.sessionVariables.axisX.internalMinimum:this._options.axisX&&this._options.axisX.minimum?this._options.axisX.minimum:-Infinity,v=this.sessionVariables.axisX.internalMaximum?this.sessionVariables.axisX.internalMaximum:this._options.axisX&&this._options.axisX.maximum?this._options.axisX.maximum:Infinity;if(l.dataPoints[c].x&&l.dataPoints[c].x.getTime||"dateTime"===l.xValueType)s=!0;for(c=0;c<l.dataPoints.length;c++){"undefined"===typeof l.dataPoints[c].x&&(l.dataPoints[c].x=c);l.dataPoints[c].x.getTime?(s=!0,r=l.dataPoints[c].x.getTime()):r=l.dataPoints[c].x;i=l.dataPoints[c].y;r<n.min&&(n.min=r);r>n.max&&(n.max=r);if(0<c){var m=r-l.dataPoints[c-1].x;0>m&&(m*=-1);n.minDiff>m&&0!==m&&(n.minDiff=m)}if(!(r<d)||h){if(!h&&(h=!0,0<c)){c-=2;continue}if(r>v&&!p)p=!0;else if(r>v&&p)continue;l.dataPoints[c].label&&(e.axisX.labels[r]=l.dataPoints[c].label);r<n.viewPortMin&&(n.viewPortMin=r);r>n.viewPortMax&&(n.viewPortMax=r);null!==i&&(0<=i?o=!0:u=!0,a[r]=a[r]?a[r]+Math.abs(i):Math.abs(i))}}this.plotInfo.axisXValueType=l.xValueType=s?"dateTime":"number"}o&&!u?(t.max=99,t.min=1):o&&u?(t.max=99,t.min=-99):!o&&u&&(t.max=-1,t.min=-99);t.viewPortMin=t.min;t.viewPortMax=t.max;e.dataPointYSums=a}};b.prototype.getDataPointAtXY=function(e,t,n){n=n||!1;for(var r=[],i=this._dataInRenderedOrder.length-1;0<=i;i--){var s=null;(s=this._dataInRenderedOrder[i].getDataPointAtXY(e,t,n))&&r.push(s)}e=null;t=!1;for(n=0;n<r.length;n++)if("line"===r[n].dataSeries.type||"stepLine"===r[n].dataSeries.type||"area"===r[n].dataSeries.type||"stepArea"===r[n].dataSeries.type)if(i=v("markerSize",r[n].dataPoint,r[n].dataSeries)||8,r[n].distance<=i/2){t=!0;break}for(n=0;n<r.length;n++)t&&"line"!==r[n].dataSeries.type&&"stepLine"!==r[n].dataSeries.type&&"area"!==r[n].dataSeries.type&&"stepArea"!==r[n].dataSeries.type||(e?r[n].distance<=e.distance&&(e=r[n]):e=r[n]);return e};b.prototype.getObjectAtXY=function(e,t,n){var r=null;if(n=this.getDataPointAtXY(e,t,n||!1))r=n.dataSeries.dataPointIds[n.dataPointIndex];else if(_)r=p(e,t,this._eventManager.ghostCtx);else for(n=0;n<this.legend.items.length;n++){var i=this.legend.items[n];e>=i.x1&&e<=i.x2&&t>=i.y1&&t<=i.y2&&(r=i.id)}return r};b.prototype.getAutoFontSize=function(e,t,n){e/=400;return Math.round(Math.min(this.width,this.height)*e)};b.prototype.resetOverlayedCanvas=function(){this.overlaidCanvasCtx.clearRect(0,0,this.width,this.height)};b.prototype.attachEvent=function(e){this._events.push(e)};b.prototype._touchEventHandler=function(e){if(e.changedTouches&&this.interactivityEnabled){var t=[],n=e.changedTouches,r=n?n[0]:e,i=null;switch(e.type){case"touchstart":case"MSPointerDown":t=["mousemove","mousedown"];this._lastTouchData=U(r);this._lastTouchData.time=new Date;break;case"touchmove":case"MSPointerMove":t=["mousemove"];break;case"touchend":case"MSPointerUp":t="touchstart"===this._lastTouchEventType||"MSPointerDown"===this._lastTouchEventType?["mouseup","click"]:["mouseup"];break;default:return}if(!(n&&1<n.length)){i=U(r);i.time=new Date;try{var s=i.y-this._lastTouchData.y,o=i.time-this._lastTouchData.time;if(15<Math.abs(s)&&(this._lastTouchData.scroll||200>o)){this._lastTouchData.scroll=!0;var u=window.parent||window;u&&u.scrollBy&&u.scrollBy(0,-s)}}catch(a){}this._lastTouchEventType=e.type;if(this._lastTouchData.scroll&&this.zoomEnabled)this.isDrag&&this.resetOverlayedCanvas(),this.isDrag=!1;else for(n=0;n<t.length;n++)i=t[n],s=document.createEvent("MouseEvent"),s.initMouseEvent(i,!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),r.target.dispatchEvent(s),e.preventManipulation&&e.preventManipulation(),e.preventDefault&&e.preventDefault()}}};b.prototype._mouseEventHandler=function(e){if(this.interactivityEnabled){e.preventManipulation&&e.preventManipulation();e.preventDefault&&e.preventDefault();"undefined"===typeof e.target&&e.srcElement&&(e.target=e.srcElement);var t=U(e),n=e.type,r,i;e.which?i=3==e.which:e.button&&(i=2==e.button);if(!i){if(b.capturedEventParam)r=b.capturedEventParam,"mouseup"===n&&(b.capturedEventParam=null,r.chart.overlaidCanvas.releaseCapture?r.chart.overlaidCanvas.releaseCapture():document.body.removeEventListener("mouseup",r.chart._mouseEventHandler,!1)),r.hasOwnProperty(n)&&r[n].call(r.context,t.x,t.y);else if(this._events){for(i=0;i<this._events.length;i++)if(this._events[i].hasOwnProperty(n)){r=this._events[i];var s=r.bounds;if(t.x>=s.x1&&t.x<=s.x2&&t.y>=s.y1&&t.y<=s.y2){r[n].call(r.context,t.x,t.y);"mousedown"===n&&!0===r.capture?(b.capturedEventParam=r,this.overlaidCanvas.setCapture?this.overlaidCanvas.setCapture():document.body.addEventListener("mouseup",this._mouseEventHandler,!1)):"mouseup"===n&&(r.chart.overlaidCanvas.releaseCapture?r.chart.overlaidCanvas.releaseCapture():document.body.removeEventListener("mouseup",this._mouseEventHandler,!1));break}else r=null}e.target.style.cursor=r&&r.cursor?r.cursor:this._defaultCursor}this._toolTip&&this._toolTip.enabled&&(n=this.plotArea,(t.x<n.x1||t.x>n.x2||t.y<n.y1||t.y>n.y2)&&this._toolTip.hide());this.isDrag&&this.zoomEnabled||!this._eventManager||this._eventManager.mouseEventHandler(e)}}};b.prototype._plotAreaMouseDown=function(e,t){this.isDrag=!0;this.dragStartPoint="none"!==this.plotInfo.axisPlacement?{x:e,y:t,xMinimum:this.axisX.minimum,xMaximum:this.axisX.maximum}:{x:e,y:t}};b.prototype._plotAreaMouseUp=function(e,t){var n,r;if(("normal"===this.plotInfo.axisPlacement||"xySwapped"===this.plotInfo.axisPlacement)&&this.isDrag){var i=0,i=this.axisX.lineCoordinates,i="xySwapped"===this.plotInfo.axisPlacement?t-this.dragStartPoint.y:this.dragStartPoint.x-e;Math.abs(this.axisX.maximum-this.axisX.minimum);if(2<Math.abs(i)){if(this.panEnabled)i=!1,r=0,this.axisX.sessionVariables.internalMinimum<this.axisX._absoluteMinimum?(r=this.axisX._absoluteMinimum-this.axisX.sessionVariables.internalMinimum,this.axisX.sessionVariables.internalMinimum+=r,this.axisX.sessionVariables.internalMaximum+=r,i=!0):this.axisX.sessionVariables.internalMaximum>this.axisX._absoluteMaximum&&(r=this.axisX.sessionVariables.internalMaximum-this.axisX._absoluteMaximum,this.axisX.sessionVariables.internalMaximum-=r,this.axisX.sessionVariables.internalMinimum-=r,i=!0),i&&this.render();else if(this.zoomEnabled){this.resetOverlayedCanvas();if(!this.dragStartPoint)return;"xySwapped"===this.plotInfo.axisPlacement?(n=Math.min(this.dragStartPoint.y,t),r=Math.max(this.dragStartPoint.y,t),1<Math.abs(n-r)&&(i=this.axisX.lineCoordinates,r=this.axisX.maximum-(this.axisX.maximum-this.axisX.minimum)/i.height*(r-i.y1),i=this.axisX.maximum-(this.axisX.maximum-this.axisX.minimum)/i.height*(n-i.y1),r=Math.max(r,this.axisX.dataInfo.min),i=Math.min(i,this.axisX.dataInfo.max),Math.abs((i-r)/this.axisX.dataInfo.minDiff)>=.008*this.height&&(this.axisX.sessionVariables.internalMinimum=r,this.axisX.sessionVariables.internalMaximum=i,this.render()))):"normal"===this.plotInfo.axisPlacement&&(r=Math.min(this.dragStartPoint.x,e),n=Math.max(this.dragStartPoint.x,e),1<Math.abs(r-n)&&(i=this.axisX.lineCoordinates,r=(this.axisX.maximum-this.axisX.minimum)/i.width*(r-i.x1)+this.axisX.minimum,i=(this.axisX.maximum-this.axisX.minimum)/i.width*(n-i.x1)+this.axisX.minimum,r=Math.max(r,this.axisX.dataInfo.min),i=Math.min(i,this.axisX.dataInfo.max),Math.abs((i-r)/this.axisX.dataInfo.minDiff)>=.01*this.width&&(this.axisX.sessionVariables.internalMinimum=r,this.axisX.sessionVariables.internalMaximum=i,this.render())))}this.zoomEnabled&&"none"===this._toolBar.style.display&&(this._toolBar.style.display="inline",this._zoomButton.innerHTML=this._cultureInfo.panText,this._resetButton.innerHTML=this._cultureInfo.resetText)}}this.isDrag=!1};b.prototype._plotAreaMouseMove=function(e,t){if(this.isDrag&&"none"!==this.plotInfo.axisPlacement){var n=0,i=0,i=this.axisX.lineCoordinates;"xySwapped"===this.plotInfo.axisPlacement?(n=t-this.dragStartPoint.y,i=Math.abs(this.axisX.maximum-this.axisX.minimum)/i.height*n):(n=this.dragStartPoint.x-e,i=Math.abs(this.axisX.maximum-this.axisX.minimum)/i.width*n);2<Math.abs(n)&&8>Math.abs(n)&&(this.panEnabled||this.zoomEnabled)?this._toolTip.hide():!this._toolTip.enabled||this.panEnabled||this.zoomEnabled||this._toolTip.mouseMoveHandler(e,t);if(2<Math.abs(n)&&(this.panEnabled||this.zoomEnabled))if(this.panEnabled){this.axisX.sessionVariables.internalMinimum=this.dragStartPoint.xMinimum+i;this.axisX.sessionVariables.internalMaximum=this.dragStartPoint.xMaximum+i;n=0;this.axisX.sessionVariables.internalMinimum<this.axisX._absoluteMinimum-r(this.axisX.interval,this.axisX.intervalType)?(n=this.axisX._absoluteMinimum-r(this.axisX.interval,this.axisX.intervalType)-this.axisX.sessionVariables.internalMinimum,this.axisX.sessionVariables.internalMinimum+=n,this.axisX.sessionVariables.internalMaximum+=n):this.axisX.sessionVariables.internalMaximum>this.axisX._absoluteMaximum+r(this.axisX.interval,this.axisX.intervalType)&&(n=this.axisX.sessionVariables.internalMaximum-(this.axisX._absoluteMaximum+r(this.axisX.interval,this.axisX.intervalType)),this.axisX.sessionVariables.internalMaximum-=n,this.axisX.sessionVariables.internalMinimum-=n);var s=this;clearTimeout(this._panTimerId);this._panTimerId=setTimeout(function(){s.render()},0)}else this.zoomEnabled&&(n=this.plotArea,this.resetOverlayedCanvas(),i=this.overlaidCanvasCtx.globalAlpha,this.overlaidCanvasCtx.globalAlpha=.7,this.overlaidCanvasCtx.fillStyle="#A0ABB8","xySwapped"===this.plotInfo.axisPlacement?this.overlaidCanvasCtx.fillRect(n.x1,this.dragStartPoint.y,n.x2-n.x1,t-this.dragStartPoint.y):"normal"===this.plotInfo.axisPlacement&&this.overlaidCanvasCtx.fillRect(this.dragStartPoint.x,n.y1,e-this.dragStartPoint.x,n.y2-n.y1),this.overlaidCanvasCtx.globalAlpha=i)}else this._toolTip.enabled&&this._toolTip.mouseMoveHandler(e,t)};b.prototype.preparePlotArea=function(){var e=this.plotArea,t=this.axisY?this.axisY:this.axisY2;!_&&(0<e.x1||0<e.y1)&&e.ctx.translate(e.x1,e.y1);this.axisX&&t?(e.x1=this.axisX.lineCoordinates.x1<this.axisX.lineCoordinates.x2?this.axisX.lineCoordinates.x1:t.lineCoordinates.x1,e.y1=this.axisX.lineCoordinates.y1<t.lineCoordinates.y1?this.axisX.lineCoordinates.y1:t.lineCoordinates.y1,e.x2=this.axisX.lineCoordinates.x2>t.lineCoordinates.x2?this.axisX.lineCoordinates.x2:t.lineCoordinates.x2,e.y2=this.axisX.lineCoordinates.y2>this.axisX.lineCoordinates.y1?this.axisX.lineCoordinates.y2:t.lineCoordinates.y2,e.width=e.x2-e.x1,e.height=e.y2-e.y1):(t=this.layoutManager.getFreeSpace(),e.x1=t.x1,e.x2=t.x2,e.y1=t.y1,e.y2=t.y2,e.width=t.width,e.height=t.height);_||(e.canvas.width=e.width,e.canvas.height=e.height,e.canvas.style.left=e.x1+"px",e.canvas.style.top=e.y1+"px",(0<e.x1||0<e.y1)&&e.ctx.translate(-e.x1,-e.y1))};b.prototype.getPixelCoordinatesOnPlotArea=function(e,t){return{x:this.axisX.getPixelCoordinatesOnAxis(e).x,y:this.axisY.getPixelCoordinatesOnAxis(t).y}};b.prototype.renderIndexLabels=function(){var e=this.plotArea.ctx;e.textBaseline="middle";for(var t=this.plotArea,n=0;n<this._indexLabels.length;n++){var r=this._indexLabels[n],i,s,o;e.fillStyle=v("indexLabelFontColor",r.dataPoint,r.dataSeries);e.font=d("indexLabel",r.dataPoint,r.dataSeries);var u=this.replaceKeywordsWithValue(v("indexLabel",r.dataPoint,r.dataSeries),r.dataPoint,r.dataSeries),a=e.measureText(u).width,f=v("indexLabelFontSize",r.dataPoint,r.dataSeries),l=v("indexLabelPlacement",r.dataPoint,r.dataSeries),c=v("indexLabelOrientation",r.dataPoint,r.dataSeries),h=o=0,p=0,m=0,g=0;r.point.x<t.x1||r.point.x>t.x2||r.point.y<t.y1||r.point.y>t.y2||("column"===r.chartType||"stackedColumn"===r.chartType||"stackedColumn100"===r.chartType||"bar"===r.chartType||"stackedBar"===r.chartType||"stackedBar100"===r.chartType?(Math.abs(r.bounds.x1,r.bounds.x2),Math.abs(r.bounds.y1,r.bounds.y2),"normal"===this.plotInfo.axisPlacement?("outside"===l?(h=t.y1,p=t.y2):"inside"===l&&(h=r.bounds.y1,p=r.bounds.y2),"horizontal"===c?(i=r.point.x-a/2,s=0<=r.dataPoint.y?Math.min(Math.max(r.point.y-f/2-5,h+f/2+5),p-f/2-5):Math.max(Math.min(r.point.y+f/2+5,p-f/2),h+f/2+5)):"vertical"===c&&(i=r.point.x,s=0<=r.dataPoint.y?Math.min(Math.max(r.point.y-5,h+a+5),p):Math.max(Math.min(r.point.y+a+5,p-5),h),o=-90)):"xySwapped"===this.plotInfo.axisPlacement&&("outside"===l?(m=t.x1,g=t.x2):"inside"===l&&(m=r.bounds.x1,g=r.bounds.x2),"horizontal"===c?(s=r.point.y,i=0<=r.dataPoint.y?Math.max(Math.min(r.point.x+5,g-a),m):Math.min(Math.max(r.point.x-a-5,m),g)):"vertical"===c&&(s=r.point.y+a/2,i=0<=r.dataPoint.y?Math.max(Math.min(r.point.x+f/2+5,g-f/2),m):Math.min(Math.max(r.point.x-f/2-5,m+f/2),g+f/2),o=-90))):"horizontal"===c?(i=r.point.x-a/2,s=0<=r.dataPoint.y?Math.max(r.point.y-f/2-5,t.y1+f/2):Math.min(r.point.y+f/2+5,t.y2-f/2)):"vertical"===c&&(i=r.point.x,s=0<=r.dataPoint.y?Math.max(r.point.y-5,t.y1+a):Math.min(r.point.y+a+5,t.y2),o=-90),e.save(),e.translate(i,s),e.rotate(Math.PI/180*o),e.fillText(u,0,0),e.restore())}};b.prototype.renderLine=function(e){var t=this.plotArea.ctx;if(!(0>=e.dataSeriesIndexes.length)){var n=this._eventManager.ghostCtx;t.save();var r=this.plotArea;t.beginPath();t.rect(r.x1,r.y1,r.width,r.height);t.clip();for(var r=[],i=0;i<e.dataSeriesIndexes.length;i++){var s=e.dataSeriesIndexes[i],o=this.data[s];t.lineWidth=o.lineThickness;var u=o.dataPoints,a=o.id;this._eventManager.objectMap[a]={objectType:"dataSeries",dataSeriesIndex:s};a=l(a);n.strokeStyle=a;n.lineWidth=0<o.lineThickness?Math.max(o.lineThickness,4):0;a=o._colorSet[0];t.strokeStyle=a;var f=!0,c=0,h,p;t.beginPath();if(0<u.length){for(var d=!1,c=0;c<u.length;c++)if(h=u[c].x.getTime?u[c].x.getTime():u[c].x,!(h<e.axisX.dataInfo.viewPortMin||h>e.axisX.dataInfo.viewPortMax))if("number"!==typeof u[c].y)0<c&&(t.stroke(),_&&n.stroke()),d=!0;else{h=e.axisX.conversionParameters.reference+e.axisX.conversionParameters.pixelPerUnit*(h-e.axisX.conversionParameters.minimum)+.5<<0;p=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(u[c].y-e.axisY.conversionParameters.minimum)+.5<<0;var v=o.dataPointIds[c];this._eventManager.objectMap[v]={id:v,objectType:"dataPoint",dataSeriesIndex:s,dataPointIndex:c,x1:h,y1:p};f||d?(t.beginPath(),t.moveTo(h,p),_&&(n.beginPath(),n.moveTo(h,p)),d=f=!1):(t.lineTo(h,p),_&&n.lineTo(h,p),0==c%500&&(t.stroke(),t.beginPath(),t.moveTo(h,p),_&&(n.stroke(),n.beginPath(),n.moveTo(h,p))));if(0<u[c].markerSize||0<o.markerSize){var m=o.getMarkerProperties(c,h,p,t);r.push(m);if(!o.maxWidthInX||m.size>o.maxWidthInX)o.maxWidthInX=m.size/(1<e.axisX.conversionParameters.pixelPerUnit?e.axisX.conversionParameters.pixelPerUnit-1:e.axisX.conversionParameters.pixelPerUnit);v=l(v);_&&r.push({x:h,y:p,ctx:n,type:m.type,size:m.size,color:v,borderColor:v,borderThickness:m.borderThickness})}(u[c].indexLabel||o.indexLabel)&&this._indexLabels.push({chartType:"line",dataPoint:u[c],dataSeries:o,point:{x:h,y:p},color:a})}t.stroke();_&&n.stroke()}}K.drawMarkers(r);t.restore();t.beginPath();_&&n.beginPath()}};b.prototype.renderStepLine=function(e){var t=this.plotArea.ctx;if(!(0>=e.dataSeriesIndexes.length)){var n=this._eventManager.ghostCtx;t.save();var r=this.plotArea;t.beginPath();t.rect(r.x1,r.y1,r.width,r.height);t.clip();for(var r=[],i=0;i<e.dataSeriesIndexes.length;i++){var s=e.dataSeriesIndexes[i],o=this.data[s];t.lineWidth=o.lineThickness;var u=o.dataPoints,a=o.id;this._eventManager.objectMap[a]={objectType:"dataSeries",dataSeriesIndex:s};a=l(a);n.strokeStyle=a;n.lineWidth=0<o.lineThickness?Math.max(o.lineThickness,4):0;a=o._colorSet[0];t.strokeStyle=a;var f=!0,c=0,h,p;t.beginPath();if(0<u.length){for(var d=!1,c=0;c<u.length;c++)if(h=u[c].getTime?u[c].x.getTime():u[c].x,!(h<e.axisX.dataInfo.viewPortMin||h>e.axisX.dataInfo.viewPortMax))if("number"!==typeof u[c].y)0<c&&(t.stroke(),_&&n.stroke()),d=!0;else{var v=p;h=e.axisX.conversionParameters.reference+e.axisX.conversionParameters.pixelPerUnit*(h-e.axisX.conversionParameters.minimum)+.5<<0;p=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(u[c].y-e.axisY.conversionParameters.minimum)+.5<<0;var m=o.dataPointIds[c];this._eventManager.objectMap[m]={id:m,objectType:"dataPoint",dataSeriesIndex:s,dataPointIndex:c,x1:h,y1:p};f||d?(t.beginPath(),t.moveTo(h,p),_&&(n.beginPath(),n.moveTo(h,p)),d=f=!1):(t.lineTo(h,v),_&&n.lineTo(h,v),t.lineTo(h,p),_&&n.lineTo(h,p),0==c%500&&(t.stroke(),t.beginPath(),t.moveTo(h,p),_&&(n.stroke(),n.beginPath(),n.moveTo(h,p))));if(0<u[c].markerSize||0<o.markerSize){v=o.getMarkerProperties(c,h,p,t);r.push(v);if(!o.maxWidthInX||v.size>o.maxWidthInX)o.maxWidthInX=v.size/(1<e.axisX.conversionParameters.pixelPerUnit?e.axisX.conversionParameters.pixelPerUnit-1:e.axisX.conversionParameters.pixelPerUnit);m=l(m);_&&r.push({x:h,y:p,ctx:n,type:v.type,size:v.size,color:m,borderColor:m,borderThickness:v.borderThickness})}(u[c].indexLabel||o.indexLabel)&&this._indexLabels.push({chartType:"stepLine",dataPoint:u[c],dataSeries:o,point:{x:h,y:p},color:a})}t.stroke();_&&n.stroke()}}K.drawMarkers(r);t.restore();t.beginPath();_&&n.beginPath()}};b.prototype.renderSpline=function(e){function t(e){e=w(e,2);if(0<e.length){n.beginPath();_&&r.beginPath();n.moveTo(e[0].x,e[0].y);_&&r.moveTo(e[0].x,e[0].y);for(var t=0;t<e.length-3;t+=3)n.bezierCurveTo(e[t+1].x,e[t+1].y,e[t+2].x,e[t+2].y,e[t+3].x,e[t+3].y),_&&r.bezierCurveTo(e[t+1].x,e[t+1].y,e[t+2].x,e[t+2].y,e[t+3].x,e[t+3].y),0<t&&0===t%3e3&&(n.stroke(),n.beginPath(),n.moveTo(e[t+3].x,e[t+3].y),_&&(r.stroke(),r.beginPath(),r.moveTo(e[t+3].x,e[t+3].y)));n.stroke();_&&r.stroke()}}var n=this.plotArea.ctx;if(!(0>=e.dataSeriesIndexes.length)){var r=this._eventManager.ghostCtx;n.save();var i=this.plotArea;n.beginPath();n.rect(i.x1,i.y1,i.width,i.height);n.clip();for(var i=[],s=0;s<e.dataSeriesIndexes.length;s++){var o=e.dataSeriesIndexes[s],u=this.data[o];n.lineWidth=u.lineThickness;var a=u.dataPoints,f=u.id;this._eventManager.objectMap[f]={objectType:"dataSeries",dataSeriesIndex:o};f=l(f);r.strokeStyle=f;r.lineWidth=0<u.lineThickness?Math.max(u.lineThickness,4):0;f=u._colorSet[0];n.strokeStyle=f;var c=0,h,p,d=[];n.beginPath();if(0<a.length)for(c=0;c<a.length;c++)if(h=a[c].getTime?a[c].x.getTime():a[c].x,!(h<e.axisX.dataInfo.viewPortMin||h>e.axisX.dataInfo.viewPortMax))if("number"!==typeof a[c].y)0<c&&(t(d),d=[]);else{h=e.axisX.conversionParameters.reference+e.axisX.conversionParameters.pixelPerUnit*(h-e.axisX.conversionParameters.minimum)+.5<<0;p=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(a[c].y-e.axisY.conversionParameters.minimum)+.5<<0;var v=u.dataPointIds[c];this._eventManager.objectMap[v]={id:v,objectType:"dataPoint",dataSeriesIndex:o,dataPointIndex:c,x1:h,y1:p};d[d.length]={x:h,y:p};if(0<a[c].markerSize||0<u.markerSize){var m=u.getMarkerProperties(c,h,p,n);i.push(m);if(!u.maxWidthInX||m.size>u.maxWidthInX)u.maxWidthInX=m.size/(1<e.axisX.conversionParameters.pixelPerUnit?e.axisX.conversionParameters.pixelPerUnit-1:e.axisX.conversionParameters.pixelPerUnit);v=l(v);_&&i.push({x:h,y:p,ctx:r,type:m.type,size:m.size,color:v,borderColor:v,borderThickness:m.borderThickness})}(a[c].indexLabel||u.indexLabel)&&this._indexLabels.push({chartType:"spline",dataPoint:a[c],dataSeries:u,point:{x:h,y:p},color:f})}t(d)}K.drawMarkers(i);n.restore();n.beginPath();_&&r.beginPath()}};var $=function(e,t,n,r,i,s,o,u,a,f){var l=15<r-t&&15<i-n?8:.35*Math.min(r-t,i-n);e.beginPath();e.moveTo(t,n);e.save();e.fillStyle=s;e.fillRect(t,n,r-t,i-n);e.restore();!0===o&&(e.save(),e.beginPath(),e.moveTo(t,n),e.lineTo(t+l,n+l),e.lineTo(r-l,n+l),e.lineTo(r,n),e.closePath(),o=e.createLinearGradient((r+t)/2,n+l,(r+t)/2,n),o.addColorStop(0,s),o.addColorStop(1,"rgba(255, 255, 255, .4)"),e.fillStyle=o,e.fill(),e.restore());!0===u&&(e.save(),e.beginPath(),e.moveTo(t,i),e.lineTo(t+l,i-l),e.lineTo(r-l,i-l),e.lineTo(r,i),e.closePath(),o=e.createLinearGradient((r+t)/2,i-l,(r+t)/2,i),o.addColorStop(0,s),o.addColorStop(1,"rgba(255, 255, 255, .4)"),e.fillStyle=o,e.fill(),e.restore());!0===a&&(e.save(),e.beginPath(),e.moveTo(t,n),e.lineTo(t+l,n+l),e.lineTo(t+l,i-l),e.lineTo(t,i),e.closePath(),o=e.createLinearGradient(t+l,(i+n)/2,t,(i+n)/2),o.addColorStop(0,s),o.addColorStop(1,"rgba(255, 255, 255, 0.1)"),e.fillStyle=o,e.fill(),e.restore());!0===f&&(e.save(),e.beginPath(),e.moveTo(r,n),e.lineTo(r-l,n+l),e.lineTo(r-l,i-l),e.lineTo(r,i),o=e.createLinearGradient(r-l,(i+n)/2,r,(i+n)/2),o.addColorStop(0,s),o.addColorStop(1,"rgba(255, 255, 255, 0.1)"),e.fillStyle=o,o.addColorStop(0,s),o.addColorStop(1,"rgba(255, 255, 255, 0.1)"),e.fillStyle=o,e.fill(),e.closePath(),e.restore())};b.prototype.renderColumn=function(e){var t=this.plotArea.ctx;if(!(0>=e.dataSeriesIndexes.length)){var n=null,r=this.plotArea,i=0,s,o,u,a=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(0-e.axisY.conversionParameters.minimum)<<0,i=Math.min(.15*this.width,.9*(this.plotArea.width/e.plotType.totalDataSeries))<<0,f=e.axisX.dataInfo.minDiff,c=.9*(r.width/Math.abs(e.axisX.maximum-e.axisX.minimum)*Math.abs(f)/e.plotType.totalDataSeries)<<0;c>i?c=i:Infinity===f?c=i:1>c&&(c=1);t.save();_&&this._eventManager.ghostCtx.save();t.beginPath();t.rect(r.x1,r.y1,r.width,r.height);t.clip();_&&(this._eventManager.ghostCtx.rect(r.x1,r.y1,r.width,r.height),this._eventManager.ghostCtx.clip());for(r=0;r<e.dataSeriesIndexes.length;r++){var f=e.dataSeriesIndexes[r],h=this.data[f],p=h.dataPoints;h.maxWidthInX=c/(1<e.axisX.conversionParameters.pixelPerUnit?e.axisX.conversionParameters.pixelPerUnit-1:e.axisX.conversionParameters.pixelPerUnit);if(0<p.length)for(var d=5<c&&h.bevelEnabled?!0:!1,i=0;i<p.length;i++)if(p[i].getTime?u=p[i].x.getTime():u=p[i].x,!(u<e.axisX.dataInfo.viewPortMin||u>e.axisX.dataInfo.viewPortMax)&&"number"===typeof p[i].y){s=e.axisX.conversionParameters.reference+e.axisX.conversionParameters.pixelPerUnit*(u-e.axisX.conversionParameters.minimum)+.5<<0;o=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(p[i].y-e.axisY.conversionParameters.minimum)+.5<<0;s=s-e.plotType.totalDataSeries*c/2+(e.previousDataSeriesCount+r)*c<<0;var v=s+c<<0,m;0<=p[i].y?m=a:(m=o,o=a);o>m&&(m=o=m);n=p[i].color?p[i].color:h._colorSet[i%h._colorSet.length];$(t,s,o,v,m,n,d&&0<=p[i].y,0>p[i].y&&d,!1,!1);n=h.dataPointIds[i];this._eventManager.objectMap[n]={id:n,objectType:"dataPoint",dataSeriesIndex:f,dataPointIndex:i,x1:s,y1:o,x2:v,y2:m};n=l(n);_&&$(this._eventManager.ghostCtx,s,o,v,m,n,!1,!1,!1,!1);(p[i].indexLabel||h.indexLabel)&&this._indexLabels.push({chartType:"column",dataPoint:p[i],dataSeries:h,point:{x:s+(v-s)/2,y:0<=p[i].y?o:m},bounds:{x1:s,y1:Math.min(o,m),x2:v,y2:Math.max(o,m)},color:n})}}t.restore();_&&this._eventManager.ghostCtx.restore()}};b.prototype.renderStackedColumn=function(e){var t=this.plotArea.ctx;if(!(0>=e.dataSeriesIndexes.length)){var n=null,r=this.plotArea,i=[],s=[],o=0,u,a=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(0-e.axisY.conversionParameters.minimum)<<0,o=.15*this.width<<0,f=e.axisX.dataInfo.minDiff,c=.9*(r.width/Math.abs(e.axisX.maximum-e.axisX.minimum)*Math.abs(f)/e.plotType.plotUnits.length)<<0;c>o?c=o:Infinity===f?c=o:1>c&&(c=1);t.save();_&&this._eventManager.ghostCtx.save();t.beginPath();t.rect(r.x1,r.y1,r.width,r.height);t.clip();_&&(this._eventManager.ghostCtx.rect(r.x1,r.y1,r.width,r.height),this._eventManager.ghostCtx.clip());for(f=0;f<e.dataSeriesIndexes.length;f++){var h=e.dataSeriesIndexes[f],p=this.data[h],d=p.dataPoints;p.maxWidthInX=c/(1<e.axisX.conversionParameters.pixelPerUnit?e.axisX.conversionParameters.pixelPerUnit-1:e.axisX.conversionParameters.pixelPerUnit);if(0<d.length){var v=5<c&&p.bevelEnabled?!0:!1;t.strokeStyle="#4572A7 ";for(o=0;o<d.length;o++)if(n=d[o].x.getTime?d[o].x.getTime():d[o].x,!(n<e.axisX.dataInfo.viewPortMin||n>e.axisX.dataInfo.viewPortMax)&&"number"===typeof d[o].y){r=e.axisX.conversionParameters.reference+e.axisX.conversionParameters.pixelPerUnit*(n-e.axisX.conversionParameters.minimum)+.5<<0;u=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(d[o].y-e.axisY.conversionParameters.minimum)+.5<<0;var m=r-e.plotType.plotUnits.length*c/2+e.index*c<<0,g=m+c<<0,y;if(0<=d[o].y){var b=i[n]?i[n]:0;u-=b;y=a-b;i[n]=b+(y-u)}else b=s[n]?s[n]:0,y=u+b,u=a+b,s[n]=b+(y-u);n=d[o].color?d[o].color:p._colorSet[o%p._colorSet.length];$(t,m,u,g,y,n,v&&0<=d[o].y,0>d[o].y&&v,!1,!1);n=p.dataPointIds[o];this._eventManager.objectMap[n]={id:n,objectType:"dataPoint",dataSeriesIndex:h,dataPointIndex:o,x1:m,y1:u,x2:g,y2:y};n=l(n);_&&$(this._eventManager.ghostCtx,m,u,g,y,n,!1,!1,!1,!1);(d[o].indexLabel||p.indexLabel)&&this._indexLabels.push({chartType:"stackedColumn",dataPoint:d[o],dataSeries:p,point:{x:r,y:0<=d[o].y?u:y},bounds:{x1:m,y1:Math.min(u,y),x2:g,y2:Math.max(u,y)},color:n})}}}t.restore();_&&this._eventManager.ghostCtx.restore()}};b.prototype.renderStackedColumn100=function(e){var t=this.plotArea.ctx;if(!(0>=e.dataSeriesIndexes.length)){var n=null,r=this.plotArea,i=[],s=[],o=0,u,a=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(0-e.axisY.conversionParameters.minimum)<<0,o=.15*this.width<<0,f=e.axisX.dataInfo.minDiff,c=.9*(r.width/Math.abs(e.axisX.maximum-e.axisX.minimum)*Math.abs(f)/e.plotType.plotUnits.length)<<0;c>o?c=o:Infinity===f?c=o:1>c&&(c=1);t.save();_&&this._eventManager.ghostCtx.save();t.beginPath();t.rect(r.x1,r.y1,r.width,r.height);t.clip();_&&(this._eventManager.ghostCtx.rect(r.x1,r.y1,r.width,r.height),this._eventManager.ghostCtx.clip());for(f=0;f<e.dataSeriesIndexes.length;f++){var h=e.dataSeriesIndexes[f],p=this.data[h],d=p.dataPoints;p.maxWidthInX=c/(1<e.axisX.conversionParameters.pixelPerUnit?e.axisX.conversionParameters.pixelPerUnit-1:e.axisX.conversionParameters.pixelPerUnit);if(0<d.length)for(var v=5<c&&p.bevelEnabled?!0:!1,o=0;o<d.length;o++)if(n=d[o].x.getTime?d[o].x.getTime():d[o].x,!(n<e.axisX.dataInfo.viewPortMin||n>e.axisX.dataInfo.viewPortMax)&&"number"===typeof d[o].y){r=e.axisX.conversionParameters.reference+e.axisX.conversionParameters.pixelPerUnit*(n-e.axisX.conversionParameters.minimum)+.5<<0;u=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*((0!==e.dataPointYSums[n]?100*(d[o].y/e.dataPointYSums[n]):0)-e.axisY.conversionParameters.minimum)+.5<<0;var m=r-e.plotType.plotUnits.length*c/2+e.index*c<<0,g=m+c<<0,y;if(0<=d[o].y){var b=i[n]?i[n]:0;u-=b;y=a-b;i[n]=b+(y-u)}else b=s[n]?s[n]:0,y=u+b,u=a+b,s[n]=b+(y-u);n=d[o].color?d[o].color:p._colorSet[o%p._colorSet.length];$(t,m,u,g,y,n,v&&0<=d[o].y,0>d[o].y&&v,!1,!1);n=p.dataPointIds[o];this._eventManager.objectMap[n]={id:n,objectType:"dataPoint",dataSeriesIndex:h,dataPointIndex:o,x1:m,y1:u,x2:g,y2:y};n=l(n);_&&$(this._eventManager.ghostCtx,m,u,g,y,n,!1,!1,!1,!1);(d[o].indexLabel||p.indexLabel)&&this._indexLabels.push({chartType:"stackedColumn100",dataPoint:d[o],dataSeries:p,point:{x:r,y:0<=d[o].y?u:y},bounds:{x1:m,y1:Math.min(u,y),x2:g,y2:Math.max(u,y)},color:n})}}t.restore();_&&this._eventManager.ghostCtx.restore()}};b.prototype.renderBar=function(e){var t=this.plotArea.ctx;if(!(0>=e.dataSeriesIndexes.length)){var n=null,r=this.plotArea,i=0,s,o,u,a=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(0-e.axisY.conversionParameters.minimum)<<0,i=Math.min(.15*this.height,.9*(this.plotArea.height/e.plotType.totalDataSeries))<<0,f=e.axisX.dataInfo.minDiff,c=.9*(r.height/Math.abs(e.axisX.maximum-e.axisX.minimum)*Math.abs(f)/e.plotType.totalDataSeries)<<0;c>i?c=i:Infinity===f?c=i:1>c&&(c=1);t.save();_&&this._eventManager.ghostCtx.save();t.beginPath();t.rect(r.x1,r.y1,r.width,r.height);t.clip();_&&(this._eventManager.ghostCtx.rect(r.x1,r.y1,r.width,r.height),this._eventManager.ghostCtx.clip());for(r=0;r<e.dataSeriesIndexes.length;r++){var f=e.dataSeriesIndexes[r],h=this.data[f],p=h.dataPoints;h.maxWidthInX=c/(1<e.axisX.conversionParameters.pixelPerUnit?e.axisX.conversionParameters.pixelPerUnit-1:e.axisX.conversionParameters.pixelPerUnit);if(0<p.length){var d=5<c&&h.bevelEnabled?!0:!1;t.strokeStyle="#4572A7 ";for(i=0;i<p.length;i++)if(p[i].getTime?u=p[i].x.getTime():u=p[i].x,!(u<e.axisX.dataInfo.viewPortMin||u>e.axisX.dataInfo.viewPortMax)&&"number"===typeof p[i].y){o=e.axisX.conversionParameters.reference+e.axisX.conversionParameters.pixelPerUnit*(u-e.axisX.conversionParameters.minimum)+.5<<0;s=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(p[i].y-e.axisY.conversionParameters.minimum)+.5<<0;o=o-e.plotType.totalDataSeries*c/2+(e.previousDataSeriesCount+r)*c<<0;var v=o+c<<0,m;0<=p[i].y?m=a:(m=s,s=a);n=p[i].color?p[i].color:h._colorSet[i%h._colorSet.length];$(t,m,o,s,v,n,d,!1,!1,!1);n=h.dataPointIds[i];this._eventManager.objectMap[n]={id:n,objectType:"dataPoint",dataSeriesIndex:f,dataPointIndex:i,x1:m,y1:o,x2:s,y2:v};n=l(n);_&&$(this._eventManager.ghostCtx,m,o,s,v,n,!1,!1,!1,!1);this._indexLabels.push({chartType:"bar",dataPoint:p[i],dataSeries:h,point:{x:0<=p[i].y?s:m,y:o+(v-o)/2},bounds:{x1:Math.min(m,s),y1:o,x2:Math.max(m,s),y2:v},color:n})}}}t.restore();_&&this._eventManager.ghostCtx.restore()}};b.prototype.renderStackedBar=function(e){var t=this.plotArea.ctx;if(!(0>=e.dataSeriesIndexes.length)){var n=null,r=this.plotArea,i=[],s=[],o=0,u,a=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(0-e.axisY.conversionParameters.minimum)<<0,o=.15*this.width<<0,f=e.axisX.dataInfo.minDiff,c=.9*(r.height/Math.abs(e.axisX.maximum-e.axisX.minimum)*Math.abs(f)/e.plotType.plotUnits.length)<<0;c>o?c=o:Infinity===f?c=o:1>c&&(c=1);t.save();_&&this._eventManager.ghostCtx.save();t.beginPath();t.rect(r.x1,r.y1,r.width,r.height);t.clip();_&&(this._eventManager.ghostCtx.rect(r.x1,r.y1,r.width,r.height),this._eventManager.ghostCtx.clip());for(f=0;f<e.dataSeriesIndexes.length;f++){var h=e.dataSeriesIndexes[f],p=this.data[h],d=p.dataPoints;p.maxWidthInX=c/(1<e.axisX.conversionParameters.pixelPerUnit?e.axisX.conversionParameters.pixelPerUnit-1:e.axisX.conversionParameters.pixelPerUnit);if(0<d.length){var v=5<c&&p.bevelEnabled?!0:!1;t.strokeStyle="#4572A7 ";for(o=0;o<d.length;o++)if(n=d[o].x.getTime?d[o].x.getTime():d[o].x,!(n<e.axisX.dataInfo.viewPortMin||n>e.axisX.dataInfo.viewPortMax)&&"number"===typeof d[o].y){r=e.axisX.conversionParameters.reference+e.axisX.conversionParameters.pixelPerUnit*(n-e.axisX.conversionParameters.minimum)+.5<<0;u=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(d[o].y-e.axisY.conversionParameters.minimum)+.5<<0;var m=r-e.plotType.plotUnits.length*c/2+e.index*c<<0,g=m+c<<0,y;if(0<=d[o].y){var b=i[n]?i[n]:0;y=a+b;u+=b;i[n]=b+(u-y)}else b=s[n]?s[n]:0,y=u-b,u=a-b,s[n]=b+(u-y);n=d[o].color?d[o].color:p._colorSet[o%p._colorSet.length];$(t,y,m,u,g,n,v,!1,!1,!1);n=p.dataPointIds[o];this._eventManager.objectMap[n]={id:n,objectType:"dataPoint",dataSeriesIndex:h,dataPointIndex:o,x1:y,y1:m,x2:u,y2:g};n=l(n);_&&$(this._eventManager.ghostCtx,y,m,u,g,n,!1,!1,!1,!1);this._indexLabels.push({chartType:"stackedBar",dataPoint:d[o],dataSeries:p,point:{x:0<=d[o].y?u:y,y:r},bounds:{x1:Math.min(y,u),y1:m,x2:Math.max(y,u),y2:g},color:n})}}}t.restore();_&&this._eventManager.ghostCtx.restore()}};b.prototype.renderStackedBar100=function(e){var t=this.plotArea.ctx;if(!(0>=e.dataSeriesIndexes.length)){var n=null,r=this.plotArea,i=[],s=[],o=0,u,a=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(0-e.axisY.conversionParameters.minimum)<<0,o=.15*this.width<<0,f=e.axisX.dataInfo.minDiff,c=.9*(r.height/Math.abs(e.axisX.maximum-e.axisX.minimum)*Math.abs(f)/e.plotType.plotUnits.length)<<0;c>o?c=o:Infinity===f?c=o:1>c&&(c=1);t.save();_&&this._eventManager.ghostCtx.save();t.beginPath();t.rect(r.x1,r.y1,r.width,r.height);t.clip();_&&(this._eventManager.ghostCtx.rect(r.x1,r.y1,r.width,r.height),this._eventManager.ghostCtx.clip());for(f=0;f<e.dataSeriesIndexes.length;f++){var h=e.dataSeriesIndexes[f],p=this.data[h],d=p.dataPoints;p.maxWidthInX=c/(1<e.axisX.conversionParameters.pixelPerUnit?e.axisX.conversionParameters.pixelPerUnit-1:e.axisX.conversionParameters.pixelPerUnit);if(0<d.length){var v=5<c&&p.bevelEnabled?!0:!1;t.strokeStyle="#4572A7 ";for(o=0;o<d.length;o++)if(n=d[o].x.getTime?d[o].x.getTime():d[o].x,!(n<e.axisX.dataInfo.viewPortMin||n>e.axisX.dataInfo.viewPortMax)&&"number"===typeof d[o].y){r=e.axisX.conversionParameters.reference+e.axisX.conversionParameters.pixelPerUnit*(n-e.axisX.conversionParameters.minimum)+.5<<0;u=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*((0!==e.dataPointYSums[n]?100*(d[o].y/e.dataPointYSums[n]):0)-e.axisY.conversionParameters.minimum)+.5<<0;var m=r-e.plotType.plotUnits.length*c/2+e.index*c<<0,g=m+c<<0,y;if(0<=d[o].y){var b=i[n]?i[n]:0;y=a+b;u+=b;i[n]=b+(u-y)}else b=s[n]?s[n]:0,y=u-b,u=a-b,s[n]=b+(u-y);n=d[o].color?d[o].color:p._colorSet[o%p._colorSet.length];$(t,y,m,u,g,n,v,!1,!1,!1);n=p.dataPointIds[o];this._eventManager.objectMap[n]={id:n,objectType:"dataPoint",dataSeriesIndex:h,dataPointIndex:o,x1:y,y1:m,x2:u,y2:g};n=l(n);_&&$(this._eventManager.ghostCtx,y,m,u,g,n,!1,!1,!1,!1);this._indexLabels.push({chartType:"stackedBar100",dataPoint:d[o],dataSeries:p,point:{x:0<=d[o].y?u:y,y:r},bounds:{x1:Math.min(y,u),y1:m,x2:Math.max(y,u),y2:g},color:n})}}}t.restore();_&&this._eventManager.ghostCtx.restore()}};b.prototype.renderArea=function(e){function t(){b&&(0>=e.axisY.minimum&&0<=e.axisY.maximum?y=g:0>e.axisY.maximum?y=s.y1:0<e.axisY.minimum&&(y=i.y2),n.lineTo(d,y),n.lineTo(b.x,y),n.closePath(),n.fill(),_&&(r.lineTo(d,y),r.lineTo(b.x,y),r.closePath(),r.fill()),n.beginPath(),n.moveTo(d,v),r.beginPath(),r.moveTo(d,v),b={x:d,y:v})}var n=this.plotArea.ctx;if(!(0>=e.dataSeriesIndexes.length)){var r=this._eventManager.ghostCtx,i=e.axisX.lineCoordinates,s=e.axisY.lineCoordinates,o=[],u=this.plotArea;n.save();_&&r.save();n.beginPath();n.rect(u.x1,u.y1,u.width,u.height);n.clip();_&&(r.beginPath(),r.rect(u.x1,u.y1,u.width,u.height),r.clip());for(u=0;u<e.dataSeriesIndexes.length;u++){var a=e.dataSeriesIndexes[u],f=this.data[a],c=f.dataPoints,o=f.id;this._eventManager.objectMap[o]={objectType:"dataSeries",dataSeriesIndex:a};o=l(o);r.fillStyle=o;var o=[],h=!0,p=0,d,v,m,g=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(0-e.axisY.conversionParameters.minimum)+.5<<0,y,b=null;if(0<c.length){var w=f._colorSet[p%f._colorSet.length];n.fillStyle=w;for(var E=!0;p<c.length;p++)if(m=c[p].x.getTime?c[p].x.getTime():c[p].x,!(m<e.axisX.dataInfo.viewPortMin||m>e.axisX.dataInfo.viewPortMax))if("number"!==typeof c[p].y)t(),E=!0;else{d=e.axisX.conversionParameters.reference+e.axisX.conversionParameters.pixelPerUnit*(m-e.axisX.conversionParameters.minimum)+.5<<0;v=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(c[p].y-e.axisY.conversionParameters.minimum)+.5<<0;h||E?(n.beginPath(),n.moveTo(d,v),b={x:d,y:v},_&&(r.beginPath(),r.moveTo(d,v)),E=h=!1):(n.lineTo(d,v),_&&r.lineTo(d,v),0==p%250&&t());var S=f.dataPointIds[p];this._eventManager.objectMap[S]={id:S,objectType:"dataPoint",dataSeriesIndex:a,dataPointIndex:p,x1:d,y1:v};if(0!==c[p].markerSize&&(0<c[p].markerSize||0<f.markerSize)){m=f.getMarkerProperties(p,d,v,n);o.push(m);if(!f.maxWidthInX||m.size>f.maxWidthInX)f.maxWidthInX=m.size/(1<e.axisX.conversionParameters.pixelPerUnit?e.axisX.conversionParameters.pixelPerUnit-1:e.axisX.conversionParameters.pixelPerUnit);S=l(S);_&&o.push({x:d,y:v,ctx:r,type:m.type,size:m.size,color:S,borderColor:S,borderThickness:m.borderThickness})}(c[p].indexLabel||f.indexLabel)&&this._indexLabels.push({chartType:"area",dataPoint:c[p],dataSeries:f,point:{x:d,y:v},color:w})}t();K.drawMarkers(o)}}n.restore();_&&this._eventManager.ghostCtx.restore()}};b.prototype.renderSplineArea=function(e){function t(){var t=w(y,2);if(0<t.length){n.beginPath();n.moveTo(t[0].x,t[0].y);_&&(r.beginPath(),r.moveTo(t[0].x,t[0].y));for(var o=0;o<t.length-3;o+=3)n.bezierCurveTo(t[o+1].x,t[o+1].y,t[o+2].x,t[o+2].y,t[o+3].x,t[o+3].y),_&&r.bezierCurveTo(t[o+1].x,t[o+1].y,t[o+2].x,t[o+2].y,t[o+3].x,t[o+3].y);0>=e.axisY.minimum&&0<=e.axisY.maximum?m=v:0>e.axisY.maximum?m=s.y1:0<e.axisY.minimum&&(m=i.y2);g={x:t[0].x,y:t[0].y};n.lineTo(t[t.length-1].x,m);n.lineTo(g.x,m);n.closePath();n.fill();_&&(r.lineTo(t[t.length-1].x,m),r.lineTo(g.x,m),r.closePath(),r.fill())}}var n=this.plotArea.ctx;if(!(0>=e.dataSeriesIndexes.length)){var r=this._eventManager.ghostCtx,i=e.axisX.lineCoordinates,s=e.axisY.lineCoordinates,o=[],u=this.plotArea;n.save();_&&r.save();n.beginPath();n.rect(u.x1,u.y1,u.width,u.height);n.clip();_&&(r.beginPath(),r.rect(u.x1,u.y1,u.width,u.height),r.clip());for(u=0;u<e.dataSeriesIndexes.length;u++){var a=e.dataSeriesIndexes[u],f=this.data[a],c=f.dataPoints,o=f.id;this._eventManager.objectMap[o]={objectType:"dataSeries",dataSeriesIndex:a};o=l(o);r.fillStyle=o;var o=[],h=0,p,d,v=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(0-e.axisY.conversionParameters.minimum)+.5<<0,m,g=null,y=[];if(0<c.length){color=f._colorSet[h%f._colorSet.length];for(n.fillStyle=color;h<c.length;h++)if(p=c[h].x.getTime?c[h].x.getTime():c[h].x,!(p<e.axisX.dataInfo.viewPortMin||p>e.axisX.dataInfo.viewPortMax))if("number"!==typeof c[h].y)0<h&&(t(),y=[]);else{p=e.axisX.conversionParameters.reference+e.axisX.conversionParameters.pixelPerUnit*(p-e.axisX.conversionParameters.minimum)+.5<<0;d=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(c[h].y-e.axisY.conversionParameters.minimum)+.5<<0;var b=f.dataPointIds[h];this._eventManager.objectMap[b]={id:b,objectType:"dataPoint",dataSeriesIndex:a,dataPointIndex:h,x1:p,y1:d};y[y.length]={x:p,y:d};if(0!==c[h].markerSize&&(0<c[h].markerSize||0<f.markerSize)){var E=f.getMarkerProperties(h,p,d,n);o.push(E);if(!f.maxWidthInX||E.size>f.maxWidthInX)f.maxWidthInX=E.size/(1<e.axisX.conversionParameters.pixelPerUnit?e.axisX.conversionParameters.pixelPerUnit-1:e.axisX.conversionParameters.pixelPerUnit);b=l(b);_&&o.push({x:p,y:d,ctx:r,type:E.type,size:E.size,color:b,borderColor:b,borderThickness:E.borderThickness})}(c[h].indexLabel||f.indexLabel)&&this._indexLabels.push({chartType:"splineArea",dataPoint:c[h],dataSeries:f,point:{x:p,y:d},color:color})}t();K.drawMarkers(o)}}n.restore();_&&this._eventManager.ghostCtx.restore()}};b.prototype.renderStepArea=function(e){function t(){b&&(0>=e.axisY.minimum&&0<=e.axisY.maximum?y=g:0>e.axisY.maximum?y=s.y1:0<e.axisY.minimum&&(y=i.y2),n.lineTo(d,y),n.lineTo(b.x,y),n.closePath(),n.fill(),_&&(r.lineTo(d,y),r.lineTo(b.x,y),r.closePath(),r.fill()),n.beginPath(),n.moveTo(d,v),r.beginPath(),r.moveTo(d,v),b={x:d,y:v})}var n=this.plotArea.ctx;if(!(0>=e.dataSeriesIndexes.length)){var r=this._eventManager.ghostCtx,i=e.axisX.lineCoordinates,s=e.axisY.lineCoordinates,o=[],u=this.plotArea;n.save();_&&r.save();n.beginPath();n.rect(u.x1,u.y1,u.width,u.height);n.clip();_&&(r.beginPath(),r.rect(u.x1,u.y1,u.width,u.height),r.clip());for(u=0;u<e.dataSeriesIndexes.length;u++){var a=e.dataSeriesIndexes[u],f=this.data[a],c=f.dataPoints,o=f.id;this._eventManager.objectMap[o]={objectType:"dataSeries",dataSeriesIndex:a};o=l(o);r.fillStyle=o;var o=[],h=!0,p=0,d,v,m,g=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(0-e.axisY.conversionParameters.minimum)+.5<<0,y,b=null,w=!1;if(0<c.length){var E=f._colorSet[p%f._colorSet.length];for(n.fillStyle=E;p<c.length;p++)if(m=c[p].x.getTime?c[p].x.getTime():c[p].x,!(m<e.axisX.dataInfo.viewPortMin||m>e.axisX.dataInfo.viewPortMax)){var S=v;if("number"!==typeof c[p].y)t(),w=!0;else{d=e.axisX.conversionParameters.reference+e.axisX.conversionParameters.pixelPerUnit*(m-e.axisX.conversionParameters.minimum)+.5<<0;v=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(c[p].y-e.axisY.conversionParameters.minimum)+.5<<0;h||w?(n.beginPath(),n.moveTo(d,v),b={x:d,y:v},_&&(r.beginPath(),r.moveTo(d,v)),w=h=!1):(n.lineTo(d,S),_&&r.lineTo(d,S),n.lineTo(d,v),_&&r.lineTo(d,v),0==p%250&&(0>=e.axisY.minimum&&0<=e.axisY.maximum?y=g:0>e.axisY.maximum?y=s.y1:0<e.axisY.minimum&&(y=i.y2),n.lineTo(d,y),n.lineTo(b.x,y),n.closePath(),n.fill(),n.beginPath(),n.moveTo(d,v),_&&(r.lineTo(d,y),r.lineTo(b.x,y),r.closePath(),r.fill(),r.beginPath(),r.moveTo(d,v)),b={x:d,y:v}));S=f.dataPointIds[p];this._eventManager.objectMap[S]={id:S,objectType:"dataPoint",dataSeriesIndex:a,dataPointIndex:p,x1:d,y1:v};if(0!==c[p].markerSize&&(0<c[p].markerSize||0<f.markerSize)){m=f.getMarkerProperties(p,d,v,n);o.push(m);if(!f.maxWidthInX||m.size>f.maxWidthInX)f.maxWidthInX=m.size/(1<e.axisX.conversionParameters.pixelPerUnit?e.axisX.conversionParameters.pixelPerUnit-1:e.axisX.conversionParameters.pixelPerUnit);S=l(S);_&&o.push({x:d,y:v,ctx:r,type:m.type,size:m.size,color:S,borderColor:S,borderThickness:m.borderThickness})}(c[p].indexLabel||f.indexLabel)&&this._indexLabels.push({chartType:"stepArea",dataPoint:c[p],dataSeries:f,point:{x:d,y:v},color:E})}}t();K.drawMarkers(o)}}n.restore();_&&this._eventManager.ghostCtx.restore()}};b.prototype.renderStackedArea=function(e){var t=this.plotArea.ctx;if(!(0>=e.dataSeriesIndexes.length)){var n=null,r=[],i=this.plotArea,s=[],o=[],u=0,f,c,h,p=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(0-e.axisY.conversionParameters.minimum)<<0,d=this._eventManager.ghostCtx;_&&d.beginPath();t.save();_&&d.save();t.beginPath();t.rect(i.x1,i.y1,i.width,i.height);t.clip();_&&(d.beginPath(),d.rect(i.x1,i.y1,i.width,i.height),d.clip());xValuePresent=[];for(i=0;i<e.dataSeriesIndexes.length;i++){var v=e.dataSeriesIndexes[i],m=this.data[v],g=m.dataPoints;m.dataPointIndexes=[];for(u=0;u<g.length;u++)v=g[u].x.getTime?g[u].x.getTime():g[u].x,m.dataPointIndexes[v]=u,xValuePresent[v]||(o.push(v),xValuePresent[v]=!0);o.sort(a)}for(i=0;i<e.dataSeriesIndexes.length;i++){var v=e.dataSeriesIndexes[i],m=this.data[v],g=m.dataPoints,y=!0,b=[],u=m.id;this._eventManager.objectMap[u]={objectType:"dataSeries",dataSeriesIndex:v};u=l(u);d.fillStyle=u;if(0<o.length){n=m._colorSet[0];t.fillStyle=n;for(u=0;u<o.length;u++){h=o[u];var w=null,w=0<=m.dataPointIndexes[h]?g[m.dataPointIndexes[h]]:{x:h,y:0};if(!(h<e.axisX.dataInfo.viewPortMin||h>e.axisX.dataInfo.viewPortMax)&&"number"===typeof w.y){f=e.axisX.conversionParameters.reference+e.axisX.conversionParameters.pixelPerUnit*(h-e.axisX.conversionParameters.minimum)+.5<<0;c=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(w.y-e.axisY.conversionParameters.minimum)+.5<<0;var E=s[h]?s[h]:0;c-=E;b.push({x:f,y:p-E});s[h]=p-c;if(y)t.beginPath(),t.moveTo(f,c),_&&(d.beginPath(),d.moveTo(f,c)),y=!1;else if(t.lineTo(f,c),_&&d.lineTo(f,c),0==u%250){for(;0<b.length;){var S=b.pop();t.lineTo(S.x,S.y);_&&d.lineTo(S.x,S.y)}t.closePath();t.fill();t.beginPath();t.moveTo(f,c);_&&(d.closePath(),d.fill(),d.beginPath(),d.moveTo(f,c));b.push({x:f,y:p-E})}if(0<=m.dataPointIndexes[h]){var x=m.dataPointIds[m.dataPointIndexes[h]];this._eventManager.objectMap[x]={id:x,objectType:"dataPoint",dataSeriesIndex:v,dataPointIndex:m.dataPointIndexes[h],x1:f,y1:c}}if(0<=m.dataPointIndexes[h]&&0!==w.markerSize&&(0<w.markerSize||0<m.markerSize)){h=m.getMarkerProperties(u,f,c,t);r.push(h);if(!m.maxWidthInX||h.size>m.maxWidthInX)m.maxWidthInX=h.size/(1<e.axisX.conversionParameters.pixelPerUnit?e.axisX.conversionParameters.pixelPerUnit-1:e.axisX.conversionParameters.pixelPerUnit);markerColor=l(x);_&&r.push({x:f,y:c,ctx:d,type:h.type,size:h.size,color:markerColor,borderColor:markerColor,borderThickness:h.borderThickness})}(w.indexLabel||m.indexLabel)&&this._indexLabels.push({chartType:"stackedArea",dataPoint:w,dataSeries:m,point:{x:f,y:c},color:n})}}for(;0<b.length;)S=b.pop(),t.lineTo(S.x,S.y),_&&d.lineTo(S.x,S.y);t.closePath();t.fill();t.beginPath();t.moveTo(f,c);_&&(d.closePath(),d.fill(),d.beginPath(),d.moveTo(f,c))}delete m.dataPointIndexes}K.drawMarkers(r);t.restore();_&&d.restore()}};b.prototype.renderStackedArea100=function(e){var t=this.plotArea.ctx;if(!(0>=e.dataSeriesIndexes.length)){var n=null,r=this.plotArea,i=[],s=[],o=[],u=0,f,c,h,p=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(0-e.axisY.conversionParameters.minimum)<<0,d=.15*this.width<<0,v=e.axisX.dataInfo.minDiff,v=.9*r.width/Math.abs(e.axisX.maximum-e.axisX.minimum)*Math.abs(v)<<0,m=this._eventManager.ghostCtx;t.save();_&&m.save();t.beginPath();t.rect(r.x1,r.y1,r.width,r.height);t.clip();_&&(m.beginPath(),m.rect(r.x1,r.y1,r.width,r.height),m.clip());xValuePresent=[];for(r=0;r<e.dataSeriesIndexes.length;r++){var g=e.dataSeriesIndexes[r],y=this.data[g],b=y.dataPoints;y.dataPointIndexes=[];for(u=0;u<b.length;u++)g=b[u].x.getTime?b[u].x.getTime():b[u].x,y.dataPointIndexes[g]=u,xValuePresent[g]||(o.push(g),xValuePresent[g]=!0);o.sort(a)}for(r=0;r<e.dataSeriesIndexes.length;r++){var g=e.dataSeriesIndexes[r],y=this.data[g],b=y.dataPoints,w=!0,n=y.id;this._eventManager.objectMap[n]={objectType:"dataSeries",dataSeriesIndex:g};n=l(n);m.fillStyle=n;1==b.length&&(v=d);1>v?v=1:v>d&&(v=d);var E=[];if(0<o.length){n=y._colorSet[u%y._colorSet.length];t.fillStyle=n;for(u=0;u<o.length;u++){h=o[u];var S=null,S=0<=y.dataPointIndexes[h]?b[y.dataPointIndexes[h]]:{x:h,y:0};if(!(h<e.axisX.dataInfo.viewPortMin||h>e.axisX.dataInfo.viewPortMax)&&"number"===typeof S.y){c=0!==e.dataPointYSums[h]?100*(S.y/e.dataPointYSums[h]):0;f=e.axisX.conversionParameters.reference+e.axisX.conversionParameters.pixelPerUnit*(h-e.axisX.conversionParameters.minimum)+.5<<0;c=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(c-e.axisY.conversionParameters.minimum)+.5<<0;var x=s[h]?s[h]:0;c-=x;E.push({x:f,y:p-x});s[h]=p-c;if(w)t.beginPath(),t.moveTo(f,c),_&&(m.beginPath(),m.moveTo(f,c)),w=!1;else if(t.lineTo(f,c),_&&m.lineTo(f,c),0==u%250){for(;0<E.length;){var T=E.pop();t.lineTo(T.x,T.y);_&&m.lineTo(T.x,T.y)}t.closePath();t.fill();t.beginPath();t.moveTo(f,c);_&&(m.closePath(),m.fill(),m.beginPath(),m.moveTo(f,c));E.push({x:f,y:p-x})}if(0<=y.dataPointIndexes[h]){var N=y.dataPointIds[y.dataPointIndexes[h]];this._eventManager.objectMap[N]={id:N,objectType:"dataPoint",dataSeriesIndex:g,dataPointIndex:y.dataPointIndexes[h],x1:f,y1:c}}if(0<=y.dataPointIndexes[h]&&0!==S.markerSize&&(0<S.markerSize||0<y.markerSize)){h=y.getMarkerProperties(u,f,c,t);i.push(h);if(!y.maxWidthInX||h.size>y.maxWidthInX)y.maxWidthInX=h.size/(1<e.axisX.conversionParameters.pixelPerUnit?e.axisX.conversionParameters.pixelPerUnit-1:e.axisX.conversionParameters.pixelPerUnit);markerColor=l(N);_&&i.push({x:f,y:c,ctx:m,type:h.type,size:h.size,color:markerColor,borderColor:markerColor,borderThickness:h.borderThickness})}(S.indexLabel||y.indexLabel)&&this._indexLabels.push({chartType:"stackedArea100",dataPoint:S,dataSeries:y,point:{x:f,y:c},color:n})}}for(;0<E.length;)T=E.pop(),t.lineTo(T.x,T.y),_&&m.lineTo(T.x,T.y);t.closePath();t.fill();t.beginPath();t.moveTo(f,c);_&&(m.closePath(),m.fill(),m.beginPath(),m.moveTo(f,c))}delete y.dataPointIndexes}K.drawMarkers(i);t.restore();_&&m.restore()}};b.prototype.renderBubble=function(e){var t=this.plotArea.ctx,n=e.dataSeriesIndexes.length;if(!(0>=n)){var r=this.plotArea,i=0,s,o,u=.15*this.width<<0,i=e.axisX.dataInfo.minDiff,n=.9*(r.width/Math.abs(e.axisX.maximum-e.axisX.minimum)*Math.abs(i)/n)<<0;t.save();_&&this._eventManager.ghostCtx.save();t.beginPath();t.rect(r.x1,r.y1,r.width,r.height);t.clip();_&&(this._eventManager.ghostCtx.rect(r.x1,r.y1,r.width,r.height),this._eventManager.ghostCtx.clip());for(var a=-Infinity,f=Infinity,c=0;c<e.dataSeriesIndexes.length;c++)for(var h=e.dataSeriesIndexes[c],p=this.data[h],d=p.dataPoints,v=0,i=0;i<d.length;i++)s=d[i].getTime?s=d[i].x.getTime():s=d[i].x,s<e.axisX.dataInfo.viewPortMin||s>e.axisX.dataInfo.viewPortMax||"undefined"===typeof d[i].z||(v=d[i].z,v>a&&(a=v),v<f&&(f=v));for(var m=25*Math.PI,r=Math.max(Math.pow(.25*Math.min(r.height,r.width)/2,2)*Math.PI,m),c=0;c<e.dataSeriesIndexes.length;c++)if(h=e.dataSeriesIndexes[c],p=this.data[h],d=p.dataPoints,1==d.length&&(n=u),1>n?n=1:n>u&&(n=u),0<d.length)for(t.strokeStyle="#4572A7 ",i=0;i<d.length;i++)if(s=d[i].getTime?s=d[i].x.getTime():s=d[i].x,!(s<e.axisX.dataInfo.viewPortMin||s>e.axisX.dataInfo.viewPortMax)&&"number"===typeof d[i].y){s=e.axisX.conversionParameters.reference+e.axisX.conversionParameters.pixelPerUnit*(s-e.axisX.conversionParameters.minimum)+.5<<0;o=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(d[i].y-e.axisY.conversionParameters.minimum)+.5<<0;var v=d[i].z,g=2*Math.max(Math.sqrt((a===f?r/2:m+(r-m)/(a-f)*(v-f))/Math.PI)<<0,1),v=p.getMarkerProperties(i,t);v.size=g;K.drawMarker(s,o,t,v.type,v.size,v.color,v.borderColor,v.borderThickness);if(!p.maxWidthInX||v.size>p.maxWidthInX)p.maxWidthInX=v.size/(1<e.axisX.conversionParameters.pixelPerUnit?e.axisX.conversionParameters.pixelPerUnit-1:e.axisX.conversionParameters.pixelPerUnit);var y=p.dataPointIds[i];this._eventManager.objectMap[y]={id:y,objectType:"dataPoint",dataSeriesIndex:h,dataPointIndex:i,x1:s,y1:o,size:g};g=l(y);_&&K.drawMarker(s,o,this._eventManager.ghostCtx,v.type,v.size,g,g,v.borderThickness)}t.restore();_&&this._eventManager.ghostCtx.restore()}};b.prototype.renderScatter=function(e){var t=this.plotArea.ctx,n=e.dataSeriesIndexes.length;if(!(0>=n)){var r=this.plotArea,i=0,s,o,u=.15*this.width<<0,i=e.axisX.dataInfo.minDiff,n=.9*(r.width/Math.abs(e.axisX.maximum-e.axisX.minimum)*Math.abs(i)/n)<<0;t.save();_&&this._eventManager.ghostCtx.save();t.beginPath();t.rect(r.x1,r.y1,r.width,r.height);t.clip();_&&(this._eventManager.ghostCtx.rect(r.x1,r.y1,r.width,r.height),this._eventManager.ghostCtx.clip());for(var a=0;a<e.dataSeriesIndexes.length;a++){var f=e.dataSeriesIndexes[a],c=this.data[f],h=c.dataPoints;1==h.length&&(n=u);1>n?n=1:n>u&&(n=u);if(0<h.length){t.strokeStyle="#4572A7 ";Math.pow(.3*Math.min(r.height,r.width)/2,2);for(var p=0,d=0,i=0;i<h.length;i++)if(s=h[i].getTime?s=h[i].x.getTime():s=h[i].x,!(s<e.axisX.dataInfo.viewPortMin||s>e.axisX.dataInfo.viewPortMax)&&"number"===typeof h[i].y){s=e.axisX.conversionParameters.reference+e.axisX.conversionParameters.pixelPerUnit*(s-e.axisX.conversionParameters.minimum)+.5<<0;o=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(h[i].y-e.axisY.conversionParameters.minimum)+.5<<0;var v=c.getMarkerProperties(i,s,o,t);K.drawMarker(v.x,v.y,v.ctx,v.type,v.size,v.color,v.color,v.thickness);if(!c.maxWidthInX||v.size>c.maxWidthInX)c.maxWidthInX=v.size/(1<e.axisX.conversionParameters.pixelPerUnit?e.axisX.conversionParameters.pixelPerUnit-1:e.axisX.conversionParameters.pixelPerUnit);Math.sqrt((p-s)*(p-s)+(d-o)*(d-o))<Math.min(v.size,5)||(p=c.dataPointIds[i],this._eventManager.objectMap[p]={id:p,objectType:"dataPoint",dataSeriesIndex:f,dataPointIndex:i,x1:s,y1:o},p=l(p),_&&K.drawMarker(v.x,v.y,this._eventManager.ghostCtx,v.type,v.size,p,p,v.borderThickness),p=s,d=o)}}}t.restore();_&&this._eventManager.ghostCtx.restore()}};var J=function(e,t,n,r,i,s,o){e.save();"pie"===i?(e.beginPath(),e.moveTo(t.x,t.y),e.arc(t.x,t.y,n,s,o,!1),e.fillStyle=r,e.strokeStyle="white",e.lineWidth=2,e.closePath(),e.fill()):"doughnut"===i&&(e.beginPath(),e.arc(t.x,t.y,n,s,o,!1),e.arc(t.x,t.y,.6*n,o,s,!0),e.closePath(),e.fillStyle=r,e.strokeStyle="white",e.lineWidth=2,e.fill());e.restore()};b.prototype.renderPie=function(e){function t(e){m.frame=0;m.maxFrames=e||1}function n(){if(c&&h){for(var e=0,t=0;t<h.length;t++)e+=Math.abs(h[t].y);for(var n=0,r=0,i=0,s=0,t=0;t<h.length;t++){var o=h[t],u=c.dataPointIds[t],a={id:u,objectType:"dataPoint",dataPointIndex:t,dataSeriesIndex:0};g.push(a);var f=o.indexLabel?o.indexLabel:c.indexLabel?c.indexLabel:o.label?o.label:c.label?c.label:"";l._eventManager.objectMap[u]=a;a.center={x:x.x,y:x.y};a.y=o.y;a.radius=T;a.indexLabelText=l.replaceKeywordsWithValue(f,o,c,t);a.indexLabelPlacement=c.indexLabelPlacement;a.indexLabelLineColor=o.indexLabelLineColor?o.indexLabelLineColor:c.indexLabelLineColor?c.indexLabelLineColor:o.color?o.color:c._colorSet[t%c._colorSet.length];a.indexLabelLineThickness=o.indexLabelLineThickness?o.indexLabelLineThickness:c.indexLabelLineThickness;a.indexLabelFontColor=o.indexLabelFontColor?o.indexLabelFontColor:c.indexLabelFontColor;a.indexLabelFontStyle=o.indexLabelFontStyle?o.indexLabelFontStyle:c.indexLabelFontStyle;a.indexLabelFontWeight=o.indexLabelFontWeight?o.indexLabelFontWeight:c.indexLabelFontWeight;a.indexLabelFontSize=o.indexLabelFontSize?o.indexLabelFontSize:c.indexLabelFontSize;a.indexLabelFontFamily=o.indexLabelFontFamily?o.indexLabelFontFamily:c.indexLabelFontFamily;a.indexLabelBackgroundColor=o.indexLabelBackgroundColor?o.indexLabelBackgroundColor:c.indexLabelBackgroundColor?c.indexLabelBackgroundColor:null;a.indexLabelMaxWidth=o.indexLabelMaxWidth?o.indexLabelMaxWidth:c.indexLabelMaxWidth?c.indexLabelMaxWidth:.33*d.width;a.indexLabelWrap=o.indexLabelWrap?o.indexLabelWrap:c.indexLabelWrap;a.startAngle=0===t?c.startAngle?c.startAngle/180*Math.PI:0:g[t-1].endAngle;a.startAngle=(a.startAngle+2*Math.PI)%(2*Math.PI);a.endAngle=a.startAngle+2*Math.PI/e*Math.abs(o.y);o=(a.endAngle+a.startAngle)/2;o=(o+2*Math.PI)%(2*Math.PI);a.midAngle=o;if(a.midAngle>Math.PI/2-w&&a.midAngle<Math.PI/2+w){if(0===n||g[i].midAngle>a.midAngle)i=t;n++}else if(a.midAngle>3*Math.PI/2-w&&a.midAngle<3*Math.PI/2+w){if(0===r||g[s].midAngle>a.midAngle)s=t;r++}a.hemisphere=o>Math.PI/2&&o<=3*Math.PI/2?"left":"right";a.indexLabelTextBlock=new S(l.plotArea.ctx,{fontSize:a.indexLabelFontSize,fontFamily:a.indexLabelFontFamily,fontColor:a.indexLabelFontColor,fontStyle:a.indexLabelFontStyle,fontWeight:a.indexLabelFontWeight,horizontalAlign:"left",backgroundColor:a.indexLabelBackgroundColor,maxWidth:a.indexLabelMaxWidth,maxHeight:a.indexLabelWrap?5*a.indexLabelFontSize:1.5*a.indexLabelFontSize,text:a.indexLabelText,padding:0,textBaseline:"top"});a.indexLabelTextBlock.measureText()}o=e=0;u=!1;for(t=0;t<h.length;t++)a=g[(i+t)%h.length],1<n&&a.midAngle>Math.PI/2-w&&a.midAngle<Math.PI/2+w&&(e<=n/2&&!u?(a.hemisphere="right",e++):(a.hemisphere="left",u=!0));u=!1;for(t=0;t<h.length;t++)a=g[(s+t)%h.length],1<r&&a.midAngle>3*Math.PI/2-w&&a.midAngle<3*Math.PI/2+w&&(o<=r/2&&!u?(a.hemisphere="left",o++):(a.hemisphere="right",u=!0))}}function r(){var e=l.plotArea.ctx;if(null!==m&&m.frame<m.maxFrames){0===m.frame&&(m.prevMaxAngle=g[0].startAngle);e.clearRect(d.x1,d.y1,d.width,d.height);for(var e=m.prevMaxAngle+2*Math.PI/m.maxFrames,n=0;n<h.length;n++){var s=0===n?g[n].startAngle:o,o=s+(g[n].endAngle-g[n].startAngle),u=!1;o>e&&(o=e,u=!0);var a=h[n].color?h[n].color:c._colorSet[n%c._colorSet.length];o>s&&J(l.plotArea.ctx,g[n].center,g[n].radius,a,c.type,s,o);if(u)break}m.frame++;m.prevMaxAngle=e;m.frame<m.maxFrames?l.animationRequestId=l.requestAnimFrame.call(window,r):(t(_?15:4),i())}}function i(){var e=l.plotArea.ctx;if(null!==m&&m.frame<m.maxFrames){e.clearRect(d.x1,d.y1,d.width,d.height);for(e=0;e<h.length;e++){var t=g[e].startAngle,n=g[e].endAngle;if(n>t){var r=.07*T*Math.cos(g[e].midAngle),s=.07*T*Math.sin(g[e].midAngle),o=!1;if(h[e].exploded){if(Math.abs(g[e].center.x-(x.x+r))>Math.abs(.5*r/m.maxFrames)||Math.abs(g[e].center.y-(x.y+s))>Math.abs(.5*s/m.maxFrames))g[e].center.x+=r/m.maxFrames,g[e].center.y+=s/m.maxFrames,o=!0}else if(Math.abs(g[e].center.x-x.x)>Math.abs(.5*r/m.maxFrames)||Math.abs(g[e].center.y-x.y)>Math.abs(.5*s/m.maxFrames))g[e].center.x-=r/m.maxFrames,g[e].center.y-=s/m.maxFrames,o=!0;o&&(r={},r.dataSeries=c,r.dataPoint=c.dataPoints[e],r.index=e,l._toolTip.highlightObjects([r]));J(l.plotArea.ctx,g[e].center,g[e].radius,h[e].color?h[e].color:c._colorSet[e%c._colorSet.length],c.type,t,n)}}m.frame++;e=l.plotArea.ctx;e.fillStyle="black";e.strokeStyle="grey";e.textBaseline="middle";e.lineJoin="round";for(t=t=0;t<h.length;t++)n=g[t],n.indexLabelText&&(n.indexLabelTextBlock.y-=n.indexLabelTextBlock.height/2,r=0,r="left"===n.hemisphere?"outside"===c.indexLabelPlacement?-(n.indexLabelTextBlock.width+p):-n.indexLabelTextBlock.width/2:"outside"===c.indexLabelPlacement?p:-n.indexLabelTextBlock.width/2,n.indexLabelTextBlock.x+=r,n.indexLabelTextBlock.render(!0),n.indexLabelTextBlock.x-=r,n.indexLabelTextBlock.y+=n.indexLabelTextBlock.height/2,"outside"===n.indexLabelPlacement&&(r=n.center.x+T*Math.cos(n.midAngle),s=n.center.y+T*Math.sin(n.midAngle),e.strokeStyle=n.indexLabelLineColor,e.lineWidth=n.indexLabelLineThickness,e.beginPath(),e.moveTo(r,s),e.lineTo(n.indexLabelTextBlock.x,n.indexLabelTextBlock.y),e.lineTo(n.indexLabelTextBlock.x+("left"===n.hemisphere?-p:p),n.indexLabelTextBlock.y),e.stroke()),e.lineJoin="miter");m.frame<m.maxFrames&&(l.animationRequestId=l.requestAnimFrame.call(window,i))}}function s(e,t){var n=e.indexLabelTextBlock.x,r=e.indexLabelTextBlock.y-e.indexLabelTextBlock.height/2,i=e.indexLabelTextBlock.y+e.indexLabelTextBlock.height/2,s=t.indexLabelTextBlock.y-t.indexLabelTextBlock.height/2,o=t.indexLabelTextBlock.x+t.indexLabelTextBlock.width,u=t.indexLabelTextBlock.y+t.indexLabelTextBlock.height/2;return e.indexLabelTextBlock.x+e.indexLabelTextBlock.width<t.indexLabelTextBlock.x-p||n>o+p||r>u+p||i<s-p?!1:!0}function o(e,t){var n=0,n=e.indexLabelTextBlock.y-e.indexLabelTextBlock.height/2,r=e.indexLabelTextBlock.y+e.indexLabelTextBlock.height/2,i=t.indexLabelTextBlock.y-t.indexLabelTextBlock.height/2,s=t.indexLabelTextBlock.y+t.indexLabelTextBlock.height/2;return n=t.indexLabelTextBlock.y>e.indexLabelTextBlock.y?i-r:n-s}function u(e){for(var t=null,n=1;n<h.length;n++)if(t=(e+n+g.length)%g.length,g[t].hemisphere!==g[e].hemisphere){t=null;break}else if(g[t].indexLabelText&&t!==e&&(0>o(g[t],g[e])||("right"===g[e].hemisphere?g[t].indexLabelTextBlock.y>=g[e].indexLabelTextBlock.y:g[t].indexLabelTextBlock.y<=g[e].indexLabelTextBlock.y)))break;else t=null;return t}function a(e,t){t=t||0;var n=0,r=x.y-1*N,i=x.y+1*N;if(0<=e&&e<h.length){var s=g[e];if(0>t&&s.indexLabelTextBlock.y<r||0<t&&s.indexLabelTextBlock.y>i)return 0;var f=t,l=0,c=0,c=l=l=0;0>f?s.indexLabelTextBlock.y-s.indexLabelTextBlock.height/2>r&&s.indexLabelTextBlock.y-s.indexLabelTextBlock.height/2+f<r&&(f=-(r-(s.indexLabelTextBlock.y-s.indexLabelTextBlock.height/2+f))):s.indexLabelTextBlock.y+s.indexLabelTextBlock.height/2<r&&s.indexLabelTextBlock.y+s.indexLabelTextBlock.height/2+f>i&&(f=s.indexLabelTextBlock.y+s.indexLabelTextBlock.height/2+f-i);f=s.indexLabelTextBlock.y+f;r=0;r="right"===s.hemisphere?x.x+Math.sqrt(Math.pow(N,2)-Math.pow(f-x.y,2)):x.x-Math.sqrt(Math.pow(N,2)-Math.pow(f-x.y,2));c=x.x+T*Math.cos(s.midAngle);l=x.y+T*Math.sin(s.midAngle);l=Math.sqrt(Math.pow(r-c,2)+Math.pow(f-l,2));c=Math.acos(T/N);l=Math.acos((N*N+T*T-l*l)/(2*T*N));f=l<c?f-s.indexLabelTextBlock.y:0;r=null;for(i=1;i<h.length;i++)if(r=(e-i+g.length)%g.length,g[r].hemisphere!==g[e].hemisphere){r=null;break}else if(g[r].indexLabelText&&g[r].hemisphere===g[e].hemisphere&&r!==e&&(0>o(g[r],g[e])||("right"===g[e].hemisphere?g[r].indexLabelTextBlock.y<=g[e].indexLabelTextBlock.y:g[r].indexLabelTextBlock.y>=g[e].indexLabelTextBlock.y)))break;else r=null;c=r;l=u(e);i=r=0;0>f?(i="right"===s.hemisphere?c:l,n=f,null!==i&&(c=-f,f=s.indexLabelTextBlock.y-s.indexLabelTextBlock.height/2-(g[i].indexLabelTextBlock.y+g[i].indexLabelTextBlock.height/2),f-c<y&&(r=-c,v++,i=a(i,r),+i.toFixed(E)>+r.toFixed(E)&&(n=f>y?-(f-y):-(c-(i-r)))))):0<f&&(i="right"===s.hemisphere?l:c,n=f,null!==i&&(c=f,f=g[i].indexLabelTextBlock.y-g[i].indexLabelTextBlock.height/2-(s.indexLabelTextBlock.y+s.indexLabelTextBlock.height/2),f-c<y&&(r=c,v++,i=a(i,r),+i.toFixed(E)<+r.toFixed(E)&&(n=f>y?f-y:c-(r-i)))));n&&(f=s.indexLabelTextBlock.y+n,r=0,r="right"===s.hemisphere?x.x+Math.sqrt(Math.pow(N,2)-Math.pow(f-x.y,2)):x.x-Math.sqrt(Math.pow(N,2)-Math.pow(f-x.y,2)),s.midAngle>Math.PI/2-w&&s.midAngle<Math.PI/2+w?(i=(e-1+g.length)%g.length,i=g[i],c=g[(e+1+g.length)%g.length],"left"===s.hemisphere&&"right"===i.hemisphere&&r>i.indexLabelTextBlock.x?r=i.indexLabelTextBlock.x-15:"right"===s.hemisphere&&"left"===c.hemisphere&&r<c.indexLabelTextBlock.x&&(r=c.indexLabelTextBlock.x+15)):s.midAngle>3*Math.PI/2-w&&s.midAngle<3*Math.PI/2+w&&(i=(e-1+g.length)%g.length,i=g[i],c=g[(e+1+g.length)%g.length],"right"===s.hemisphere&&"left"===i.hemisphere&&r<i.indexLabelTextBlock.x?r=i.indexLabelTextBlock.x+15:"left"===s.hemisphere&&"right"===c.hemisphere&&r>c.indexLabelTextBlock.x&&(r=c.indexLabelTextBlock.x-15)),s.indexLabelTextBlock.y=f,s.indexLabelTextBlock.x=r,s.indexLabelAngle=Math.atan2(s.indexLabelTextBlock.y-x.y,s.indexLabelTextBlock.x-x.x))}return n}function f(){var e=l.plotArea.ctx;e.fillStyle="grey";e.strokeStyle="grey";e.font="16px Arial";e.textBaseline="middle";for(var n=0,i=e=0,e=0;10>e&&(1>e||0<i);e++){T-=i;i=0;if("outside"===c.indexLabelPlacement){N=T*b;for(n=0;n<h.length;n++){var f=g[n];f.indexLabelTextBlock.x=x.x+N*Math.cos(f.midAngle);f.indexLabelTextBlock.y=x.y+N*Math.sin(f.midAngle);f.indexLabelAngle=f.midAngle;f.radius=T}for(var v,m,n=0;n<h.length;n++){var f=g[n],w=u(n);if(null!==w){v=g[n];m=g[w];var S=0,S=o(v,m)-y;if(0>S){for(var C=m=v=0;C<h.length;C++)C!==n&&g[C].hemisphere===f.hemisphere&&(g[C].indexLabelTextBlock.y<f.indexLabelTextBlock.y?v++:m++);C=S/(v+m||1)*m;v=-1*(S-C);var k=m=0;"right"===f.hemisphere?(m=a(n,C),v=-1*(S-m),k=a(w,v),+k.toFixed(E)<+v.toFixed(E)&&+m.toFixed(E)<=+C.toFixed(E)&&a(n,-(v-k))):(m=a(w,C),v=-1*(S-m),k=a(n,v),+k.toFixed(E)<+v.toFixed(E)&&+m.toFixed(E)<=+C.toFixed(E)&&a(w,-(v-k)))}}}}else for(n=0;n<h.length;n++)f=g[n],N="pie"===c.type?.7*T:.8*T,S=x.x+N*Math.cos(f.midAngle),C=x.y+N*Math.sin(f.midAngle),f.indexLabelTextBlock.x=S,f.indexLabelTextBlock.y=C;for(n=0;n<h.length;n++)f=g[n],S=f.indexLabelTextBlock.measureText(),0!==S.height&&0!==S.width&&(S=S=0,"right"===f.hemisphere?(S=d.x2-(f.indexLabelTextBlock.x+f.indexLabelTextBlock.width+p),S*=-1):S=d.x1-(f.indexLabelTextBlock.x-f.indexLabelTextBlock.width-p),0<S&&(Math.abs(f.indexLabelTextBlock.y-f.indexLabelTextBlock.height/2-x.y)<T||Math.abs(f.indexLabelTextBlock.y+f.indexLabelTextBlock.height/2-x.y)<T)&&(S/=Math.abs(Math.cos(f.indexLabelAngle)),9<S&&(S*=.3),S>i&&(i=S)),S=S=0,0<f.indexLabelAngle&&f.indexLabelAngle<Math.PI?(S=d.y2-(f.indexLabelTextBlock.y+f.indexLabelTextBlock.height/2+5),S*=-1):S=d.y1-(f.indexLabelTextBlock.y-f.indexLabelTextBlock.height/2-5),0<S&&Math.abs(f.indexLabelTextBlock.x-x.x)<T&&(S/=Math.abs(Math.sin(f.indexLabelAngle)),9<S&&(S*=.3),S>i&&(i=S)));n=function(e,t,n){for(var r=[],i=0;r.push(g[t]),t!==n;t=(t+1+h.length)%h.length);r.sort(function(e,t){return e.y-t.y});for(t=0;t<r.length;t++)if(n=r[t],i<e)i+=n.indexLabelTextBlock.height,n.indexLabelTextBlock.text="",n.indexLabelText="",n.indexLabelTextBlock.measureText();else break};w=f=-1;for(C=k=0;C<h.length;C++)if(v=g[C],v.indexLabelText){var L=u(C);null!==L&&(m=g[L],S=0,S=o(v,m),0>S&&s(v,m)?(0>f&&(f=C),L!==f&&(w=L),k+=-S):0<k&&(n(k,f,w),w=f=-1,k=0))}0<k&&n(k,f,w)}t(l.animationEnabled&&0===l.renderCount?_?60:30:1);r()}var l=this;if(!(0>=e.dataSeriesIndexes.length)){var c=this.data[e.dataSeriesIndexes[0]],h=c.dataPoints,p=10,d=this.plotArea,v=0,m={frame:0,maxFrames:1},g=[],y=2,b=1.3,w=20/180*Math.PI,E=6,x={x:(d.x2+d.x1)/2,y:(d.y2+d.y1)/2},T="inside"===c.indexLabelPlacement?.95*Math.min(d.width,d.height)/2:.8*Math.min(d.width,d.height)/2,N=T*b;this.pieDoughnutClickHandler=function(e){m.frame===m.maxFrames&&(e=e.dataPoint,e.exploded=e.exploded?!1:!0,t(_?15:4),1<this.dataPoints.length&&i())};n();f()}};b.prototype.animationRequestId=null;b.prototype.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();b.prototype.cancelRequestAnimFrame=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout;E.prototype.registerSpace=function(e,t){"top"===e?this._topOccupied+=t.height:"bottom"===e?this._bottomOccupied+=t.height:"left"===e?this._leftOccupied+=t.width:"right"===e&&(this._rightOccupied+=t.width)};E.prototype.unRegisterSpace=function(e,t){"top"===e?this._topOccupied-=t.height:"bottom"===e?this._bottomOccupied-=t.height:"left"===e?this._leftOccupied-=t.width:"right"===e&&(this._rightOccupied-=t.width)};E.prototype.getFreeSpace=function(){return{x1:this._leftOccupied,y1:this._topOccupied,x2:this.chart.width-this._rightOccupied,y2:this.chart.height-this._bottomOccupied,width:this.chart.width-this._rightOccupied-this._leftOccupied,height:this.chart.height-this._bottomOccupied-this._topOccupied}};E.prototype.reset=function(){this._topOccupied=0;this._bottomOccupied=3;this._rightOccupied=this._leftOccupied=0};e(S,y);S.prototype.render=function(e){e&&this.ctx.save();var t=this.ctx.font;this.ctx.textBaseline=this.textBaseline;var n=0;this._isDirty&&this.measureText(this.ctx);this.ctx.translate(this.x,this.y+n);"middle"===this.textBaseline&&(n=-this._lineHeight/2);this.ctx.font=this._getFontString();this.ctx.rotate(Math.PI/180*this.angle);var r=0,i=this.padding,s=null;(0<this.borderThickness&&this.borderColor||this.backgroundColor)&&this.ctx.roundRect(0,n,this.width,this.height,this.cornerRadius,this.borderThickness,this.backgroundColor,this.borderColor);this.ctx.fillStyle=this.fontColor;for(n=0;n<this._wrappedText.lines.length;n++)s=this._wrappedText.lines[n],"right"===this.horizontalAlign?r=this.width-s.width-this.padding:"left"===this.horizontalAlign?r=this.padding:"center"===this.horizontalAlign&&(r=(this.width-2*this.padding)/2-s.width/2+this.padding),this.ctx.fillText(s.text,r,i),i+=s.height;this.ctx.font=t;e&&this.ctx.restore()};S.prototype.setText=function(e){this.text=e;this._isDirty=!0;this._wrappedText=null};S.prototype.measureText=function(){if(null===this.maxWidth)throw"Please set maxWidth and height for TextBlock";this._wrapText(this.ctx);this._isDirty=!1;return{width:this.width,height:this.height}};S.prototype._getLineWithWidth=function(e,t,n){e=String(e);if(!e)return{text:"",width:0};var r=n=0,i=e.length-1,s=Infinity;for(this.ctx.font=this._getFontString();r<=i;){var s=Math.floor((r+i)/2),o=e.substr(0,s+1);n=this.ctx.measureText(o).width;if(n<t)r=s+1;else if(n>t)i=s-1;else break}n>t&&1<o.length&&(o=o.substr(0,o.length-1),n=this.ctx.measureText(o).width);t=!0;if(o.length===e.length||" "===e[o.length])t=!1;t&&(e=o.split(" "),1<e.length&&e.pop(),o=e.join(" "),n=this.ctx.measureText(o).width);return{text:o,width:n}};S.prototype._wrapText=function(){var e=new String(o(this.text)),t=[],n=this.ctx.font,r=0,i=0;for(this.ctx.font=this._getFontString();0<e.length;){var s=this.maxHeight-2*this.padding,u=this._getLineWithWidth(e,this.maxWidth-2*this.padding,!1);u.height=this._lineHeight;t.push(u);i=Math.max(i,u.width);r+=u.height;e=o(e.slice(u.text.length,e.length));s&&r>s&&(u=t.pop(),r-=u.height)}this._wrappedText={lines:t,width:i,height:r};this.width=i+2*this.padding;this.height=r+2*this.padding;this.ctx.font=n};S.prototype._getFontString=function(){return d("",this,null)};e(x,y);x.prototype.render=function(){if(this.text){var e=this.chart.layoutManager.getFreeSpace(),t=0,n=0,r=0,i=0,s=0,o,u;"top"===this.verticalAlign||"bottom"===this.verticalAlign?(i=e.width-2*this.margin,s=.5*e.height-2*this.margin,r=0):"center"===this.verticalAlign&&("left"===this.horizontalAlign||"right"===this.horizontalAlign?(i=e.height-2*this.margin,s=.5*e.width-2*this.margin):"center"===this.horizontalAlign&&(i=e.width-2*this.margin,s=.5*e.height-2*this.margin));var s=new S(this.ctx,{fontSize:this.fontSize,fontFamily:this.fontFamily,fontColor:this.fontColor,fontStyle:this.fontStyle,fontWeight:this.fontWeight,horizontalAlign:this.horizontalAlign,verticalAlign:this.verticalAlign,borderColor:this.borderColor,borderThickness:this.borderThickness,backgroundColor:this.backgroundColor,maxWidth:i,maxHeight:s,cornerRadius:this.cornerRadius,text:this.text,padding:this.padding,textBaseline:"top"}),a=s.measureText();"top"===this.verticalAlign||"bottom"===this.verticalAlign?("top"===this.verticalAlign?(n=this.margin,u="top"):"bottom"===this.verticalAlign&&(n=e.y2-this.margin-a.height,u="bottom"),"left"===this.horizontalAlign?t=e.x1+this.margin:"center"===this.horizontalAlign?t=e.x1+(i/2-a.width/2)+this.margin:"right"===this.horizontalAlign&&(t=e.x2-this.margin-a.width),o=this.horizontalAlign,this.width=a.width,this.height=a.height):"center"===this.verticalAlign&&("left"===this.horizontalAlign?(t=e.x1+this.margin,n=e.y2-this.margin-(i/2-a.width/2),r=-90,u="left",this.width=a.height,this.height=a.width):"right"===this.horizontalAlign?(t=e.x2-this.margin,n=e.y1+this.margin+(i/2-a.width/2),r=90,u="right",this.width=a.height,this.height=a.width):"center"===this.horizontalAlign&&(n=e.y1+(e.height/2-a.height/2),t=e.x1+(e.width/2-a.width/2),u="center",this.width=a.width,this.height=a.height),o="center");s.x=t;s.y=n;s.angle=r;s.horizontalAlign=o;s.render(!0);this.chart.layoutManager.registerSpace(u,{width:this.width+2*this.margin,height:this.height+2*this.margin});this.bounds={x1:t,y1:n,x2:t+this.width,y2:n+this.height};this.ctx.textBaseline="top"}};e(T,y);T.prototype.render=function(){var e=this.chart.layoutManager.getFreeSpace(),t=null,n=0,r=0,i=0,s=0,o=[],u=[];"top"===this.verticalAlign||"bottom"===this.verticalAlign?(this.orientation="horizontal",t=this.verticalAlign,i=.9*e.width,s=.5*e.height):"center"===this.verticalAlign&&(this.orientation="vertical",t=this.horizontalAlign,i=.5*e.width,s=.9*e.height);for(var a=0;a<this.dataSeries.length;a++){var f=this.dataSeries[a],c=f.legendMarkerType?f.legendMarkerType:"line"!==f.type&&"stepLine"!==f.type&&"spline"!==f.type&&"scatter"!==f.type&&"bubble"!==f.type||!f.markerType?C.getDefaultLegendMarker(f.type):f.markerType,h=f.legendText?f.legendText:f.name,p=f.legendMarkerColor?f.legendMarkerColor:f.markerColor?f.markerColor:f._colorSet[0],d=f.markerSize||"line"!==f.type&&"stepLine"!==f.type&&"spline"!==f.type?.6*this.lineHeight:0;if("pie"!==f.type&&"doughnut"!==f.type)c={markerType:c,markerColor:p,text:h,textBlock:null,chartType:f.type,markerSize:d,lineColor:f._colorSet[0],dataSeriesIndex:a,dataPointIndex:null},o.push(c);else for(var v=0;v<f.dataPoints.length;v++)d=f.dataPoints[v],c=d.legendMarkerType?d.legendMarkerType:f.legendMarkerType?f.legendMarkerType:C.getDefaultLegendMarker(f.type),h=d.legendText?d.legendText:f.legendText?f.legendText:d.name?d.name:"DataPoint: "+(v+1),p=d.markerColor?d.markerColor:f.markerColor?f.markerColor:d.color?d.color:f.color?f.color:f._colorSet[v%f._colorSet.length],d=0!==d.markerSize&&(0!==f.markerSize||d.markerSize)||"line"!==f.type&&"stepLine"!==f.type&&"spline"!==f.type?.6*this.lineHeight:0,c={markerType:c,markerColor:p,text:h,textBlock:null,chartType:f.type,markerSize:d,dataSeriesIndex:a,dataPointIndex:v},o.push(c)}if(0<o.length){f=null;for(a=v=0;a<o.length;a++){c=o[a];if("horizontal"===this.orientation){c.textBlock=new S(this.ctx,{x:0,y:0,maxWidth:i,maxHeight:this.lineHeight,angle:0,text:c.text,horizontalAlign:"left",fontSize:this.fontSize,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontColor:this.fontColor,fontStyle:this.fontStyle,textBaseline:"top"});c.textBlock.measureText();if(!f||f.width+c.textBlock.width+(0===f.width?0:this.horizontalSpacing)>i)f={items:[],width:0},u.push(f),this.height=u.length*(c.textBlock.height+5);c.textBlock.x=f.width;c.textBlock.y=0;f.width+=Math.round(c.textBlock.width+c.textBlock._lineHeight+(0===f.width?0:.5*c.textBlock._lineHeight))}else this.height+this.lineHeight<s?(f={items:[],width:0},u.push(f),this.height=u.length*this.lineHeight):(f=u[v],v=(v+1)%u.length),c.textBlock=new S(this.ctx,{x:0,y:0,maxWidth:i,maxHeight:1.5*this.fontSize,angle:0,text:c.text,horizontalAlign:"left",fontSize:this.fontSize,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontColor:this.fontColor,fontStyle:this.fontStyle,textBaseline:"top"}),c.textBlock.measureText(),c.textBlock.x=f.width,c.textBlock.y=0,f.width+=c.textBlock.width+c.textBlock._lineHeight+(0===f.width?0:.5*c.textBlock._lineHeight);f.items.push(c);this.width=Math.max(f.width,this.width)}this.height=u.length*this.lineHeight}"top"===this.verticalAlign?(r="left"===this.horizontalAlign?e.x1+2:"right"===this.horizontalAlign?e.x2-this.width-2:e.x1+e.width/2-this.width/2,n=e.y1):"center"===this.verticalAlign?(r="left"===this.horizontalAlign?e.x1+2:"right"===this.horizontalAlign?e.x2-this.width-2:e.x1+e.width/2-this.width/2,n=e.y1+e.height/2-this.height/2):"bottom"===this.verticalAlign&&(r="left"===this.horizontalAlign?e.x1+2:"right"===this.horizontalAlign?e.x2-this.width-2:e.x1+e.width/2-this.width/2,n=e.y2-this.height-5);this.items=o;for(a=0;a<this.items.length;a++)c=o[a],c.id=++this.chart._eventManager.lastObjectId,this.chart._eventManager.objectMap[c.id]={id:c.id,objectType:"legendItem",legendItemIndex:a,dataSeriesIndex:c.dataSeriesIndex,dataPointIndex:c.dataPointIndex};for(a=0;a<u.length;a++)for(f=u[a],e=0;e<f.items.length;e++){c=f.items[e];s=c.textBlock.x+r+(0===e?.2*d:.4*this.lineHeight+.2*d);o=n+a*this.lineHeight;i=s;this.chart.data[c.dataSeriesIndex].visible||(this.ctx.globalAlpha=.5);if("line"===c.chartType||"stepLine"===c.chartType||"spline"===c.chartType)this.ctx.strokeStyle=c.lineColor,this.ctx.lineWidth=Math.ceil(this.lineHeight/8),this.ctx.beginPath(),this.ctx.moveTo(s-.1*this.lineHeight,o+this.lineHeight/2),this.ctx.lineTo(s+.7*this.lineHeight,o+this.lineHeight/2),this.ctx.stroke(),i-=.1*this.lineHeight;K.drawMarker(s+d/2,o+this.lineHeight/2,this.ctx,c.markerType,d,c.markerColor,null,0);c.textBlock.x=s+Math.round(.9*this.lineHeight);c.textBlock.y=o;c.textBlock.render(!0);this.chart.data[c.dataSeriesIndex].visible||(this.ctx.globalAlpha=1);s=l(c.id);this.ghostCtx.fillStyle=s;this.ghostCtx.beginPath();this.ghostCtx.fillRect(i,c.textBlock.y,c.textBlock.x+c.textBlock.width-i,c.textBlock.height);c.x1=this.chart._eventManager.objectMap[c.id].x1=i;c.y1=this.chart._eventManager.objectMap[c.id].y1=c.textBlock.y;c.x2=this.chart._eventManager.objectMap[c.id].x2=c.textBlock.x+c.textBlock.width;c.y2=this.chart._eventManager.objectMap[c.id].y2=c.textBlock.y+c.textBlock.height}this.chart.layoutManager.registerSpace(t,{width:this.width+2+2,height:this.height+5+5});this.bounds={x1:r,y1:n,x2:r+this.width,y2:n+this.height}};e(N,y);N.prototype.render=function(){var e=this.chart.layoutManager.getFreeSpace();this.ctx.fillStyle="red";this.ctx.fillRect(e.x1,e.y1,e.x2,e.y2)};e(C,y);C.prototype.getDefaultAxisPlacement=function(){var e=this.type;if("column"===e||"line"===e||"stepLine"===e||"spline"===e||"area"===e||"stepArea"===e||"splineArea"===e||"stackedColumn"===e||"stackedLine"===e||"bubble"===e||"scatter"===e||"stackedArea"===e||"stackedColumn100"===e||"stackedLine100"===e||"stackedArea100"===e)return"normal";if("bar"===e||"stackedBar"===e||"stackedBar100"===e)return"xySwapped";if("pie"===e||"doughnut"===e)return"none";window.console.log("Unknown Chart Type: "+e);return null};C.getDefaultLegendMarker=function(e){if("column"===e||"stackedColumn"===e||"stackedLine"===e||"bar"===e||"stackedBar"===e||"stackedBar100"===e||"bubble"===e||"scatter"===e||"stackedColumn100"===e||"stackedLine100"===e||"stepArea"===e)return"square";if("line"===e||"stepLine"===e||"spline"===e||"pie"===e||"doughnut"===e)return"circle";if("area"===e||"splineArea"===e||"stackedArea"===e||"stackedArea100"===e)return"triangle";window.console.log("Unknown Chart Type: "+e);return null};C.prototype.getDataPointAtX=function(e,t){if(!this.dataPoints||0===this.dataPoints.length)return null;var n={dataPoint:null,distance:Infinity,index:NaN},r=null,i=0,s=0,o=1,u=Infinity,a=0,f=0,l=0;"none"!==this.chart.plotInfo.axisPlacement&&(l=this.dataPoints[this.dataPoints.length-1].x-this.dataPoints[0].x,l=0<l?(this.dataPoints.length-1)/l*(e-this.dataPoints[0].x)>>0:0);for(;;){s=0<o?l+i:l-i;if(0<=s&&s<this.dataPoints.length){var r=this.dataPoints[s],c=Math.abs(r.x-e);c<n.distance&&(n.dataPoint=r,n.distance=c,n.index=s);r=Math.abs(r.x-e);r<=u?u=r:0<o?a++:f++;if(1e3<a&&1e3<f)break}else if(0>l-i&&l+i>=this.dataPoints.length)break;-1===o?(i++,o=1):o=-1}return t||n.dataPoint.x!==e?t&&null!==n.dataPoint?n:null:n};C.prototype.getDataPointAtXY=function(e,t,n){if(!this.dataPoints||0===this.dataPoints.length)return null;n=n||!1;var r=[],i=0,s=0,o=1,u=!1,a=Infinity,f=0,l=0,c=0;"none"!==this.chart.plotInfo.axisPlacement&&(c=this.chart.axisX.getXValueAt({x:e,y:t}),s=this.dataPoints[this.dataPoints.length-1].x-this.dataPoints[0].x,c=0<s?(this.dataPoints.length-1)/s*(c-this.dataPoints[0].x)>>0:0);for(;;){s=0<o?c+i:c-i;if(0<=s&&s<this.dataPoints.length){var h=this.chart._eventManager.objectMap[this.dataPointIds[s]],p=this.dataPoints[s];if(h){switch(this.type){case"column":case"stackedColumn":case"stackedColumn100":case"bar":case"stackedBar":case"stackedBar100":e>=h.x1&&e<=h.x2&&t>=h.y1&&t<=h.y2&&(r.push({dataPoint:p,dataPointIndex:s,dataSeries:this,distance:Math.min(Math.abs(h.x1-e),Math.abs(h.x2-e),Math.abs(h.y1-t),Math.abs(h.y2-t))}),u=!0);break;case"line":case"stepLine":case"spline":case"area":case"stepArea":case"stackedArea":case"stackedArea100":case"splineArea":case"scatter":var d=v("markerSize",p,this)||4,m=n?20:d,g=Math.sqrt(Math.pow(h.x1-e,2)+Math.pow(h.y1-t,2));g<=m&&r.push({dataPoint:p,dataPointIndex:s,dataSeries:this,distance:g});s=Math.abs(h.x1-e);s<=a?a=s:0<o?f++:l++;g<=d/2&&(u=!0);break;case"bubble":d=h.size;g=Math.sqrt(Math.pow(h.x1-e,2)+Math.pow(h.y1-t,2));g<=d/2&&(r.push({dataPoint:p,dataPointIndex:s,dataSeries:this,distance:g}),u=!0);break;case"pie":case"doughnut":d=h.center,m="doughnut"===this.type?.6*h.radius:0,g=Math.sqrt(Math.pow(d.x-e,2)+Math.pow(d.y-t,2)),g<h.radius&&g>m&&(g=Math.atan2(t-d.y,e-d.x),0>g&&(g+=2*Math.PI),g=(180*(g/Math.PI)%360+360)%360,d=(180*(h.startAngle/Math.PI)%360+360)%360,m=(180*(h.endAngle/Math.PI)%360+360)%360,0===m&&1<h.endAngle&&(m=360),d>m&&(m+=360,g<d&&(g+=360)),g>d&&g<m&&(r.push({dataPoint:p,dataPointIndex:s,dataSeries:this,distance:0}),u=!0))}if(u||1e3<f&&1e3<l)break}}else if(0>c-i&&c+i>=this.dataPoints.length)break;-1===o?(i++,o=1):o=-1}e=null;for(t=0;t<r.length;t++)e?r[t].distance<=e.distance&&(e=r[t]):e=r[t];return e};C.prototype.getMarkerProperties=function(e,t,n,r){var i=this.dataPoints;return{x:t,y:n,ctx:r,type:i[e].markerType?i[e].markerType:this.markerType,size:i[e].markerSize?i[e].markerSize:this.markerSize,color:i[e].markerColor?i[e].markerColor:this.markerColor?this.markerColor:i[e].color?i[e].color:this.color?this.color:this._colorSet[e%this._colorSet.length],borderColor:i[e].markerBorderColor?i[e].markerBorderColor:this.markerBorderColor?this.markerBorderColor:null,borderThickness:i[e].markerBorderThickness?i[e].markerBorderThickness:this.markerBorderThickness?this.markerBorderThickness:null}};e(k,y);k.prototype.createLabels=function(){var e,t=0,r,i=0,s=0,t=0;if("bottom"===this._position||"top"===this._position)t=this.lineCoordinates.width/Math.abs(this.maximum-this.minimum)*this.interval,i=this.labelAutoFit?"undefined"===typeof this._options.labelMaxWidth?.9*t>>0:this.labelMaxWidth:"undefined"===typeof this._options.labelMaxWidth?.7*this.chart.width>>0:this.labelMaxWidth,s="undefined"===typeof this._options.labelWrap||this.labelWrap?.5*this.chart.height>>0:1.5*this.labelFontSize;else if("left"===this._position||"right"===this._position)t=this.lineCoordinates.height/Math.abs(this.maximum-this.minimum)*this.interval,i=this.labelAutoFit?"undefined"===typeof this._options.labelMaxWidth?.3*this.chart.width>>0:this.labelMaxWidth:"undefined"===typeof this._options.labelMaxWidth?.5*this.chart.width>>0:this.labelMaxWidth,s="undefined"===typeof this._options.labelWrap||this.labelWrap?2*t>>0:1.5*this.labelFontSize;if("axisX"===this.type&&"dateTime"===this.chart.plotInfo.axisXValueType)for(r=n(new Date(this.maximum),this.interval,this.intervalType),t=this.intervalStartPosition;t<r;n(t,this.interval,this.intervalType))e="axisX"===this.type&&this.labels[t]?this.labels[t]:q(t,this.valueFormatString,this.chart._cultureInfo),e=new S(this.ctx,{x:0,y:0,maxWidth:i,maxHeight:s,angle:this.labelAngle,text:this.prefix+e+this.suffix,horizontalAlign:"left",fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle"}),this._labels.push({position:t.getTime(),textBlock:e,effectiveHeight:null});else{r=this.maximum;if(this.labels&&this.labels.length){e=Math.ceil(this.interval);for(var o=Math.ceil(this.intervalStartPosition),u=!1,t=o;t<this.maximum;t+=e)if(this.labels[t])u=!0;else{u=!1;break}u&&(this.interval=e,this.intervalStartPosition=o)}for(t=this.intervalStartPosition;t<=r;t+=this.interval)e="axisX"===this.type&&this.labels[t]?this.labels[t]:R(t,this.valueFormatString,this.chart._cultureInfo),e=new S(this.ctx,{x:0,y:0,maxWidth:i,maxHeight:s,angle:this.labelAngle,text:this.prefix+e+this.suffix,horizontalAlign:"left",fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle",borderThickness:0}),this._labels.push({position:t,textBlock:e,effectiveHeight:null})}for(t=0;t<this.stripLines.length;t++)r=this.stripLines[t],e=new S(this.ctx,{x:0,y:0,backgroundColor:r.labelBackgroundColor,maxWidth:i,maxHeight:s,angle:this.labelAngle,text:r.label,horizontalAlign:"left",fontSize:r.labelFontSize,fontFamily:r.labelFontFamily,fontWeight:r.labelFontWeight,fontColor:r.labelFontColor,fontStyle:r.labelFontStyle,textBaseline:"middle",borderThickness:0}),this._labels.push({position:r.value,textBlock:e,effectiveHeight:null,stripLine:r})};k.prototype.createLabelsAndCalculateWidth=function(){var e=0;this._labels=[];if("left"===this._position||"right"===this._position)for(this.createLabels(),i=0;i<this._labels.length;i++){var t=this._labels[i].textBlock.measureText(),n=0,n=0===this.labelAngle?t.width:t.width*Math.cos(Math.PI/180*Math.abs(this.labelAngle))+t.height/2*Math.sin(Math.PI/180*Math.abs(this.labelAngle));e<n&&(e=n);this._labels[i].effectiveWidth=n}return(this.title?c(this.titleFontFamily,this.titleFontSize,this.titleFontWeight)+2:0)+e+this.tickLength+5};k.prototype.createLabelsAndCalculateHeight=function(){var e=0;this._labels=[];var t,n=0;this.createLabels();if("bottom"===this._position||"top"===this._position)for(n=0;n<this._labels.length;n++){t=this._labels[n].textBlock;t=t.measureText();var r=0,r=0===this.labelAngle?t.height:t.width*Math.sin(Math.PI/180*Math.abs(this.labelAngle))+t.height/2*Math.cos(Math.PI/180*Math.abs(this.labelAngle));e<r&&(e=r);this._labels[n].effectiveHeight=r}return(this.title?c(this.titleFontFamily,this.titleFontSize,this.titleFontWeight)+2:0)+e+this.tickLength+5};k.setLayoutAndRender=function(e,t,n,r,i){var s,o,u,a=e.chart,f=a.ctx;e.calculateAxisParameters();t&&t.calculateAxisParameters();n&&n.calculateAxisParameters();if(t&&n&&"undefined"===typeof t._options.maximum&&"undefined"===typeof t._options.minimum&&"undefined"===typeof t._options.interval&&"undefined"===typeof n._options.maximum&&"undefined"===typeof n._options.minimum&&"undefined"===typeof n._options.interval){u=(t.maximum-t.minimum)/t.interval;var l=(n.maximum-n.minimum)/n.interval;u>l?n.maximum=n.interval*u+n.minimum:l>u&&(t.maximum=t.interval*l+t.minimum)}l=t?t.margin:0;if("normal"===r){e.lineCoordinates={};var c=Math.ceil(t?t.createLabelsAndCalculateWidth():0);s=Math.round(i.x1+c+l);e.lineCoordinates.x1=s;l=Math.ceil(n?n.createLabelsAndCalculateWidth():0);o=Math.round(i.x2-l>e.chart.width-10?e.chart.width-10:i.x2-l);e.lineCoordinates.x2=o;e.lineCoordinates.width=Math.abs(o-s);var h=Math.ceil(e.createLabelsAndCalculateHeight());r=Math.round(i.y2-h-e.margin);u=Math.round(i.y2-e.margin);e.lineCoordinates.y1=r;e.lineCoordinates.y2=r;e.boundingRect={x1:s,y1:r,x2:o,y2:u,width:o-s,height:u-r};t&&(s=Math.round(i.x1+t.margin),r=Math.round(10>i.y1?10:i.y1),o=Math.round(i.x1+c+t.margin),u=Math.round(i.y2-h-e.margin),t.lineCoordinates={x1:o,y1:r,x2:o,y2:u,height:Math.abs(u-r)},t.boundingRect={x1:s,y1:r,x2:o,y2:u,width:o-s,height:u-r});n&&(s=Math.round(e.lineCoordinates.x2),r=Math.round(10>i.y1?10:i.y1),o=Math.round(s+l+n.margin),u=Math.round(i.y2-h-e.margin),n.lineCoordinates={x1:s,y1:r,x2:s,y2:u,height:Math.abs(u-r)},n.boundingRect={x1:s,y1:r,x2:o,y2:u,width:o-s,height:u-r});e.calculateValueToPixelconversionParameters();t&&t.calculateValueToPixelconversionParameters();n&&n.calculateValueToPixelconversionParameters();f.save();f.rect(e.boundingRect.x1-40,e.boundingRect.y1,e.boundingRect.width+80,e.boundingRect.height);f.clip();e.renderLabelsTicksAndTitle();f.restore();t&&t.renderLabelsTicksAndTitle();n&&n.renderLabelsTicksAndTitle()}else{c=Math.ceil(e.createLabelsAndCalculateWidth());t&&(t.lineCoordinates={},s=Math.round(i.x1+c+e.margin),o=Math.round(i.x2>t.chart.width-10?t.chart.width-10:i.x2),t.lineCoordinates.x1=s,t.lineCoordinates.x2=o,t.lineCoordinates.width=Math.abs(o-s));n&&(n.lineCoordinates={},s=Math.round(i.x1+c+e.margin),o=Math.round(i.x2>n.chart.width-10?n.chart.width-10:i.x2),n.lineCoordinates.x1=s,n.lineCoordinates.x2=o,n.lineCoordinates.width=Math.abs(o-s));var h=Math.ceil(t?t.createLabelsAndCalculateHeight():0),p=Math.ceil(n?n.createLabelsAndCalculateHeight():0);t&&(r=Math.round(i.y2-h-t.margin),u=Math.round(i.y2-l>t.chart.height-10?t.chart.height-10:i.y2-l),t.lineCoordinates.y1=r,t.lineCoordinates.y2=r,t.boundingRect={x1:s,y1:r,x2:o,y2:u,width:o-s,height:h});n&&(r=Math.round(i.y1+n.margin),u=i.y1+n.margin+p,n.lineCoordinates.y1=u,n.lineCoordinates.y2=u,n.boundingRect={x1:s,y1:r,x2:o,y2:u,width:o-s,height:p});s=Math.round(i.x1+e.margin);r=Math.round(n?n.lineCoordinates.y2:10>i.y1?10:i.y1);o=Math.round(i.x1+c+e.margin);u=Math.round(t?t.lineCoordinates.y1:i.y2-l>e.chart.height-10?e.chart.height-10:i.y2-l);e.lineCoordinates={x1:o,y1:r,x2:o,y2:u,height:Math.abs(u-r)};e.boundingRect={x1:s,y1:r,x2:o,y2:u,width:o-s,height:u-r};e.calculateValueToPixelconversionParameters();t&&t.calculateValueToPixelconversionParameters();n&&n.calculateValueToPixelconversionParameters();t&&t.renderLabelsTicksAndTitle();n&&n.renderLabelsTicksAndTitle();e.renderLabelsTicksAndTitle()}a.preparePlotArea();i=e.chart.plotArea;f.save();f.rect(i.x1,i.y1,Math.abs(i.x2-i.x1),Math.abs(i.y2-i.y1));f.clip();e.renderStripLinesOfThicknessType("value");t&&t.renderStripLinesOfThicknessType("value");n&&n.renderStripLinesOfThicknessType("value");e.renderInterlacedColors();t&&t.renderInterlacedColors();n&&n.renderInterlacedColors();f.restore();e.renderGrid();t&&t.renderGrid();n&&n.renderGrid();e.renderAxisLine();t&&t.renderAxisLine();n&&n.renderAxisLine();e.renderStripLinesOfThicknessType("pixel");t&&t.renderStripLinesOfThicknessType("pixel");n&&n.renderStripLinesOfThicknessType("pixel")};k.prototype.renderLabelsTicksAndTitle=function(){var e=!1,t=0,n=1,r=0;0!==this.labelAngle&&360!==this.labelAngle&&(n=1.2);if("undefined"===typeof this._options.interval){if("bottom"===this._position||"top"===this._position){for(i=0;i<this._labels.length;i++)s=this._labels[i],s.position<this.minimum||s.stripLine||(s=s.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)+s.textBlock.height*Math.sin(Math.PI/180*this.labelAngle),t+=s);t>this.lineCoordinates.width*n&&(e=!0)}if("left"===this._position||"right"===this._position){for(i=0;i<this._labels.length;i++)s=this._labels[i],s.position<this.minimum||s.stripLine||(s=s.textBlock.height*Math.cos(Math.PI/180*this.labelAngle)+s.textBlock.width*Math.sin(Math.PI/180*this.labelAngle),t+=s);t>this.lineCoordinates.height*n&&(e=!0)}}if("bottom"===this._position){for(var i=0,s,i=0;i<this._labels.length;i++)if(s=this._labels[i],!(s.position<this.minimum||s.position>this.maximum)){t=this.getPixelCoordinatesOnAxis(s.position);if(this.tickThickness&&!this._labels[i].stripLine||this._labels[i].stripLine&&"pixel"===this._labels[i].stripLine._thicknessType)this._labels[i].stripLine?(n=this._labels[i].stripLine,this.ctx.lineWidth=n.thickness,this.ctx.strokeStyle=n.color):(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor),n=1===this.ctx.lineWidth%2?(t.x<<0)+.5:t.x<<0,this.ctx.beginPath(),this.ctx.moveTo(n,t.y<<0),this.ctx.lineTo(n,t.y+this.tickLength<<0),this.ctx.stroke();if(!e||0===r++%2||this._labels[i].stripLine)0===s.textBlock.angle?(t.x-=s.textBlock.width/2,t.y+=this.tickLength+s.textBlock.fontSize/2):(t.x-=0>this.labelAngle?s.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0,t.y+=this.tickLength+Math.abs(0>this.labelAngle?s.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)-5:5)),s.textBlock.x=t.x,s.textBlock.y=t.y,s.textBlock.render(!0)}this.title&&(this._titleTextBlock=new S(this.ctx,{x:this.lineCoordinates.x1,y:this.boundingRect.y2-this.titleFontSize-5,maxWidth:this.lineCoordinates.width,maxHeight:1.5*this.titleFontSize,angle:0,text:this.title,horizontalAlign:"center",fontSize:this.titleFontSize,fontFamily:this.titleFontFamily,fontWeight:this.titleFontWeight,fontColor:this.titleFontColor,fontStyle:this.titleFontStyle,textBaseline:"top"}),this._titleTextBlock.measureText(),this._titleTextBlock.x=this.lineCoordinates.x1+this.lineCoordinates.width/2-this._titleTextBlock.width/2,this._titleTextBlock.y=this.boundingRect.y2-this._titleTextBlock.height-2,this._titleTextBlock.render(!0))}else if("top"===this._position){for(i=0;i<this._labels.length;i++)if(s=this._labels[i],!(s.position<this.minimum||s.position>this.maximum)){t=this.getPixelCoordinatesOnAxis(s.position);if(this.tickThickness&&!this._labels[i].stripLine||this._labels[i].stripLine&&"pixel"===this._labels[i].stripLine._thicknessType)this._labels[i].stripLine?(n=this._labels[i].stripLine,this.ctx.lineWidth=n.thickness,this.ctx.strokeStyle=n.color):(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor),n=1===this.ctx.lineWidth%2?(t.x<<0)+.5:t.x<<0,this.ctx.beginPath(),this.ctx.moveTo(n,t.y<<0),this.ctx.lineTo(n,t.y-this.tickLength<<0),this.ctx.stroke();if(!e||0===r++%2||this._labels[i].stripLine)0===s.textBlock.angle?(t.x-=s.textBlock.width/2,t.y-=this.tickLength+s.textBlock.height/2):(t.x-=0<this.labelAngle?s.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0,t.y-=this.tickLength+Math.abs(0<this.labelAngle?s.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)+5:5)),s.textBlock.x=t.x,s.textBlock.y=t.y,s.textBlock.render(!0)}this.title&&(this._titleTextBlock=new S(this.ctx,{x:this.lineCoordinates.x1,y:this.boundingRect.y1,maxWidth:this.lineCoordinates.width,maxHeight:1.5*this.titleFontSize,angle:0,text:this.title,horizontalAlign:"center",fontSize:this.titleFontSize,fontFamily:this.titleFontFamily,fontWeight:this.titleFontWeight,fontColor:this.titleFontColor,fontStyle:this.titleFontStyle,textBaseline:"top"}),this._titleTextBlock.measureText(),this._titleTextBlock.x=this.lineCoordinates.x1+this.lineCoordinates.width/2-this._titleTextBlock.width/2,this._titleTextBlock.render(!0))}else if("left"===this._position){for(i=0;i<this._labels.length;i++)if(s=this._labels[i],!(s.position<this.minimum||s.position>this.maximum)){t=this.getPixelCoordinatesOnAxis(s.position);if(this.tickThickness&&!this._labels[i].stripLine||this._labels[i].stripLine&&"pixel"===this._labels[i].stripLine._thicknessType)this._labels[i].stripLine?(n=this._labels[i].stripLine,this.ctx.lineWidth=n.thickness,this.ctx.strokeStyle=n.color):(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor),n=1===this.ctx.lineWidth%2?(t.y<<0)+.5:t.y<<0,this.ctx.beginPath(),this.ctx.moveTo(t.x<<0,n),this.ctx.lineTo(t.x-this.tickLength<<0,n),this.ctx.stroke();if(!e||0===r++%2||this._labels[i].stripLine)s.textBlock.x=t.x-s.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-this.tickLength-5,s.textBlock.y=0===this.labelAngle?t.y-s.textBlock.height/2+this.labelFontSize/2:t.y-s.textBlock.width*Math.sin(Math.PI/180*this.labelAngle),s.textBlock.render(!0)}this.title&&(this._titleTextBlock=new S(this.ctx,{x:this.boundingRect.x1+5,y:this.lineCoordinates.y2,maxWidth:this.lineCoordinates.height,maxHeight:1.5*this.titleFontSize,angle:-90,text:this.title,horizontalAlign:"center",fontSize:this.titleFontSize,fontFamily:this.titleFontFamily,fontWeight:this.titleFontWeight,fontColor:this.titleFontColor,fontStyle:this.titleFontStyle,textBaseline:"top"}),this._titleTextBlock.measureText(),this._titleTextBlock.y=this.lineCoordinates.height/2+this._titleTextBlock.width/2+this.lineCoordinates.y1,this._titleTextBlock.render(!0))}else if("right"===this._position){for(i=0;i<this._labels.length;i++)if(s=this._labels[i],!(s.position<this.minimum||s.position>this.maximum)){t=this.getPixelCoordinatesOnAxis(s.position);if(this.tickThickness&&!this._labels[i].stripLine||this._labels[i].stripLine&&"pixel"===this._labels[i].stripLine._thicknessType)this._labels[i].stripLine?(n=this._labels[i].stripLine,this.ctx.lineWidth=n.thickness,this.ctx.strokeStyle=n.color):(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor),n=1===this.ctx.lineWidth%2?(t.y<<0)+.5:t.y<<0,this.ctx.beginPath(),this.ctx.moveTo(t.x<<0,n),this.ctx.lineTo(t.x+this.tickLength<<0,n),this.ctx.stroke();if(!e||0===r++%2||this._labels[i].stripLine)s.textBlock.x=t.x+this.tickLength+5,s.textBlock.y=0===this.labelAngle?t.y-s.textBlock.height/2+this.labelFontSize/2:t.y,s.textBlock.render(!0)}this.title&&(this._titleTextBlock=new S(this.ctx,{x:this.boundingRect.x2-5,y:this.lineCoordinates.y2,maxWidth:this.lineCoordinates.height,maxHeight:1.5*this.titleFontSize,angle:90,text:this.title,horizontalAlign:"center",fontSize:this.titleFontSize,fontFamily:this.titleFontFamily,fontWeight:this.titleFontWeight,fontColor:this.titleFontColor,fontStyle:this.titleFontStyle,textBaseline:"top"}),this._titleTextBlock.measureText(),this._titleTextBlock.y=this.lineCoordinates.height/2-this._titleTextBlock.width/2+this.lineCoordinates.y1,this._titleTextBlock.render(!0))}};k.prototype.renderInterlacedColors=function(){var e=this.chart.plotArea.ctx,t,n,r=this.chart.plotArea,i=0;t=!0;if(("bottom"===this._position||"top"===this._position)&&this.interlacedColor)for(e.fillStyle=this.interlacedColor,i=0;i<this._labels.length;i++)this._labels[i].stripLine||(t?(t=this.getPixelCoordinatesOnAxis(this._labels[i].position),n=i+1>=this._labels.length?this.getPixelCoordinatesOnAxis(this.maximum):this.getPixelCoordinatesOnAxis(this._labels[i+1].position),e.fillRect(t.x,r.y1,Math.abs(n.x-t.x),Math.abs(r.y1-r.y2)),t=!1):t=!0);else if(("left"===this._position||"right"===this._position)&&this.interlacedColor)for(e.fillStyle=this.interlacedColor,i=0;i<this._labels.length;i++)this._labels[i].stripLine||(t?(n=this.getPixelCoordinatesOnAxis(this._labels[i].position),t=i+1>=this._labels.length?this.getPixelCoordinatesOnAxis(this.maximum):this.getPixelCoordinatesOnAxis(this._labels[i+1].position),e.fillRect(r.x1,t.y,Math.abs(r.x1-r.x2),Math.abs(t.y-n.y)),t=!1):t=!0);e.beginPath()};k.prototype.renderStripLinesOfThicknessType=function(e){if(this.stripLines&&0<this.stripLines.length&&e)for(var t=this.chart.plotArea.ctx,n=0,n=0;n<this.stripLines.length;n++){var r=this.stripLines[n];if(r._thicknessType===e&&("pixel"!==e||!(r.value<this.minimum||r.value>this.maximum))){var i=this.getPixelCoordinatesOnAxis(r.value),s=Math.abs("pixel"===e?r.thickness:this.conversionParameters.pixelPerUnit*r.thickness);if(!(0>=s)){t.strokeStyle=r.color;t.beginPath();l(r.id);var o,u,a,f;t.lineWidth=s;if("bottom"===this._position||"top"===this._position)o=u=1===t.lineWidth%2?(i.x<<0)+.5:i.x<<0,a=this.chart.plotArea.y1,f=this.chart.plotArea.y2;else if("left"===this._position||"right"===this._position)a=f=1===t.lineWidth%2?(i.y<<0)+.5:i.y<<0,o=this.chart.plotArea.x1,u=this.chart.plotArea.x2;t.moveTo(o,a);t.lineTo(u,f);t.stroke()}}}};k.prototype.renderGrid=function(){if(this.gridThickness&&0<this.gridThickness){var e=this.chart.ctx,t,n=this.chart.plotArea;e.lineWidth=this.gridThickness;e.strokeStyle=this.gridColor;if("bottom"===this._position||"top"===this._position)for(r=0;r<this._labels.length&&!this._labels[r].stripLine;r++)this._labels[r].position<this.minimum||this._labels[r].position>this.maximum||(e.beginPath(),t=this.getPixelCoordinatesOnAxis(this._labels[r].position),t=1===e.lineWidth%2?(t.x<<0)+.5:t.x<<0,e.moveTo(t,n.y1<<0),e.lineTo(t,n.y2<<0),e.stroke());else if("left"===this._position||"right"===this._position)for(var r=0;r<this._labels.length&&!this._labels[r].stripLine;r++)this._labels[r].position<this.minimum||this._labels[r].position>this.maximum||(e.beginPath(),t=this.getPixelCoordinatesOnAxis(this._labels[r].position),t=1===e.lineWidth%2?(t.y<<0)+.5:t.y<<0,e.moveTo(n.x1<<0,t),e.lineTo(n.x2<<0,t),e.stroke())}};k.prototype.renderAxisLine=function(){var e=this.chart.ctx;if("bottom"===this._position||"top"===this._position){if(this.lineThickness){e.lineWidth=this.lineThickness;e.strokeStyle=this.lineColor?this.lineColor:"black";var t=1===this.lineThickness%2?(this.lineCoordinates.y1<<0)+.5:this.lineCoordinates.y1<<0;e.beginPath();e.moveTo(this.lineCoordinates.x1,t);e.lineTo(this.lineCoordinates.x2,t);e.stroke()}}else"left"!==this._position&&"right"!==this._position||!this.lineThickness||(e.lineWidth=this.lineThickness,e.strokeStyle=this.lineColor,t=1===this.lineThickness%2?(this.lineCoordinates.x1<<0)+.5:this.lineCoordinates.x1<<0,e.beginPath(),e.moveTo(t,this.lineCoordinates.y1),e.lineTo(t,this.lineCoordinates.y2),e.stroke())};k.prototype.getPixelCoordinatesOnAxis=function(e){var t={},n=this.lineCoordinates.width,r=this.lineCoordinates.height;if("bottom"===this._position||"top"===this._position)n/=Math.abs(this.maximum-this.minimum),t.x=this.lineCoordinates.x1+n*(e-this.minimum),t.y=this.lineCoordinates.y1;if("left"===this._position||"right"===this._position)n=r/Math.abs(this.maximum-this.minimum),t.y=this.lineCoordinates.y2-n*(e-this.minimum),t.x=this.lineCoordinates.x2;return t};k.prototype.getXValueAt=function(e){if(!e)return null;var t=null;"left"===this._position?t=(this.chart.axisX.maximum-this.chart.axisX.minimum)/this.chart.axisX.lineCoordinates.height*(this.chart.axisX.lineCoordinates.y2-e.y)+this.chart.axisX.minimum:"bottom"===this._position&&(t=(this.chart.axisX.maximum-this.chart.axisX.minimum)/this.chart.axisX.lineCoordinates.width*(e.x-this.chart.axisX.lineCoordinates.x1)+this.chart.axisX.minimum);return t};k.prototype.calculateValueToPixelconversionParameters=function(e){e={pixelPerUnit:null,minimum:null,reference:null};var t=this.lineCoordinates.width,n=this.lineCoordinates.height;e.minimum=this.minimum;if("bottom"===this._position||"top"===this._position)e.pixelPerUnit=t/Math.abs(this.maximum-this.minimum),e.reference=this.lineCoordinates.x1;if("left"===this._position||"right"===this._position)e.pixelPerUnit=-1*n/Math.abs(this.maximum-this.minimum),e.reference=this.lineCoordinates.y2;this.conversionParameters=e};k.prototype.calculateAxisParameters=function(){var e=this.chart.layoutManager.getFreeSpace();"bottom"===this._position||"top"===this._position?(this.maxWidth=e.width,this.maxHeight=e.height):(this.maxWidth=e.height,this.maxHeight=e.width);var e="axisX"===this.type?500>this.maxWidth?8:Math.max(6,Math.floor(this.maxWidth/62)):Math.floor(this.maxWidth/40),t,n,r,i;"axisX"===this.type?(t=null!==this.sessionVariables.internalMinimum?this.sessionVariables.internalMinimum:this.dataInfo.viewPortMin,n=null!==this.sessionVariables.internalMaximum?this.sessionVariables.internalMaximum:this.dataInfo.viewPortMax,0===n-t&&(n+=.4,t-=.4),r=Infinity!==this.dataInfo.minDiff?this.dataInfo.minDiff:1):"axisY"===this.type&&(t="undefined"===typeof this._options.minimum?this.dataInfo.viewPortMin:this._options.minimum,n="undefined"===typeof this._options.maximum?this.dataInfo.viewPortMax:this._options.maximum,0===n-t?(n+=5,t-=5):(0!==n&&(n+=Math.abs(.05)),0!==t&&(t-=Math.abs(.05))),this.includeZero&&"undefined"===typeof this._options.minimum&&0<t&&(t=0),this.includeZero&&"undefined"===typeof this._options.maximum&&0>n&&(n=0));"axisX"===this.type&&"dateTime"===this.chart.plotInfo.axisXValueType?(i=n-t,this.intervalType||(i/1<=e?(this.interval=1,this.intervalType="millisecond"):i/2<=e?(this.interval=2,this.intervalType="millisecond"):i/5<=e?(this.interval=5,this.intervalType="millisecond"):i/10<=e?(this.interval=10,this.intervalType="millisecond"):i/20<=e?(this.interval=20,this.intervalType="millisecond"):i/50<=e?(this.interval=50,this.intervalType="millisecond"):i/100<=e?(this.interval=100,this.intervalType="millisecond"):i/200<=e?(this.interval=200,this.intervalType="millisecond"):i/250<=e?(this.interval=250,this.intervalType="millisecond"):i/300<=e?(this.interval=300,this.intervalType="millisecond"):i/400<=e?(this.interval=400,this.intervalType="millisecond"):i/500<=e?(this.interval=500,this.intervalType="millisecond"):i/(1*j.secondDuration)<=e?(this.interval=1,this.intervalType="second"):i/(2*j.secondDuration)<=e?(this.interval=2,this.intervalType="second"):i/(5*j.secondDuration)<=e?(this.interval=5,this.intervalType="second"):i/(10*j.secondDuration)<=e?(this.interval=10,this.intervalType="second"):i/(15*j.secondDuration)<=e?(this.interval=15,this.intervalType="second"):i/(20*j.secondDuration)<=e?(this.interval=20,this.intervalType="second"):i/(30*j.secondDuration)<=e?(this.interval=30,this.intervalType="second"):i/(1*j.minuteDuration)<=e?(this.interval=1,this.intervalType="minute"):i/(2*j.minuteDuration)<=e?(this.interval=2,this.intervalType="minute"):i/(5*j.minuteDuration)<=e?(this.interval=5,this.intervalType="minute"):i/(10*j.minuteDuration)<=e?(this.interval=10,this.intervalType="minute"):i/(15*j.minuteDuration)<=e?(this.interval=15,this.intervalType="minute"):i/(20*j.minuteDuration)<=e?(this.interval=20,this.intervalType="minute"):i/(30*j.minuteDuration)<=e?(this.interval=30,this.intervalType="minute"):i/(1*j.hourDuration)<=e?(this.interval=1,this.intervalType="hour"):i/(2*j.hourDuration)<=e?(this.interval=2,this.intervalType="hour"):i/(3*j.hourDuration)<=e?(this.interval=3,this.intervalType="hour"):i/(6*j.hourDuration)<=e?(this.interval=6,this.intervalType="hour"):i/(1*j.dayDuration)<=e?(this.interval=1,this.intervalType="day"):i/(2*j.dayDuration)<=e?(this.interval=2,this.intervalType="day"):i/(4*j.dayDuration)<=e?(this.interval=4,this.intervalType="day"):i/(1*j.weekDuration)<=e?(this.interval=1,this.intervalType="week"):i/(2*j.weekDuration)<=e?(this.interval=2,this.intervalType="week"):i/(3*j.weekDuration)<=e?(this.interval=3,this.intervalType="week"):i/(1*j.monthDuration)<=e?(this.interval=1,this.intervalType="month"):i/(2*j.monthDuration)<=e?(this.interval=2,this.intervalType="month"):i/(3*j.monthDuration)<=e?(this.interval=3,this.intervalType="month"):i/(6*j.monthDuration)<=e?(this.interval=6,this.intervalType="month"):(this.interval=i/(1*j.yearDuration)<=e?1:i/(2*j.yearDuration)<=e?2:i/(4*j.yearDuration)<=e?4:Math.floor(k.getNiceNumber(i/(e-1),!0)/j.yearDuration),this.intervalType="year")),this.minimum=null!==this.sessionVariables.internalMinimum?this.sessionVariables.internalMinimum:t-r/2,this.maximum=this.sessionVariables.internalMaximum?this.sessionVariables.internalMaximum:n+r/2,this.valueFormatString||("year"===this.intervalType?this.valueFormatString="YYYY":"month"===this.intervalType?this.valueFormatString="MMM YYYY":"week"===this.intervalType?this.valueFormatString="MMM DD YYYY":"day"===this.intervalType?this.valueFormatString="MMM DD YYYY":"hour"===this.intervalType?this.valueFormatString="hh:mm TT":"minute"===this.intervalType?this.valueFormatString="hh:mm TT":"second"===this.intervalType?this.valueFormatString="hh:mm:ss TT":"millisecond"===this.intervalType&&(this.valueFormatString="fff'ms'")),this.intervalStartPosition=this.getLabelStartPoint(new Date(this.minimum),this.intervalType,this.interval)):(this.intervalType="number",i=k.getNiceNumber(n-t,!1),this.interval=this._options&&this._options.interval?this._options.interval:k.getNiceNumber(i/(e-1),!0),this.minimum=null!==this.sessionVariables.internalMinimum?this.sessionVariables.internalMinimum:Math.floor(t/this.interval)*this.interval,this.maximum=null!==this.sessionVariables.internalMaximum?this.sessionVariables.internalMaximum:Math.ceil(n/this.interval)*this.interval,"axisX"===this.type?(null===this.sessionVariables.internalMinimum&&(this.minimum=t-r/2),this.sessionVariables.internalMaximum||(this.maximum=n+r/2),this.intervalStartPosition=Math.floor((this.minimum+.2*this.interval)/this.interval)*this.interval):"axisY"===this.type&&(this.intervalStartPosition=this.minimum));"axisX"===this.type&&(this._absoluteMinimum=this._options&&"undefined"!==typeof this._options.minimum?this._options.minimum:this.dataInfo.min-r/2,this._absoluteMaximum=this._options&&"undefined"!==typeof this._options.maximum?this._options.maximum:this.dataInfo.max+r/2);if(!this.valueFormatString&&(this.valueFormatString="#,##0.##",i=Math.abs(this.maximum-this.minimum),1>i&&(t=Math.floor(Math.abs(Math.log(i)/Math.LN10))+2,2<t)))for(n=0;n<t-2;n++)this.valueFormatString+="#"};k.getNiceNumber=function(e,t){var n=Math.floor(Math.log(e)/Math.LN10),r=e/Math.pow(10,n);return(t?1.5>r?1:3>r?2:7>r?5:10:1>=r?1:2>=r?2:5>=r?5:10)*Math.pow(10,n)};k.prototype.getLabelStartPoint=function(){var e=r(this.interval,this.intervalType),e=new Date(Math.floor(this.minimum/e)*e);if("millisecond"!==this.intervalType)if("second"===this.intervalType)0<e.getMilliseconds()&&(e.setSeconds(e.getSeconds()+1),e.setMilliseconds(0));else if("minute"===this.intervalType){if(0<e.getSeconds()||0<e.getMilliseconds())e.setMinutes(e.getMinutes()+1),e.setSeconds(0),e.setMilliseconds(0)}else if("hour"===this.intervalType){if(0<e.getMinutes()||0<e.getSeconds()||0<e.getMilliseconds())e.setHours(e.getHours()+1),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)}else if("day"===this.intervalType){if(0<e.getHours()||0<e.getMinutes()||0<e.getSeconds()||0<e.getMilliseconds())e.setDate(e.getDate()+1),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)}else if("week"===this.intervalType){if(0<e.getDay()||0<e.getHours()||0<e.getMinutes()||0<e.getSeconds()||0<e.getMilliseconds())e.setDate(e.getDate()+(7-e.getDay())),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)}else if("month"===this.intervalType){if(1<e.getDate()||0<e.getHours()||0<e.getMinutes()||0<e.getSeconds()||0<e.getMilliseconds())e.setMonth(e.getMonth()+1),e.setDate(1),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)}else"year"===this.intervalType&&(0<e.getMonth()||1<e.getDate()||0<e.getHours()||0<e.getMinutes()||0<e.getSeconds()||0<e.getMilliseconds())&&(e.setFullYear(e.getFullYear()+1),e.setMonth(0),e.setDate(1),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0));return e};e(L,y);e(A,y);A.prototype._initialize=function(){if(this.enabled){this.container=document.createElement("div");this.container.setAttribute("class","canvasjs-chart-tooltip");this.container.style.position="absolute";this.container.style.height="auto";this.container.style.boxShadow="1px 1px 2px 2px rgba(0,0,0,0.1)";this.container.style.zIndex="1000";this.container.style.display="none";var e;e='<div style=" width: auto;height: auto;min-width: 50px;';e+="line-height: 20px;";e+="padding: 5px;";e+="font-family: Calibri, Arial, Georgia, serif;";e+="font-weight: 400;";e+="font-style: "+(_?"italic;":"normal;");e+="font-size: 14px;";e+="color: #000000;";e+="text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1);";e+="text-align: left;";e+="border: 2px solid gray;";e+=_?"background: rgba(255,255,255,.9);":"background: rgb(255,255,255);";e+="text-indent: 0px;";e+="white-space: nowrap;";e+="border-radius: 10px;";_||(e+="filter: alpha(opacity = 90);",e+="filter: progid:DXImageTransform.Microsoft.Shadow(Strength=3, Direction=135, Color='#666666');");e+='} "> Sample Tooltip</div>';this.container.innerHTML=e;this.contentDiv=this.container.firstChild;this.container.style.borderRadius=this.contentDiv.style.borderRadius;this.chart._canvasJSContainer.appendChild(this.container)}};A.prototype.mouseMoveHandler=function(e,t){this._lastUpdated&&40>(new Date).getTime()-this._lastUpdated||(this._lastUpdated=(new Date).getTime(),this._updateToolTip(e,t))};A.prototype._updateToolTip=function(e,t){if(this.enabled){if("undefined"===typeof e||"undefined"===typeof t){if(isNaN(this._prevX)||isNaN(this._prevY))return;e=this._prevX;t=this._prevY}else this._prevX=e,this._prevY=t;var n=null,r=null,i=[],s=0;if(this.shared&&"none"!==this.chart.plotInfo.axisPlacement){s="xySwapped"===this.chart.plotInfo.axisPlacement?(this.chart.axisX.maximum-this.chart.axisX.minimum)/this.chart.axisX.lineCoordinates.height*(this.chart.axisX.lineCoordinates.y2-t)+this.chart.axisX.minimum:(this.chart.axisX.maximum-this.chart.axisX.minimum)/this.chart.axisX.lineCoordinates.width*(e-this.chart.axisX.lineCoordinates.x1)+this.chart.axisX.minimum;n=[];for(r=0;r<this.chart.data.length;r++){var o=this.chart.data[r].getDataPointAtX(s,!0);o&&0<=o.index&&(o.dataSeries=this.chart.data[r],null!==o.dataPoint.y&&n.push(o))}if(0===n.length)return;n.sort(function(e,t){return e.distance-t.distance});s=n[0];for(r=0;r<n.length;r++)n[r].dataPoint.x.valueOf()===s.dataPoint.x.valueOf()&&i.push(n[r]);n=null}else if((o=this.chart.getDataPointAtXY(e,t,!0))?(this.currentDataPointIndex=o.dataPointIndex,this.currentSeriesIndex=o.dataSeries.index):_?(o=p(e,t,this.chart._eventManager.ghostCtx),0<o&&"undefined"!==typeof this.chart._eventManager.objectMap[o]?(eventObject=this.chart._eventManager.objectMap[o],this.currentSeriesIndex=eventObject.dataSeriesIndex,this.currentDataPointIndex=0<=eventObject.dataPointIndex?eventObject.dataPointIndex:-1):this.currentDataPointIndex=-1):this.currentDataPointIndex=-1,0<=this.currentSeriesIndex){r=this.chart.data[this.currentSeriesIndex];o={};if(0<=this.currentDataPointIndex)n=r.dataPoints[this.currentDataPointIndex],o.dataSeries=r,o.dataPoint=n,o.index=this.currentDataPointIndex,o.distance=Math.abs(n.x-s);else if("line"===r.type||"stepLine"===r.type||"spline"===r.type||"area"===r.type||"stepArea"===r.type||"splineArea"===r.type||"stackedArea"===r.type||"stackedArea100"===r.type)s=(this.chart.axisX.maximum-this.chart.axisX.minimum)/this.chart.axisX.lineCoordinates.width*(e-this.chart.axisX.lineCoordinates.x1)+this.chart.axisX.minimum.valueOf(),o=r.getDataPointAtX(s,!0),o.dataSeries=r,this.currentDataPointIndex=o.index,n=o.dataPoint;else return;null!==o.dataPoint.y&&i.push(o)}if(0<i.length){this.highlightObjects(i);s="";s=this.getToolTipInnerHTML({entries:i});this.contentDiv.innerHTML=s;this.contentDiv.innerHTML=s;s=!1;"none"===this.container.style.display&&(s=!0,this.container.style.display="block");try{this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.borderColor?this.borderColor:i[0].dataPoint.color?i[0].dataPoint.color:i[0].dataSeries.color?i[0].dataSeries.color:i[0].dataSeries._colorSet[i[0].index%i[0].dataSeries._colorSet.length]}catch(u){}"pie"===i[0].dataSeries.type||"doughnut"===i[0].dataSeries.type||"bar"===i[0].dataSeries.type||"stackedBar"===i[0].dataSeries.type||"stackedBar100"===i[0].dataSeries.type?toolTipLeft=e-10-this.container.clientWidth:(toolTipLeft=this.chart.axisX.lineCoordinates.width/Math.abs(this.chart.axisX.maximum-this.chart.axisX.minimum)*Math.abs(i[0].dataPoint.x-this.chart.axisX.minimum)+this.chart.axisX.lineCoordinates.x1+.5-this.container.clientWidth<<0,toolTipLeft-=10);toolTipLeft=0<toolTipLeft?toolTipLeft+"px":toolTipLeft+this.container.clientWidth+20+"px";i=1!==i.length||this.shared||"line"!==i[0].dataSeries.type&&"stepLine"!==i[0].dataSeries.type&&"spline"!==i[0].dataSeries.type&&"area"!==i[0].dataSeries.type&&"stepArea"!==i[0].dataSeries.type&&"splineArea"!==i[0].dataSeries.type&&"stackedArea"!==i[0].dataSeries.type&&"stackedArea100"!==i[0].dataSeries.type?"bar"===i[0].dataSeries.type||"stackedBar"===i[0].dataSeries.type||"stackedBar100"===i[0].dataSeries.type?i[0].dataSeries.axisX.lineCoordinates.y2-i[0].dataSeries.axisX.lineCoordinates.height/Math.abs(i[0].dataSeries.axisX.maximum-i[0].dataSeries.axisX.minimum)*Math.abs(i[0].dataPoint.x-i[0].dataSeries.axisX.minimum)+.5<<0:t:i[0].dataSeries.axisY.lineCoordinates.y2-i[0].dataSeries.axisY.lineCoordinates.height/Math.abs(i[0].dataSeries.axisY.maximum-i[0].dataSeries.axisY.minimum)*Math.abs(i[0].dataPoint.y-i[0].dataSeries.axisY.minimum)+.5<<0;i=-i+10;0<i+this.container.clientHeight+5&&(i-=i+this.container.clientHeight+5-0);this.container.style.left=toolTipLeft;this.container.style.bottom=i+"px";!this.animationEnabled||s?this.disableAnimation():this.enableAnimation()}}};A.prototype.highlightObjects=function(e){if(this.enabled){var t=this.chart.overlaidCanvasCtx;this.chart.resetOverlayedCanvas();t.save();var n=this.chart.plotArea;t.rect(n.x1,n.y1,n.width,n.height);t.clip();t.beginPath();for(n=0;n<e.length;n++){var r=e[n];if((r=this.chart._eventManager.objectMap[r.dataSeries.dataPointIds[r.index]])&&r.objectType&&"dataPoint"===r.objectType){var i=this.chart.data[r.dataSeriesIndex],s=r.dataPointIndex;if("line"===i.type||"stepLine"===i.type||"spline"===i.type||"scatter"===i.type||"area"===i.type||"stepArea"===i.type||"splineArea"===i.type||"stackedArea"===i.type||"stackedArea100"===i.type)i=i.getMarkerProperties(s,r.x1,r.y1,this.chart.overlaidCanvasCtx),i.size=Math.max(1.5*i.size<<0,10),i.borderColor=i.borderColor||"#FFFFFF",i.borderThickness=i.borderThickness||Math.ceil(.1*i.size),K.drawMarkers([i]);else if("bubble"===i.type)i=i.getMarkerProperties(s,r.x1,r.y1,this.chart.overlaidCanvasCtx),i.size=r.size,i.color="white",i.borderColor="white",t.globalAlpha=.3,K.drawMarkers([i]),t.globalAlpha=1;else if("column"===i.type||"stackedColumn"===i.type||"stackedColumn100"===i.type||"bar"===i.type||"stackedBar"===i.type||"stackedBar100"===i.type)t.globalAlpha=.3,$(t,r.x1,r.y1,r.x2,r.y2,"white",!1,!1,!1,!1),t.globalAlpha=1;else if("pie"===i.type||"doughnut"===i.type)t.globalAlpha=.3,J(t,r.center,r.radius,"white",i.type,r.startAngle,r.endAngle),t.globalAlpha=1}}t.globalAlpha=1;t.restore()}};A.prototype.getToolTipInnerHTML=function(e){e=e.entries;for(var t="",n=null,r=null,i=0,s="",o=!0,u=0;u<e.length;u++)if(e[u].dataSeries.toolTipContent||e[u].dataPoint.toolTipContent){o=!1;break}if(o&&this.content&&"function"===typeof this.content)t=this.content({entries:e});else if(1<e.length)for(u=0;u<e.length;u++){n=e[u].dataSeries;r=e[u].dataPoint;i=e[u].index;s="";0===u&&o&&!this.content&&(s+="undefined"!==typeof this.chart.axisX.labels[r.x]?this.chart.axisX.labels[r.x]:"{x}",s+="</br>");if("line"===n.type||"stepLine"===n.type||"spline"===n.type||"area"===n.type||"stepArea"===n.type||"splineArea"===n.type||"column"===n.type||"bar"===n.type||"scatter"===n.type||"stackedColumn"===n.type||"stackedColumn100"===n.type||"stackedBar"===n.type||"stackedBar100"===n.type||"stackedArea"===n.type||"stackedArea100"===n.type)s+=r.toolTipContent?r.toolTipContent:n.toolTipContent?n.toolTipContent:this.content&&"function"!==typeof this.content?this.content:"<span style='\"'color:{color};'\"'>{name}:</span>&nbsp;&nbsp;{y}";else if("bubble"===n.type)s+=r.toolTipContent?r.toolTipContent:n.toolTipContent?n.toolTipContent:this.content&&"function"!==typeof this.content?this.content:"<span style='\"'color:{color};'\"'>{name}:</span>&nbsp;&nbsp;{y}, &nbsp;&nbsp;{z}";else if("pie"===n.type||"doughnut"===n.type)s+=r.toolTipContent?r.toolTipContent:n.toolTipContent?n.toolTipContent:this.content&&"function"!==typeof this.content?this.content:"&nbsp;&nbsp;{y}";t+=this.chart.replaceKeywordsWithValue(s,r,n,i);u<e.length-1&&(t+="</br>")}else{n=e[0].dataSeries;r=e[0].dataPoint;i=e[0].index;if("line"===n.type||"stepLine"===n.type||"spline"===n.type||"area"===n.type||"stepArea"===n.type||"splineArea"===n.type||"column"===n.type||"bar"===n.type||"scatter"===n.type||"stackedColumn"===n.type||"stackedColumn100"===n.type||"stackedBar"===n.type||"stackedBar100"===n.type||"stackedArea"===n.type||"stackedArea100"===n.type)s=r.toolTipContent?r.toolTipContent:n.toolTipContent?n.toolTipContent:this.content&&"function"!==typeof this.content?this.content:"<span style='\"'color:{color};'\"'>"+(r.label?"{label}":"{x}")+" :</span>&nbsp;&nbsp;{y}";else if("bubble"===n.type)s=r.toolTipContent?r.toolTipContent:n.toolTipContent?n.toolTipContent:this.content&&"function"!==typeof this.content?this.content:"<span style='\"'color:{color};'\"'>"+(r.label?"{label}":"{x}")+":</span>&nbsp;&nbsp;{y}, &nbsp;&nbsp;{z}";else if("pie"===n.type||"doughnut"===n.type)s=r.toolTipContent?r.toolTipContent:n.toolTipContent?n.toolTipContent:this.content&&"function"!==typeof this.content?this.content:(r.name?"{name}:&nbsp;&nbsp;":r.label?"{label}:&nbsp;&nbsp;":"")+"{y}";t+=this.chart.replaceKeywordsWithValue(s,r,n,i)}return t};A.prototype.enableAnimation=function(){this.container.style.WebkitTransition||(this.container.style.WebkitTransition="left .2s ease-out, bottom .2s ease-out",this.container.style.MozTransition="left .2s ease-out, bottom .2s ease-out",this.container.style.MsTransition="left .2s ease-out, bottom .2s ease-out",this.container.style.transition="left .2s ease-out, bottom .2s ease-out")};A.prototype.disableAnimation=function(){this.container.style.WebkitTransition&&(this.container.style.WebkitTransition="",this.container.style.MozTransition="",this.container.style.MsTransition="",this.container.style.transition="")};A.prototype.hide=function(){this.enabled&&(this.container.style.display="none",this.currentSeriesIndex=-1,this._prevY=this._prevX=NaN,this.chart.resetOverlayedCanvas())};b.prototype.replaceKeywordsWithValue=function(e,t,n,r){var i=this;return e.replace(/\{\s*[a-zA-Z]+\s*\}|"[^"]*"|'[^']*'/g,function(e){if('"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1])return e.slice(1,e.length-1);e=o(e.slice(1,e.length-1));var s=null;if("color"===e)return t.color?t.color:n.color?n.color:n._colorSet[r%n._colorSet.length];if(t.hasOwnProperty(e))s=t;else if(n.hasOwnProperty(e))s=n;else return"";return"x"===e?i.axisX&&"dateTime"===i.plotInfo.axisXValueType?q(s[e],t.xValueFormatString?t.xValueFormatString:n.xValueFormatString?n.xValueFormatString:i.axisX&&i.axisX.valueFormatString?i.axisX.valueFormatString:"DD MMM YY",i._cultureInfo):R(s[e],t.xValueFormatString?t.xValueFormatString:n.xValueFormatString?n.xValueFormatString:"#,##0.########",i._cultureInfo):"y"===e?R(s[e],t.yValueFormatString?t.yValueFormatString:n.yValueFormatString?n.yValueFormatString:"#,##0.########",i._cultureInfo):s[e]})};O.prototype.reset=function(){this.lastObjectId=0;this.objectMap=[];this.rectangularRegionEventSubscriptions=[];this.previousDataPointEventObject=null;this.eventObjects=[];_&&(this.ghostCtx.clearRect(0,0,this.chart.width,this.chart.height),this.ghostCtx.beginPath())};O.prototype.getNewObjectTrackingId=function(){return++this.lastObjectId};O.prototype.mouseEventHandler=function(e){if("mousemove"===e.type||"click"===e.type){var t=[],n=U(e),r=null;if((r=this.chart.getObjectAtXY(n.x,n.y,!1))&&"undefined"!==typeof this.objectMap[r])if(r=this.objectMap[r],"dataPoint"===r.objectType){var i=this.chart.data[r.dataSeriesIndex],s=i.dataPoints[r.dataPointIndex],o=r.dataPointIndex;r.eventParameter={x:n.x,y:n.y,dataPoint:s,dataSeries:i._options,dataPointIndex:o,dataSeriesIndex:i.index};r.eventContext={context:s,userContext:s,mouseover:"mouseover",mousemove:"mousemove",mouseout:"mouseout",click:"click"};t.push(r);r=this.objectMap[i.id];r.eventParameter={x:n.x,y:n.y,dataPoint:s,dataSeries:i._options,dataPointIndex:o,dataSeriesIndex:i.index};r.eventContext={context:i,userContext:i._options,mouseover:"mouseover",mousemove:"mousemove",mouseout:"mouseout",click:"click"};t.push(this.objectMap[i.id])}else"legendItem"===r.objectType&&(i=this.chart.data[r.dataSeriesIndex],s=i.dataPoints[r.dataPointIndex],r.eventParameter={x:n.x,y:n.y,dataSeries:i._options,dataPoint:s,dataPointIndex:r.dataPointIndex,dataSeriesIndex:r.dataSeriesIndex},r.eventContext={context:this.chart.legend,userContext:this.chart.legend._options,mouseover:"itemmouseover",mousemove:"itemmousemove",mouseout:"itemmouseout",click:"itemclick"},t.push(r));i=[];for(n=0;n<this.mouseoveredObjectMaps.length;n++){s=!0;for(r=0;r<t.length;r++)if(t[r].id===this.mouseoveredObjectMaps[n].id){s=!1;break}s?this.fireEvent(this.mouseoveredObjectMaps[n],"mouseout",e):i.push(this.mouseoveredObjectMaps[n])}this.mouseoveredObjectMaps=i;for(n=0;n<t.length;n++){i=!1;for(r=0;r<this.mouseoveredObjectMaps.length;r++)if(t[n].id===this.mouseoveredObjectMaps[r].id){i=!0;break}i||(this.fireEvent(t[n],"mouseover",e),this.mouseoveredObjectMaps.push(t[n]));"click"===e.type?this.fireEvent(t[n],"click",e):"mousemove"===e.type&&this.fireEvent(t[n],"mousemove",e)}}};O.prototype.fireEvent=function(e,t,n){if(e&&t){var r=e.eventParameter,i=e.eventContext,s=e.eventContext.userContext;s&&i&&s[i[t]]&&s[i[t]].call(s,r);"mouseout"!==t?s.cursor&&s.cursor!==n.target.style.cursor&&(n.target.style.cursor=s.cursor):(n.target.style.cursor=this.chart._defaultCursor,delete e.eventParameter,delete e.eventContext);"click"===t&&"dataPoint"===e.objectType&&this.chart.pieDoughnutClickHandler&&this.chart.pieDoughnutClickHandler.call(this.chart.data[e.dataSeriesIndex],r)}};e(M,y);var K={drawMarker:function(e,t,n,r,i,s,o,u){if(n){var a=1;n.fillStyle=s?s:"#000000";n.strokeStyle=o?o:"#000000";n.lineWidth=u?u:0;"circle"===r?(n.moveTo(e,t),n.beginPath(),n.arc(e,t,i/2,0,2*Math.PI,!1),s&&n.fill(),u&&(o?n.stroke():(a=n.globalAlpha,n.globalAlpha=.15,n.strokeStyle="black",n.stroke(),n.globalAlpha=a))):"square"===r?(n.beginPath(),n.rect(e-i/2,t-i/2,i,i),s&&n.fill(),u&&(o?n.stroke():(a=n.globalAlpha,n.globalAlpha=.15,n.strokeStyle="black",n.stroke(),n.globalAlpha=a))):"triangle"===r?(n.beginPath(),n.moveTo(e-i/2,t+i/2),n.lineTo(e+i/2,t+i/2),n.lineTo(e,t-i/2),n.closePath(),s&&n.fill(),u&&(o?n.stroke():(a=n.globalAlpha,n.globalAlpha=.15,n.strokeStyle="black",n.stroke(),n.globalAlpha=a)),n.beginPath()):"cross"===r&&(n.strokeStyle=s,n.lineWidth=i/4,n.beginPath(),n.moveTo(e-i/2,t-i/2),n.lineTo(e+i/2,t+i/2),n.stroke(),n.moveTo(e+i/2,t-i/2),n.lineTo(e-i/2,t+i/2),n.stroke())}},drawMarkers:function(e){for(var t=0;t<e.length;t++){var n=e[t];K.drawMarker(n.x,n.y,n.ctx,n.type,n.size,n.color,n.borderColor,n.borderThickness)}}},Q={Chart:function(e,t){var n=new b(e,t,this);this.render=function(){n.render(this.options)};this.options=n._options},addColorSet:function(e,t){H[e]=t},addCultureInfo:function(e,t){P[e]=t}};Q.Chart.version="v1.4.1 GA";window.CanvasJS=Q})();document.createElement("canvas").getContext||function(){function e(){return this.context_||(this.context_=new p(this))}function t(e,t,n){var r=O.call(arguments,2);return function(){return e.apply(t,r.concat(O.call(arguments)))}}function n(e){return String(e).replace(/&/g,"&").replace(/"/g,"&quot;")}function r(e){e.namespaces.g_vml_||e.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML");e.namespaces.g_o_||e.namespaces.add("g_o_","urn:schemas-microsoft-com:office:office","#default#VML");e.styleSheets.ex_canvas_||(e=e.createStyleSheet(),e.owningElement.id="ex_canvas_",e.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}")}function i(e){var t=e.srcElement;switch(e.propertyName){case"width":t.getContext().clearRect();t.style.width=t.attributes.width.nodeValue+"px";t.firstChild.style.width=t.clientWidth+"px";break;case"height":t.getContext().clearRect(),t.style.height=t.attributes.height.nodeValue+"px",t.firstChild.style.height=t.clientHeight+"px"}}function s(e){e=e.srcElement;e.firstChild&&(e.firstChild.style.width=e.clientWidth+"px",e.firstChild.style.height=e.clientHeight+"px")}function o(){return[[1,0,0],[0,1,0],[0,0,1]]}function u(e,t){for(var n=o(),r=0;3>r;r++)for(var i=0;3>i;i++){for(var s=0,u=0;3>u;u++)s+=e[r][u]*t[u][i];n[r][i]=s}return n}function a(e,t){t.fillStyle=e.fillStyle;t.lineCap=e.lineCap;t.lineJoin=e.lineJoin;t.lineWidth=e.lineWidth;t.miterLimit=e.miterLimit;t.shadowBlur=e.shadowBlur;t.shadowColor=e.shadowColor;t.shadowOffsetX=e.shadowOffsetX;t.shadowOffsetY=e.shadowOffsetY;t.strokeStyle=e.strokeStyle;t.globalAlpha=e.globalAlpha;t.font=e.font;t.textAlign=e.textAlign;t.textBaseline=e.textBaseline;t.arcScaleX_=e.arcScaleX_;t.arcScaleY_=e.arcScaleY_;t.lineScale_=e.lineScale_}function f(e){var t=e.indexOf("(",3),n=e.indexOf(")",t+1),t=e.substring(t+1,n).split(",");if(4!=t.length||"a"!=e.charAt(3))t[3]=1;return t}function l(e,t,n){return Math.min(n,Math.max(t,e))}function c(e,t,n){0>n&&n++;1<n&&n--;return 1>6*n?e+6*(t-e)*n:1>2*n?t:2>3*n?e+6*(t-e)*(2/3-n):e}function h(e){if(e in B)return B[e];var t,n=1;e=String(e);if("#"==e.charAt(0))t=e;else if(/^rgb/.test(e)){n=f(e);t="#";for(var r,i=0;3>i;i++)r=-1!=n[i].indexOf("%")?Math.floor(255*(parseFloat(n[i])/100)):+n[i],t+=_[l(r,0,255)];n=+n[3]}else if(/^hsl/.test(e)){i=n=f(e);t=parseFloat(i[0])/360%360;0>t&&t++;r=l(parseFloat(i[1])/100,0,1);i=l(parseFloat(i[2])/100,0,1);if(0==r)r=i=t=i;else{var s=.5>i?i*(1+r):i+r-i*r,o=2*i-s;r=c(o,s,t+1/3);i=c(o,s,t);t=c(o,s,t-1/3)}t="#"+_[Math.floor(255*r)]+_[Math.floor(255*i)]+_[Math.floor(255*t)];n=n[3]}else t=H[e]||e;return B[e]={color:t,alpha:n}}function p(e){this.m_=o();this.mStack_=[];this.aStack_=[];this.currentPath_=[];this.fillStyle=this.strokeStyle="#000";this.lineWidth=1;this.lineJoin="miter";this.lineCap="butt";this.miterLimit=1*L;this.globalAlpha=1;this.font="10px sans-serif";this.textAlign="left";this.textBaseline="alphabetic";this.canvas=e;var t="width:"+e.clientWidth+"px;height:"+e.clientHeight+"px;overflow:hidden;position:absolute",n=e.ownerDocument.createElement("div");n.style.cssText=t;e.appendChild(n);t=n.cloneNode(!1);t.style.backgroundColor="red";t.style.filter="alpha(opacity=0)";e.appendChild(t);this.element_=n;this.lineScale_=this.arcScaleY_=this.arcScaleX_=1}function d(e,t,n,r){e.currentPath_.push({type:"bezierCurveTo",cp1x:t.x,cp1y:t.y,cp2x:n.x,cp2y:n.y,x:r.x,y:r.y});e.currentX_=r.x;e.currentY_=r.y}function v(e,t){var n=h(e.strokeStyle),r=n.color,n=n.alpha*e.globalAlpha,i=e.lineScale_*e.lineWidth;1>i&&(n*=i);t.push("<g_vml_:stroke",' opacity="',n,'"',' joinstyle="',e.lineJoin,'"',' miterlimit="',e.miterLimit,'"',' endcap="',F[e.lineCap]||"square",'"',' weight="',i,'px"',' color="',r,'" />')}function m(e,t,n,r){var i=e.fillStyle,s=e.arcScaleX_,o=e.arcScaleY_,u=r.x-n.x,a=r.y-n.y;if(i instanceof b){var f=0,l=r=0,c=0,p=1;if("gradient"==i.type_){f=i.x1_/s;n=i.y1_/o;var d=g(e,i.x0_/s,i.y0_/o),f=g(e,f,n),f=180*Math.atan2(f.x-d.x,f.y-d.y)/Math.PI;0>f&&(f+=360);1e-6>f&&(f=0)}else d=g(e,i.x0_,i.y0_),r=(d.x-n.x)/u,l=(d.y-n.y)/a,u/=s*L,a/=o*L,p=S.max(u,a),c=2*i.r0_/p,p=2*i.r1_/p-c;s=i.colors_;s.sort(function(e,t){return e.offset-t.offset});o=s.length;d=s[0].color;n=s[o-1].color;u=s[0].alpha*e.globalAlpha;e=s[o-1].alpha*e.globalAlpha;for(var a=[],v=0;v<o;v++){var m=s[v];a.push(m.offset*p+c+" "+m.color)}t.push('<g_vml_:fill type="',i.type_,'"',' method="none" focus="100%"',' color="',d,'"',' color2="',n,'"',' colors="',a.join(","),'"',' opacity="',e,'"',' g_o_:opacity2="',u,'"',' angle="',f,'"',' focusposition="',r,",",l,'" />')}else i instanceof w?u&&a&&t.push("<g_vml_:fill",' position="',-n.x/u*s*s,",",-n.y/a*o*o,'"',' type="tile"',' src="',i.src_,'" />'):(i=h(e.fillStyle),t.push('<g_vml_:fill color="',i.color,'" opacity="',i.alpha*e.globalAlpha,'" />'))}function g(e,t,n){e=e.m_;return{x:L*(t*e[0][0]+n*e[1][0]+e[2][0])-A,y:L*(t*e[0][1]+n*e[1][1]+e[2][1])-A}}function y(e,t,n){isFinite(t[0][0])&&isFinite(t[0][1])&&isFinite(t[1][0])&&isFinite(t[1][1])&&isFinite(t[2][0])&&isFinite(t[2][1])&&(e.m_=t,n&&(e.lineScale_=k(C(t[0][0]*t[1][1]-t[0][1]*t[1][0]))))}function b(e){this.type_=e;this.r1_=this.y1_=this.x1_=this.r0_=this.y0_=this.x0_=0;this.colors_=[]}function w(e,t){if(!e||1!=e.nodeType||"IMG"!=e.tagName)throw new E("TYPE_MISMATCH_ERR");if("complete"!=e.readyState)throw new E("INVALID_STATE_ERR");switch(t){case"repeat":case null:case"":this.repetition_="repeat";break;case"repeat-x":case"repeat-y":case"no-repeat":this.repetition_=t;break;default:throw new E("SYNTAX_ERR")}this.src_=e.src;this.width_=e.width;this.height_=e.height}function E(e){this.code=this[e];this.message=e+": DOM Exception "+this.code}var S=Math,x=S.round,T=S.sin,N=S.cos,C=S.abs,k=S.sqrt,L=10,A=L/2;navigator.userAgent.match(/MSIE ([\d.]+)?/);var O=Array.prototype.slice;r(document);var M={init:function(e){e=e||document;e.createElement("canvas");e.attachEvent("onreadystatechange",t(this.init_,this,e))},init_:function(e){e=e.getElementsByTagName("canvas");for(var t=0;t<e.length;t++)this.initElement(e[t])},initElement:function(t){if(!t.getContext){t.getContext=e;r(t.ownerDocument);t.innerHTML="";t.attachEvent("onpropertychange",i);t.attachEvent("onresize",s);var n=t.attributes;n.width&&n.width.specified?t.style.width=n.width.nodeValue+"px":t.width=t.clientWidth;n.height&&n.height.specified?t.style.height=n.height.nodeValue+"px":t.height=t.clientHeight}return t}};M.init();for(var _=[],D=0;16>D;D++)for(var P=0;16>P;P++)_[16*D+P]=D.toString(16)+P.toString(16);var H={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",grey:"#808080",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",oldlace:"#FDF5E6",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",whitesmoke:"#F5F5F5",yellowgreen:"#9ACD32"},B={},j={},F={butt:"flat",round:"round"},D=p.prototype;D.clearRect=function(){this.textMeasureEl_&&(this.textMeasureEl_.removeNode(!0),this.textMeasureEl_=null);this.element_.innerHTML=""};D.beginPath=function(){this.currentPath_=[]};D.moveTo=function(e,t){var n=g(this,e,t);this.currentPath_.push({type:"moveTo",x:n.x,y:n.y});this.currentX_=n.x;this.currentY_=n.y};D.lineTo=function(e,t){var n=g(this,e,t);this.currentPath_.push({type:"lineTo",x:n.x,y:n.y});this.currentX_=n.x;this.currentY_=n.y};D.bezierCurveTo=function(e,t,n,r,i,s){i=g(this,i,s);e=g(this,e,t);n=g(this,n,r);d(this,e,n,i)};D.quadraticCurveTo=function(e,t,n,r){e=g(this,e,t);n=g(this,n,r);r={x:this.currentX_+2/3*(e.x-this.currentX_),y:this.currentY_+2/3*(e.y-this.currentY_)};d(this,r,{x:r.x+(n.x-this.currentX_)/3,y:r.y+(n.y-this.currentY_)/3},n)};D.arc=function(e,t,n,r,i,s){n*=L;var o=s?"at":"wa",u=e+N(r)*n-A,a=t+T(r)*n-A;r=e+N(i)*n-A;i=t+T(i)*n-A;u!=r||s||(u+=.125);e=g(this,e,t);u=g(this,u,a);r=g(this,r,i);this.currentPath_.push({type:o,x:e.x,y:e.y,radius:n,xStart:u.x,yStart:u.y,xEnd:r.x,yEnd:r.y})};D.rect=function(e,t,n,r){this.moveTo(e,t);this.lineTo(e+n,t);this.lineTo(e+n,t+r);this.lineTo(e,t+r);this.closePath()};D.strokeRect=function(e,t,n,r){var i=this.currentPath_;this.beginPath();this.moveTo(e,t);this.lineTo(e+n,t);this.lineTo(e+n,t+r);this.lineTo(e,t+r);this.closePath();this.stroke();this.currentPath_=i};D.fillRect=function(e,t,n,r){var i=this.currentPath_;this.beginPath();this.moveTo(e,t);this.lineTo(e+n,t);this.lineTo(e+n,t+r);this.lineTo(e,t+r);this.closePath();this.fill();this.currentPath_=i};D.createLinearGradient=function(e,t,n,r){var i=new b("gradient");i.x0_=e;i.y0_=t;i.x1_=n;i.y1_=r;return i};D.createRadialGradient=function(e,t,n,r,i,s){var o=new b("gradientradial");o.x0_=e;o.y0_=t;o.r0_=n;o.x1_=r;o.y1_=i;o.r1_=s;return o};D.drawImage=function(e,t){var n,r,i,s,o,u,a,f;i=e.runtimeStyle.width;s=e.runtimeStyle.height;e.runtimeStyle.width="auto";e.runtimeStyle.height="auto";var l=e.width,c=e.height;e.runtimeStyle.width=i;e.runtimeStyle.height=s;if(3==arguments.length)n=arguments[1],r=arguments[2],o=u=0,a=i=l,f=s=c;else if(5==arguments.length)n=arguments[1],r=arguments[2],i=arguments[3],s=arguments[4],o=u=0,a=l,f=c;else if(9==arguments.length)o=arguments[1],u=arguments[2],a=arguments[3],f=arguments[4],n=arguments[5],r=arguments[6],i=arguments[7],s=arguments[8];else throw Error("Invalid number of arguments");var h=g(this,n,r),p=[];p.push(" <g_vml_:group",' coordsize="',10*L,",",10*L,'"',' coordorigin="0,0"',' style="width:',10,"px;height:",10,"px;position:absolute;");if(1!=this.m_[0][0]||this.m_[0][1]||1!=this.m_[1][1]||this.m_[1][0]){var d=[];d.push("M11=",this.m_[0][0],",","M12=",this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",x(h.x/L),",","Dy=",x(h.y/L),"");var v=g(this,n+i,r),m=g(this,n,r+s);n=g(this,n+i,r+s);h.x=S.max(h.x,v.x,m.x,n.x);h.y=S.max(h.y,v.y,m.y,n.y);p.push("padding:0 ",x(h.x/L),"px ",x(h.y/L),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",d.join(""),", sizingmethod='clip');")}else p.push("top:",x(h.y/L),"px;left:",x(h.x/L),"px;");p.push(' ">','<g_vml_:image src="',e.src,'"',' style="width:',L*i,"px;"," height:",L*s,'px"',' cropleft="',o/l,'"',' croptop="',u/c,'"',' cropright="',(l-o-a)/l,'"',' cropbottom="',(c-u-f)/c,'"'," />","</g_vml_:group>");this.element_.insertAdjacentHTML("BeforeEnd",p.join(""))};D.stroke=function(e){var t=[];t.push("<g_vml_:shape",' filled="',!!e,'"',' style="position:absolute;width:',10,"px;height:",10,'px;"',' coordorigin="0,0"',' coordsize="',10*L,",",10*L,'"',' stroked="',!e,'"',' path="');for(var n={x:null,y:null},r={x:null,y:null},i=0;i<this.currentPath_.length;i++){var s=this.currentPath_[i];switch(s.type){case"moveTo":t.push(" m ",x(s.x),",",x(s.y));break;case"lineTo":t.push(" l ",x(s.x),",",x(s.y));break;case"close":t.push(" x ");s=null;break;case"bezierCurveTo":t.push(" c ",x(s.cp1x),",",x(s.cp1y),",",x(s.cp2x),",",x(s.cp2y),",",x(s.x),",",x(s.y));break;case"at":case"wa":t.push(" ",s.type," ",x(s.x-this.arcScaleX_*s.radius),",",x(s.y-this.arcScaleY_*s.radius)," ",x(s.x+this.arcScaleX_*s.radius),",",x(s.y+this.arcScaleY_*s.radius)," ",x(s.xStart),",",x(s.yStart)," ",x(s.xEnd),",",x(s.yEnd))}if(s){if(null==n.x||s.x<n.x)n.x=s.x;if(null==r.x||s.x>r.x)r.x=s.x;if(null==n.y||s.y<n.y)n.y=s.y;if(null==r.y||s.y>r.y)r.y=s.y}}t.push(' ">');e?m(this,t,n,r):v(this,t);t.push("</g_vml_:shape>");this.element_.insertAdjacentHTML("beforeEnd",t.join(""))};D.fill=function(){this.stroke(!0)};D.closePath=function(){this.currentPath_.push({type:"close"})};D.save=function(){var e={};a(this,e);this.aStack_.push(e);this.mStack_.push(this.m_);this.m_=u(o(),this.m_)};D.restore=function(){this.aStack_.length&&(a(this.aStack_.pop(),this),this.m_=this.mStack_.pop())};D.translate=function(e,t){y(this,u([[1,0,0],[0,1,0],[e,t,1]],this.m_),!1)};D.rotate=function(e){var t=N(e);e=T(e);y(this,u([[t,e,0],[-e,t,0],[0,0,1]],this.m_),!1)};D.scale=function(e,t){this.arcScaleX_*=e;this.arcScaleY_*=t;y(this,u([[e,0,0],[0,t,0],[0,0,1]],this.m_),!0)};D.transform=function(e,t,n,r,i,s){y(this,u([[e,t,0],[n,r,0],[i,s,1]],this.m_),!0)};D.setTransform=function(e,t,n,r,i,s){y(this,[[e,t,0],[n,r,0],[i,s,1]],!0)};D.drawText_=function(e,t,r,i,s){var o=this.m_;i=0;var u=1e3,a=0,f=[],l;l=this.font;if(j[l])l=j[l];else{var c=document.createElement("div").style;try{c.font=l}catch(h){}l=j[l]={style:c.fontStyle||"normal",variant:c.fontVariant||"normal",weight:c.fontWeight||"normal",size:c.fontSize||10,family:c.fontFamily||"sans-serif"}}var c=l,p=this.element_;l={};for(var d in c)l[d]=c[d];d=parseFloat(p.currentStyle.fontSize);p=parseFloat(c.size);"number"==typeof c.size?l.size=c.size:-1!=c.size.indexOf("px")?l.size=p:-1!=c.size.indexOf("em")?l.size=d*p:-1!=c.size.indexOf("%")?l.size=d/100*p:-1!=c.size.indexOf("pt")?l.size=p/.75:l.size=d;l.size*=.981;d=l.style+" "+l.variant+" "+l.weight+" "+l.size+"px "+l.family;p=this.element_.currentStyle;c=this.textAlign.toLowerCase();switch(c){case"left":case"center":case"right":break;case"end":c="ltr"==p.direction?"right":"left";break;case"start":c="rtl"==p.direction?"right":"left";break;default:c="left"}switch(this.textBaseline){case"hanging":case"top":a=l.size/1.75;break;case"middle":break;default:case null:case"alphabetic":case"ideographic":case"bottom":a=-l.size/2.25}switch(c){case"right":i=1e3;u=.05;break;case"center":i=u=500}t=g(this,t+0,r+a);f.push('<g_vml_:line from="',-i,' 0" to="',u,' 0.05" ',' coordsize="100 100" coordorigin="0 0"',' filled="',!s,'" stroked="',!!s,'" style="position:absolute;width:1px;height:1px;">');s?v(this,f):m(this,f,{x:-i,y:0},{x:u,y:l.size});s=o[0][0].toFixed(3)+","+o[1][0].toFixed(3)+","+o[0][1].toFixed(3)+","+o[1][1].toFixed(3)+",0,0";t=x(t.x/L)+","+x(t.y/L);f.push('<g_vml_:skew on="t" matrix="',s,'" ',' offset="',t,'" origin="',i,' 0" />','<g_vml_:path textpathok="true" />','<g_vml_:textpath on="true" string="',n(e),'" style="v-text-align:',c,";font:",n(d),'" /></g_vml_:line>');this.element_.insertAdjacentHTML("beforeEnd",f.join(""))};D.fillText=function(e,t,n,r){this.drawText_(e,t,n,r,!1)};D.strokeText=function(e,t,n,r){this.drawText_(e,t,n,r,!0)};D.measureText=function(e){this.textMeasureEl_||(this.element_.insertAdjacentHTML("beforeEnd",'<span style="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;"></span>'),this.textMeasureEl_=this.element_.lastChild);var t=this.element_.ownerDocument;this.textMeasureEl_.innerHTML="";this.textMeasureEl_.style.font=this.font;this.textMeasureEl_.appendChild(t.createTextNode(e));return{width:this.textMeasureEl_.offsetWidth}};D.clip=function(){};D.arcTo=function(){};D.createPattern=function(e,t){return new w(e,t)};b.prototype.addColorStop=function(e,t){t=h(t);this.colors_.push({offset:e,color:t.color,alpha:t.alpha})};D=E.prototype=Error();D.INDEX_SIZE_ERR=1;D.DOMSTRING_SIZE_ERR=2;D.HIERARCHY_REQUEST_ERR=3;D.WRONG_DOCUMENT_ERR=4;D.INVALID_CHARACTER_ERR=5;D.NO_DATA_ALLOWED_ERR=6;D.NO_MODIFICATION_ALLOWED_ERR=7;D.NOT_FOUND_ERR=8;D.NOT_SUPPORTED_ERR=9;D.INUSE_ATTRIBUTE_ERR=10;D.INVALID_STATE_ERR=11;D.SYNTAX_ERR=12;D.INVALID_MODIFICATION_ERR=13;D.NAMESPACE_ERR=14;D.INVALID_ACCESS_ERR=15;D.VALIDATION_ERR=16;D.TYPE_MISMATCH_ERR=17;G_vmlCanvasManager=M;CanvasRenderingContext2D=p;CanvasGradient=b;CanvasPattern=w;DOMException=E}()